{"version":3,"sources":["Backend/Charts/handler.js","Backend/Bcn/handler.js","Backend/Maps/MapDataStatic.js","Backend/Maps/handler.js","MenuItems.jsx","Backend/Charts/index.js","Backend/Bcn/index.js","Backend/Provider.jsx","withDocumentVisibility.jsx","Backend/IndexesHandler.jsx","App.jsx","Menu.jsx","ModalRouter.jsx","Widget/Menu.jsx","Widget/Actions.jsx","Widget/Widget.jsx","Widget/Storage/StorageContext.js","Widget/Storage/withStorageHandler.jsx","Widget/Storage/StorageContextProviderLocalStorage.jsx","Widget/Storage/StorageContextProviderRouter.jsx","Widget/Storage/StorageContextProvider.jsx","Widget/ListHeader.jsx","Widget/MenuAddWidget.jsx","Widget/Widgets/Common/Box.js","Widget/Widgets/Common/LegendElement.jsx","Widget/Widgets/Map/MapImage.jsx","Widget/Widgets/Map/Edit.jsx","Widget/Widgets/Map/Legend.jsx","Widget/Widgets/Map/Widget.jsx","Widget/Widgets/Map/index.js","Widget/Widgets/Common/ChartTooltip.jsx","asyncComponent.jsx","Widget/Widgets/Common/Chart.jsx","Widget/Widgets/Chart/MultiChart/dataTransform.js","Widget/Widgets/Chart/MultiChart/ChartIEPG.jsx","Widget/Widgets/Chart/MultiChart/ChartExtensio.jsx","Widget/Widgets/Chart/MultiChart/Pills.jsx","Widget/Widgets/Chart/MultiChart/TableSituacio.jsx","Widget/Widgets/Chart/MultiChart/TableSeguiment.jsx","Widget/Widgets/Chart/MultiChart/MultiChart.jsx","Widget/Widgets/Chart/MultiChart/index.js","Widget/Widgets/Chart/EditRegion.jsx","Widget/Widgets/Chart/Edit.jsx","Widget/Widgets/Chart/Widget.jsx","Widget/Widgets/Bcn/bcn.svg","Widget/Widgets/Chart/index.js","Widget/Widgets/Bcn/BcnLogo.jsx","Widget/Widgets/Common/FormDecorators.jsx","Widget/Widgets/Bcn/EditDataset.jsx","Widget/Widgets/Bcn/Edit.jsx","Widget/Widgets/Bcn/Widget.jsx","Widget/Widgets/Bcn/index.js","Widget/Widgets/index.js","Widget/SortableWidgetContainer.jsx","Throtle.js","Widget/PlayPause.jsx","Widget/Slider.jsx","Widget/DateSlider.jsx","Widget/List.jsx","About.jsx","Language.jsx","Theme.jsx","ModalRouterWithRoutes.jsx","AppThemeProvider.jsx","Dashboard.jsx","serviceWorkerRegistration.js","reportWebVitals.js","index.js","Backend/Maps/index.js","Backend/Base/Cache.js","ErrorCatcher.jsx","loading.svg","Loading.jsx","Backend/Charts/withHandlers.js","Backend/Charts/context.js","Backend/Bcn/withHandlers.js","Backend/Bcn/context.js","Backend/Maps/withHandlers.js","Backend/Maps/context.js","Backend/Base/withHandlerGenerator.jsx","Backend/Base/GHPages.js","Backend/Base/ContextCreator.jsx","Backend/Base/Common.js","i18n/ca-es.lang.js","i18n/es-es.lang.js","i18n/en-en.lang.js","i18n/pl-pl.lang.js","i18n/nb-no.lang.js","i18n/available.js"],"names":["ChartStaticHost","process","ChartDataStaticURL","ChartDataBase","ChartDataHandler","index","name","indexUrl","unsubscribeIndex","divisions","populations","indexData","indexInternal","callback","cache","fetch","unsubscribe","parseIndex","Set","map","territori","poblacio","invalidateAll","active","getURL","url","encodeURIComponent","a","log","invalidate","findBreadcrumb","node","value","compare","children","child","found","length","findChild","list","findInitialNode","division","population","find","link","initialLink","findRegion","region","initialNode","nodes","filter","f1","f2","data","includes","push","console","warn","GHPages","BcnStaticHost","REACT_APP_BCN_STATIC_HOST","BcnDataStaticURL","BcnDataHandler","code","sections","dataset","fn","values","MapStaticHost","days","MapaComarques","MapaMunicipis","comarcaEdat","comarcaPcrpos","comarcaRisc","comarcaRt","comarcaTaxa_conf","comarcaTaxapcr","municipiEdat","municipiPcrpos","municipiRisc","municipiRt","MapDataStatic","metadata","risc","title","label","colors","color","taxa_conf","rt","edat","pcrpos","taxapcr","kind","Comarca","svg","Municipi","MapDataHandler","kinds","Object","keys","meta","metaColors","metaTitle","metaLabel","metaName","ListItemLink","props","icon","primary","to","renderLink","React","useMemo","forwardRef","itemProps","ref","button","component","MainMenuItems","translate","t","style","fontSize","faAbout","faLanguage","SecondaryMenuItems","handler","BackendProvider","bcn","maps","charts","document","hidden","visibilityChange","msHidden","webkitHidden","checkVisibility","withDocumentVisibility","Wrapped","addEventListener","visible","useState","setVisible","useEffect","handleVisibilityChange","removeEventListener","IndexesHandler","onBeforeUpdate","backend","onAfterUpdate","updated","updateIfNeeded","Promise","resolve","now","Date","state","nextUpdateDate","updateAllIfNeeded","all","backends","scheduleNextUpdate","notUpdatedMillis","milllisToNextUpdate","bind","componentDidUpdate","prevProps","prevState","forEach","cancelUpdateSchedule","initializer","reduce","acc","this","setState","indexes","provided","some","Loading","Provider","Component","defaultProps","withMapsDataHandler","withChartsDataHandler","withBcnDataHandler","AppHelmet","language","useTranslate","titleTemplate","defaultTitle","lang","AppProviders","translations","className","id","App","stopInitializing","initializing","handleLanguageChange","handleThemeChange","theme","handleTutorialSeenChange","tutorialSeen","decoded","decodeURIComponent","global","location","hash","replace","fixLocationHash","available","languageNav","navigator","toLowerCase","key","getDefaultLanguage","_language","origin","parent","prefix","blacklist","onParentStateHydrated","onLanguageChange","onThemeChange","onTutorialSeen","useStyles","makeStyles","toolbarIcon","display","alignItems","justifyContent","padding","mixins","toolbar","flexGrow","drawerPaper","position","whiteSpace","width","transition","transitions","create","easing","sharp","duration","enteringScreen","drawerPaperClose","overflowX","leavingScreen","spacing","breakpoints","up","updateItem","MenuContent","classes","edge","aria-label","onClick","handleDrawerClose","variant","noWrap","Menu","handleDrawerOpen","open","newServiceWorkerDetected","onLoadNewServiceWorkerAccept","useTheme","isBig","useMediaQuery","DrawerComponent","Drawer","SwipeableDrawer","iOS","browser","test","userAgent","toggleDrawer","event","anchor","onClose","onOpen","disableBackdropTransition","disableDiscovery","paper","clsx","e","preventDefault","faUpgrade","CloseModal","history","setTimeout","PureComponent","ModalRouterInner","openModal","modalIsOpen","closeModal","propsClose","path","timer","undefined","handleHistoryChange","action","getPathState","autoForce","forced","mounted","initialPath","unlisten","listen","clearTimeout","force","fullScreen","aria-labelledby","aria-describedby","pathname","render","autoFocus","ModalRouterInnerWithClasses","down","ModalRouter","rest","WidgetMenuItem","option","MenuItem","ListItemIcon","ListItemText","options","restProps","anchorEl","setAnchorEl","Boolean","handleClose","handleClickElement","IconButton","aria-controls","aria-haspopup","currentTarget","faEllipsisV","keepMounted","PaperProps","DraggableResponsiveDialogUntranslated","handleClickOpen","Content","Title","Dialog","TransitionComponent","Draggable","DialogTitle","cursor","DialogContent","ErrorCatcher","reloadOnRetry","DialogActions","Button","DraggableResponsiveDialog","propTypes","PropTypes","string","isRequired","object","withFullScreen","root","height","draggableWidgetTitle","verticalAlign","paddingRight","withWidget","sectionsOrig","remove","faTrash","onRemove","startIcon","ViewUnhandled","view","View","DragHandle","SortableHandle","DragHandleWithIndicatorIcon","TitleUnhandled","indexValues","Card","CardHeader","subheader","subtitle","CardContent","WidgetStorageContext","createContext","withStorageHandler","defaults","WithStorageHandler","storageHandler","forwardedRef","onChangeData","restData","allData","assign","Consumer","forwarded","LocalStorageProvider","RouterProvider","historyPush","newPath","paramsToString","componentDidMount","params","widgets","componentWillUnmount","paramsFilter","RouterProviderWithSwitchWithStorageHandler","pathFilter","propsRoute","match","processedParams","type","ContextProvider","appBarSpacer","overflow","flexDirection","fixed","top","zIndex","paddingBottom","sliderContainer","marginTop","marginBottom","marginLeft","marginRight","ListHeader","fixedPaper","Paper","elevation","MenuAddWidget","memo","onAdd","Fab","transformOrigin","vertical","horizontal","Box","styled","BoxMaterial","shape","borderWidth","borderStyle","borderColor","palette","text","hint","backgroundColor","LegendElement","Grid","container","direction","wrap","item","ReactTooltipStyled","ReactTooltip","background","default","opacity","fontFamily","typography","borderTopColor","fallback","loading","TipContent","valuesDay","element","colorGetter","valueRaw","get","getAttribute","justify","MapImage","svgStatus","wrapperNodeSVG","createRef","isSVGMounted","current","querySelector","getColor","c","setColorBackground","fill","fillColors","requestAnimationFrame","mapElements","entries","setTooltipData","dataFor","setAttribute","saveElementsIndex","Map","Array","prototype","call","querySelectorAll","beforeInjection","afterInjection","error","Error","rebuild","updateColorsIfPossible","afterTipShow","tooltipShow","target","afterTipHide","getTipContent","mapSrc","cancelAnimationFrame","nextProps","nextState","show","src","role","evalScripts","renumerateIRIElements","getContent","afterShow","afterHide","border","formControl","minWidth","selectEmpty","Selector","help","margin","FormControl","required","InputLabel","htmlFor","Select","native","inputProps","FormHelperText","MapSelectorOptions","MapData","MapSelector","MapValueSelectorOptions","MapValueSelector","Edit","onChangeMapKind","onChangeMapValue","mapKind","mapValue","textAlign","onChange","Divider","Element","valueStart","valueEnd","unit","withUnit","ConditionalTooltip","arrow","placement","Legend","alignContent","MapWrapper","faMap","withData","mapData","valors","edit","faEdit","legend","faLegend","DataHandler","getMeta","mapKindDefault","mapValueDefault","paddingTop","flex","Widget","tooltip","legendElement","subtitle1","gridOptions","nameWithValue","List","payload","pl","ChartLegend","payloadModified","line","format","trim","xs","ChartTooltip","asyncComponent","importComponent","module","C","setComponent","imported","DefaultColors","ChartForCached","graph","yAxisLabel","scale","syncId","components","themeUI","ResponsiveContainer","ComposedChart","Line","Area","CartesianGrid","XAxis","YAxis","Tooltip","Brush","right","left","types","area","dataKey","dot","connectNulls","strokeWidth","stroke","angle","offset","interval","dx","dy","content","zoom","ChartCached","asyncModuleComponent","importModule","modules","diesBase","dies","yAxis","parseDateStr","dateStr","sep","split","d","Number","parseDate","year","month","day","dateToString","date","reverse","pad2","num","padStart","getDate","getMonth","getFullYear","join","range","range2","nextDate","next","getTime","setDate","rangeFix","rangeFix2","parsed","parsed2","fixRange","dateStart","dateEnd","result","i","fillDays","daysHash","fromEntries","graphSorted","sort","line1","line2","order","dates","dateIndex","lastOwnDate","prev","x","parseData","indexTranslated","translateIndexDays","ReferenceLine","strokeDasharray","setComponents","comps","filtered","dataTransform","chartsStyles","reformatDate","chartsStylesIEPG","ChartIEPG","references","y","ifOverflow","ChartIEPGPropTypes","arrayOf","oneOfType","number","chartsStylesExtensio","ChartExtensio","ChartExtensioPropTypes","PillsList","Chip","size","PillsForCache","PillsPropTypes","Pills","TableSituacioInternalForCache","elements","TableSituacioInternal","TableSituacioInternalPropTypes","TableSituacio","TableSituacioPropTypes","TableSeguimentInternalForCache","selectedRows","overflowY","headers","body","row","indexRow","TableSeguimentInternal","TableSeguimentInternalGraphPropTypes","TableSeguiment","rowDates","currentDate","selectedRowsCached","setSelectedRowsCached","TableSeguimentPropTypes","header","GraphFromDataset","grafic_risc_iepg","grafic_extensio","situacio","seguiment","MultiChart","ChartComponent","oneOf","maxWidth","withHandler","chartsIndex","chartsDataHandler","TreeView","defaultCollapseIcon","defaultExpandIcon","expanded","selected","onNodeSelect","renderTree","TreeItem","nodeId","isArray","labelFixed","transform","FormDecorators","fixTree","ChartDivisionSelector","ChartDivisionSelectorOptions","ChartPopulationSelector","ChartPopulationSelectorOptions","ChartDatasetSelector","ChartDatasetSelectorOptions","onChangeChartDivision","onChangeChartPopulation","onChangeChartDataset","onChangeChartRegion","chartDivision","chartPopulation","chartDataset","chartRegion","ChartWrapper","faChart","chartData","chartRegionName","setChartData","updateMetadata","onChangeChart","_path","_extends","arguments","source","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgBcn","_ref","svgRef","titleId","viewBox","xmlns","ForwardRef","Icon","BcnLogo","SvgIcon","Tree","RecursiveTreeView","breadcrumb","bcnDataHandler","defaultExpanded","defaultSelected","section","withStyles","onChangeDataset","bcnData","setBcnData","defaultMeta","description","updateData","WidgetsTypes","MapWidget","ChartWidget","BcnWidget","pointerEventsFix","pointerEvents","widgetsContainer","DraggableWidgetContainer","SortableElement","sm","md","lg","DraggableWidgetsList","SortableContainer","items","SortableWidgetContainer","onReorder","axis","helperClass","onSortEnd","oldIndex","newIndex","useDragHandle","Throtle","clear","timeout","func","start","PlayPauseButton","isPlaying","onPlay","onPause","Math","random","useCallback","checked","borderLeftColor","PlayPauseHandler","onNext","timerHolder","startTimer","stopTimer","PlayPause","max","setIsPlaying","valueRef","useRef","popper","ValueLabelComponent","enterTouchDelay","Slider","playPause","restClasses","step","min","sliderRoot","DateSlider","onSetDate","sliderTipFormatter","marks","marksSmall","sliderClasses","showMarkLabels","valueLabelFormat","getAriaValueText","valueLabelDisplay","S4","toString","substring","guidGenerator","WidgetsList","widgetsIds","throtle","updateWidgets","w","run","widgetType","idElement","widgetsNew","splice","widget","daysOld","WidgetsListWithHOCs","withMapsIndex","WidgetsListWithStorageContextProviders","widgetsParsed","JSON","parse","err","stringify","rel","href","filteredLanguages","languages","concat","RadioGroup","ele","FormControlLabel","control","Radio","iconStyles","themes","ModalRouterWithRoutes","routeProps","exact","withErrorCatcher","AppThemeProvider","prefersDarkMode","createTheme","ThemeProvider","CssBaseline","Copyright","Typography","align","Link","appBar","drawer","appBarShift","menuButton","menuButtonHidden","withServiceWorkerUpdater","setOpen","shouldShowUpdateBadge","AppBar","Toolbar","data-testid","Badge","badgeContent","invisible","Container","pt","isLocalhost","window","hostname","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById","URL","response","contentType","status","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration","onServiceWorkerUpdate","hashStr","str","char","charCodeAt","int","hashTmp","FetchCacheElement","fetching","lastModified","invalidated","listeners","onError","listener","cleanFetch","catchFetchErrorsMessage","message","addListener","reject","removeListener","l","abort","processSuccessFetch","getLastModifiedFromResponse","signal","handleFetchErrors","json","catchFetchErrors","finally","checkIfNeedUpdate","method","Common","freeze","ShowErrorDefault","onRetry","errorMessage","errorStack","count","faRefresh","initialState","hasError","info","reloadApp","sendEvent","retry","componentStack","ShowError","stack","alt","WrappedComponent","WrapperComponent","withHandlerGenerator","Handler","setData","ContextCreator","useHandler","Context","withIndex","setIndex","newData","dayValues","withBackendHandlerHOC","relevantParams","getValue","BackendHandler","setValue","setParams","newParams","param","timerDataUpdate","officialUpdateTime","checkUpdate","updateNeeded","updateAll","millis","nextMillis","millisToNextUpdate","recursive","millisTillSchedulle","defaultName","context","useContext","noop","AbortController","ok","statusText","catchFetchErrorsAbortMessage","common","Refactored","Close","Language","Theme","Help","Yes","No","or","chartEdit","Dataset","locale","Counter","About","Licenses","Light","Dark","Chart","add","play","pause","Remove","Type","Values","Division","Population","Extensió","Region","Tracking","Situation","en_en","ca_es","es_es","pl_pl"],"mappings":"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","file":"static/js/main.23a36e33.chunk.js","sourcesContent":["import GHPages from \"../Base/GHPages\";\nimport cache from \"../Base/Cache\";\n\nconst ChartStaticHost =\n  process.env.REACT_APP_CHART_STATIC_HOST ??\n  \"https://emibcn.github.io/covid-data/Charts\";\nconst ChartDataStaticURL = `${ChartStaticHost}/index.json`;\nconst ChartDataBase = `${ChartStaticHost}/chart.json`;\n\n// Handle data backend and cache for Charts\n// This is not a singleton: unique error handlers\nclass ChartDataHandler extends GHPages {\n  // Visible backend name\n  name = \"Charts JSON Files\";\n  indexUrl = ChartDataStaticURL;\n  unsubscribeIndex = () => {};\n\n  /*\n     Processed data from index\n  */\n  divisions = [];\n  populations = [];\n\n  // If index data is not passed, subscribe to index\n  // URL and parse its content once downloaded\n  constructor(index) {\n    super();\n\n    if (index) {\n      this.parseIndex(index);\n    } else {\n      this.unsubscribeIndex = this.indexInternal(this.parseIndex);\n    }\n  }\n\n  /*\n     Return dynamic data (with cache)\n  */\n  indexData = [];\n  indexInternal = (callback) => cache.fetch(ChartDataStaticURL, callback);\n\n  // Return unsubscription callback\n  // If automatic index download was done (in constructor),\n  // unsubscribe also from it\n  index = (callback) => {\n    const unsubscribe = this.indexInternal(callback);\n    return () => {\n      unsubscribe();\n      this.unsubscribeIndex();\n    };\n  };\n\n  parseIndex = (index) => {\n    // Get a unique (`[...new Set( )]`) list of options elements\n    this.divisions = [...new Set(index.map(({ territori }) => territori))];\n    this.populations = [...new Set(index.map(({ poblacio }) => poblacio))];\n\n    // Save/cache index data\n    this.indexData = index;\n\n    // Update active downloads\n    this.invalidateAll();\n  };\n\n  // Active URLs: those which will be invalidated on update\n  active = [];\n\n  getURL = (url) => `${ChartDataBase}${encodeURIComponent(`?${url}`)}`;\n\n  // Invalidate all URLs, except index\n  invalidateAll = async () => {\n    for (const url of this.active) {\n      this.log(`${this.name}: Invalidate '?${url}'`);\n      await cache.invalidate(this.getURL(url));\n    }\n  };\n\n  // Gets the breadcrumb of ancestors and the found node, or empty array (recursive)\n  findBreadcrumb = (node, value, compare = (node, url) => node.url === url) => {\n    if (compare(node, value)) {\n      return [node];\n    } else if (\"children\" in node) {\n      for (const child of node.children) {\n        const found = this.findBreadcrumb(child, value, compare);\n        if (found.length) {\n          return [...found, node];\n        }\n      }\n    }\n    return [];\n  };\n\n  // Find a node in a tree\n  findChild = (node, value, compare) => {\n    const list = this.findBreadcrumb(node, value, compare);\n    if (list.length) {\n      return list[0];\n    }\n  };\n\n  // Find division/population section\n  findInitialNode = (division, population) => {\n    return this.indexData.find(\n      (link) => link.territori === division && link.poblacio === population\n    );\n  };\n\n  find = (division, population, url) => {\n    const initialLink = this.findInitialNode(division, population);\n    return this.findChild(initialLink, url);\n  };\n\n  // Used to fix region when changing main options.\n  // TODO: Find a better way. ID by breadcrumb?\n  findRegion = (division, population, region) => {\n    const initialNode = this.findInitialNode(division, population);\n    const found = this.findChild(initialNode, region);\n\n    if (!found) {\n      // Try to find in the other valid initialNodes (same division)\n      const nodes = this.indexData.filter(\n        (node) => division === node.territori && population !== node.poblacio\n      );\n      for (const node of nodes) {\n        // Look for region in the other initialNode\n        const f1 = this.findChild(node, region);\n        // If found, find in our initialNode for a region with the same name\n        const f2 =\n          f1 &&\n          this.findChild(\n            initialNode,\n            f1.name,\n            (node, name) => node.name === name\n          );\n        // If found, use it\n        if (f2) {\n          return f2;\n        }\n      }\n\n      // Not found in valid initialNodes: default to actual initialNode's root\n      return initialNode;\n    }\n\n    // Found!\n    return found;\n  };\n\n  // Fetch JSON data and subscribe to updates\n  data = (division, population, url, callback) => {\n    const initialLink = this.findInitialNode(division, population);\n\n    // If found (why should it not?)\n    if (initialLink) {\n      // Find region name in link and children, recursively\n      const found = this.findChild(initialLink, url);\n\n      // TODO: We should do something else on error\n      if (!found) {\n        console.warn(\n          `Could not find data in index: ${division}/${population}/${url}`,\n          { initialLink, index: this.indexData }\n        );\n        callback(false);\n        return () => {};\n      }\n\n      // Add URL to active ones. Will be invalidated on update\n      if (!this.active.includes(found.url)) {\n        this.active.push(found.url);\n      }\n\n      // Get URL content (download or cached)\n      return cache.fetch(this.getURL(found.url), callback);\n    }\n\n    console.warn(\n      `Could not find initial node in index: ${division}/${population}/${url}`,\n      { initialLink, index: this.indexData }\n    );\n    callback(false);\n    return () => {};\n  };\n}\n\nexport default ChartDataHandler;\n","import GHPages from \"../Base/GHPages\";\nimport cache from \"../Base/Cache\";\n\nconst BcnStaticHost =\n  process.env.REACT_APP_BCN_STATIC_HOST ??\n  \"https://emibcn.github.io/covid-data/Bcn\";\nconst BcnDataStaticURL = `${BcnStaticHost}/index.json`;\n\n// Handle data backend and cache for BCN\nclass BcnDataHandler extends GHPages {\n  // Visible backend name\n  name = \"Barcelona JSON Files\";\n  indexUrl = BcnDataStaticURL;\n  unsubscribeIndex = () => {};\n\n  // If index data is not passed, subscribe to index\n  // URL and parse its content once downloaded\n  constructor(index) {\n    super();\n\n    if (index) {\n      this.parseIndex(index);\n    } else {\n      this.unsubscribeIndex = this.indexInternal(this.parseIndex);\n    }\n  }\n\n  /*\n     Return dynamic data (with cache)\n  */\n  indexData = [];\n  indexInternal = (callback) => cache.fetch(BcnDataStaticURL, callback);\n\n  // Return unsubscription callback\n  // Return unsubscription from possible automatic download\n  index = (callback) => {\n    const unsubscribe = this.indexInternal(callback);\n    return () => {\n      unsubscribe();\n      this.unsubscribeIndex();\n    };\n  };\n\n  parseIndex = (index) => {\n    // Save/cache index data\n    this.indexData = index;\n\n    // Update active downloads\n    this.invalidateAll();\n  };\n\n  // Active URLs: those which will be invalidated on update\n  active = [];\n\n  // Invalidate all URLs, except index\n  invalidateAll = async () => {\n    for (const url of this.active) {\n      if (process.env.NODE_ENV === \"development\") {\n        console.log(`${this.name}: Invalidate '?${url}'`);\n      }\n\n      await cache.invalidate(`${BcnStaticHost}/${url}`);\n    }\n  };\n\n  // Gets the breadcrumb of ancestors and the found node, or empty array (recursive)\n  findBreadcrumb = (\n    node,\n    value,\n    compare = ({ code }, value) => code === value\n  ) => {\n    if (node === null) {\n      node = { sections: this.indexData };\n    }\n    if (compare(node, value)) {\n      return [node];\n    } else if (\"sections\" in node) {\n      for (const child of node.sections) {\n        const found = this.findBreadcrumb(child, value, compare);\n        if (found.length) {\n          return [...found, node];\n        }\n      }\n    }\n    return [];\n  };\n\n  // Find a node in a tree\n  findChild = (node, value, compare) => {\n    const list = this.findBreadcrumb(node, value, compare);\n    if (list.length) {\n      return list[0];\n    }\n  };\n\n  // Find division/population section\n  findInitialNode = (dataset) => {\n    return this.indexData.find(({ code }) => code === dataset);\n  };\n\n  // Return filtered index data values\n  filter = (fn) => this.indexData.filter(fn);\n\n  // Active URLs: those which will be invalidated on update\n  active = [];\n\n  // Fetch JSON data and subscribe to updates\n  data = (dataset, callback) => {\n    // Find region name in link and children, recursively\n    const found = this.findChild(null, dataset);\n\n    // TODO: We should do something else on error\n    if (!found) {\n      console.warn(`Could not find data in index: ${dataset}`, {\n        index: this.indexData,\n      });\n      callback(false);\n      return () => {};\n    }\n\n    // Add URL to active ones. Will be invalidated on update\n    if (!this.active.includes(found.values)) {\n      this.active.push(found.values);\n    }\n\n    // Get URL content (download or cached)\n    // Return unsubscription callback\n    return cache.fetch(`${BcnStaticHost}/${found.values}`, callback);\n  };\n}\n\nexport default BcnDataHandler;\n","/*\n   Static maps data (not updated each day)\n\n   Includes data sources, kinds and values lists and metadata\n*/\nconst MapStaticHost =\n  process.env.REACT_APP_MAP_STATIC_HOST ??\n  'https://emibcn.github.io/covid-data/Maps'\n\nconst days = `${MapStaticHost}/days.json`\n\nconst MapaComarques = `${MapStaticHost}/Comarca.svg`\nconst MapaMunicipis = `${MapStaticHost}/Municipi.svg`\n\nconst comarcaEdat = `${MapStaticHost}/MapData-Comarca-edat.json`\nconst comarcaPcrpos = `${MapStaticHost}/MapData-Comarca-pcrpos.json`\nconst comarcaRisc = `${MapStaticHost}/MapData-Comarca-risc.json`\nconst comarcaRt = `${MapStaticHost}/MapData-Comarca-rt.json`\nconst comarcaTaxa_conf = `${MapStaticHost}/MapData-Comarca-taxa_conf.json`\nconst comarcaTaxapcr = `${MapStaticHost}/MapData-Comarca-taxapcr.json`\n\nconst municipiEdat = `${MapStaticHost}/MapData-Municipi-edat.json`\nconst municipiPcrpos = `${MapStaticHost}/MapData-Municipi-pcrpos.json`\nconst municipiRisc = `${MapStaticHost}/MapData-Municipi-risc.json`\nconst municipiRt = `${MapStaticHost}/MapData-Municipi-rt.json`\nconst municipiTaxa_conf = `${MapStaticHost}/MapData-Municipi-taxa_conf.json`\nconst municipiTaxapcr = `${MapStaticHost}/MapData-Municipi-taxapcr.json`\n\nconst MapDataStatic = {\n  days,\n  metadata: {\n    risc: {\n      title: 'Risc de rebrot (iEPG) a població general',\n      label: 'Risc de rebrot (iEPG)',\n      name: 'Risc de rebrot (iEPG)',\n      colors: [\n        { color: '#88f', name: 'Risc màxim - 6', value: 1500 },\n        { color: '#00f', name: 'Risc màxim - 5', value: 1200 },\n        { color: '#00c', name: 'Risc màxim - 4', value: 900 },\n        { color: '#008', name: 'Risc màxim - 3', value: 600 },\n        { color: '#004', name: 'Risc màxim - 2', value: 400 },\n        { color: '#400', name: 'Risc màxim', value: 210 },\n        { color: '#800', name: 'Risc extrem', value: 190 },\n        { color: '#c00', name: 'Risc altíssim', value: 160 },\n        { color: '#f00', name: 'Risc molt alt', value: 130 },\n        { color: '#f40', name: 'Risc alt', value: 100 },\n        { color: '#f80', name: 'Risc mitjà-alt', value: 70 },\n        { color: '#fc0', name: 'Risc mitjà', value: 50 },\n        { color: '#ff0', name: 'Risc mitjà-baix', value: 30 },\n        { color: '#cf0', name: 'Risc baix', value: 15 },\n        { color: '#8f4', name: 'Risc molt baix', value: 5 },\n        { color: '#4f8', name: 'Risc no nul', value: 1 },\n        { color: '#0fc', name: 'Risc mínim', value: 0 }\n      ]\n    },\n    taxa_conf: {\n      title: 'Taxa setmanal de casos confirmats PCR a tota la població',\n      label: 'Taxa confirmats per PCR',\n      name: 'Taxa setmanal de casos confirmats PCR',\n      colors: [\n        { color: '#a00', name: '>=300', value: 300 },\n        { color: '#d00', name: '>=200 i <300', value: 200 },\n        { color: '#f00', name: '>=100 i <200', value: 100 },\n        { color: '#f80', name: '>=75 i <100', value: 75 },\n        { color: '#fa0', name: '>=50 i <75', value: 50 },\n        { color: '#fc0', name: '>=25 i <50', value: 25 },\n        { color: '#0b0', name: '>=15 i <25', value: 15 },\n        { color: '#090', name: '<15', value: 0 }\n      ]\n    },\n    rt: {\n      title: 'Velocitat de propagació (Rt) a població general',\n      label: 'Rt',\n      name: 'Velocitat de propagació (Rt)',\n      colors: [\n        { color: '#f00', name: '>=2', value: 2 },\n        { color: '#f70', name: '>=1.5 i <2', value: 1.5 },\n        { color: '#fa0', name: '>=1.2 i <1.5', value: 1.2 },\n        { color: '#fc0', name: '>1 i <1.2', value: 1.00001 },\n        { color: '#0a0', name: '<=1', value: 0 }\n      ]\n    },\n    edat: {\n      title: \"Mitjana d'edat dels casos confirmats per PCR a tota la població\",\n      label: 'Mitjana edat',\n      name: \"Mitjana d'edat dels casos confirmats per PCR\",\n      colors: [\n        { color: '#08519c', name: '>=60', value: 60 },\n        { color: '#3182bd', name: '>=50 i <60', value: 50 },\n        { color: '#6baed6', name: '>=40 i <50', value: 40 },\n        { color: '#9ecae1', name: '>=30 i <40', value: 30 },\n        { color: '#c6dbef', name: '>=20 i <30', value: 20 },\n        { color: '#eff3ff', name: '< 20', value: 0 }\n      ]\n    },\n    pcrpos: {\n      title: 'Percentatge de PCR positives a tota la població',\n      label: '% PCR +',\n      name: 'Percentatge de PCR positives',\n      colors: [\n        { color: '#a50026', name: '>=40%', value: 40 },\n        { color: '#d73027', name: '>=30% i <40%', value: 30 },\n        { color: '#f46d43', name: '>=20% i <30%', value: 20 },\n        { color: '#fdae61', name: '>=15% i <20%', value: 15 },\n        { color: '#fee08b', name: '>=10% i <15%', value: 10 },\n        { color: '#ffffbf', name: '>=8% i <10%', value: 8 },\n        { color: '#66bd63', name: '>=5% i <8%', value: 5 },\n        { color: '#1a9850', name: '>=3% i <5%', value: 3 },\n        { color: '#006837', name: '<3%', value: 0 }\n      ]\n    },\n    taxapcr: {\n      title: 'Taxa PCR per 100.000 habitants a tota la població',\n      label: 'Taxa PCR',\n      name: 'Taxa PCR per 100.000 habitants',\n      colors: [\n        { color: '#08306b', name: '>=1000', value: 1000 },\n        { color: '#08519c', name: '>=800 i <1000', value: 800 },\n        { color: '#2171b5', name: '>=600 i <800', value: 600 },\n        { color: '#4292c6', name: '>=500 i <600', value: 500 },\n        { color: '#6baed6', name: '>=400 i <500', value: 400 },\n        { color: '#9ecae1', name: '>=300 i <400', value: 300 },\n        { color: '#c6dbef', name: '>=200 i <300', value: 200 },\n        { color: '#deebf7', name: '>=100 i <200', value: 100 },\n        { color: '#f7fbff', name: '<100', value: 0 }\n      ]\n    }\n  },\n  kind: {\n    Comarca: {\n      svg: MapaComarques,\n      values: {\n        risc: comarcaRisc,\n        taxa_conf: comarcaTaxa_conf,\n        rt: comarcaRt,\n        edat: comarcaEdat,\n        pcrpos: comarcaPcrpos,\n        taxapcr: comarcaTaxapcr\n      }\n    },\n    Municipi: {\n      svg: MapaMunicipis,\n      values: {\n        risc: municipiRisc,\n        taxa_conf: municipiTaxa_conf,\n        rt: municipiRt,\n        edat: municipiEdat,\n        pcrpos: municipiPcrpos,\n        taxapcr: municipiTaxapcr\n      }\n    }\n  }\n}\n\nexport default MapDataStatic\n","import GHPages from \"../Base/GHPages\";\nimport cache from \"../Base/Cache\";\n\nimport MapDataStatic from \"./MapDataStatic\";\n\n// Handle data backend and cache for Maps\n// This is not a singleton: unique error handlers\nclass MapDataHandler extends GHPages {\n  // Visible backend name\n  name = \"Maps JSON Files\";\n\n  // Overload \"abstract\" member\n  indexUrl = MapDataStatic.days;\n\n  // Invalidate all URLs, except index\n  invalidateAll = async () => {\n    // Invalidate each map JSON first\n    for (const kind of MapDataHandler.kinds()) {\n      for (const value of MapDataHandler.values(kind)) {\n        this.log(`Invalidate ${kind} - ${value}`);\n        await cache.invalidate(MapDataStatic.kind[kind].values[value]);\n      }\n    }\n  };\n\n  /*\n     Return static data\n  */\n  static kinds = () => Object.keys(MapDataStatic.kind);\n  static values = (kind) => Object.keys(MapDataStatic.kind[kind].values);\n  static svg = (kind) => MapDataStatic.kind[kind].svg;\n\n  static metadata = (values, meta) => MapDataStatic.metadata[values][meta];\n  static metaColors = (values) => MapDataHandler.metadata(values, \"colors\");\n  static metaTitle = (values) => MapDataHandler.metadata(values, \"title\");\n  static metaLabel = (values) => MapDataHandler.metadata(values, \"label\");\n  static metaName = (values) => MapDataHandler.metadata(values, \"name\");\n\n  /*\n     Return dynamic data (with cache)\n  */\n  days = (callback) => cache.fetch(MapDataStatic.days, callback);\n  index = (callback) => this.days(callback);\n  data = (kind, values, callback) =>\n    cache.fetch(MapDataStatic.kind[kind].values[values], callback);\n}\n\nexport default MapDataHandler;\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Link as RouterLink } from 'react-router-dom'\n\nimport { translate } from 'react-translate'\n\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Tooltip from '@material-ui/core/Tooltip'\n/*\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport DashboardIcon from '@material-ui/icons/Dashboard';\nimport PeopleIcon from '@material-ui/icons/People';\nimport BarChartIcon from '@material-ui/icons/BarChart';\nimport LayersIcon from '@material-ui/icons/Layers';\nimport AssignmentIcon from '@material-ui/icons/Assignment';\n*/\nimport ThemeIcon from '@material-ui/icons/Brightness4'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faInfoCircle as faAbout,\n  faLanguage\n} from '@fortawesome/free-solid-svg-icons'\n\nconst ListItemLink = (props) => {\n  const { icon, primary, to } = props\n\n  const renderLink = React.useMemo(\n    () =>\n      React.forwardRef((itemProps, ref) => (\n        <RouterLink to={to} ref={ref} {...itemProps} />\n      )),\n    [to]\n  )\n\n  return (\n    <li>\n      <ListItem button component={renderLink}>\n        {icon ? (\n          <Tooltip title={primary}>\n            <ListItemIcon>{icon}</ListItemIcon>\n          </Tooltip>\n        ) : null}\n        <ListItemText primary={primary} />\n      </ListItem>\n    </li>\n  )\n}\n\nListItemLink.propTypes = {\n  icon: PropTypes.element,\n  primary: PropTypes.string.isRequired,\n  to: PropTypes.string.isRequired\n}\n\nconst MainMenuItems = translate('Menu')((props) => {\n  const { t } = props\n  return (\n    <>\n      {/* <ListItemLink to=\"/\" primary={ \"Dashboard\" } icon={ <DashboardIcon /> } /> */}\n      <ListItemLink\n        to='#about'\n        primary={t('About...')}\n        icon={<FontAwesomeIcon style={{ fontSize: '1.5rem' }} icon={faAbout} />}\n      />\n      <ListItemLink\n        to='#language'\n        primary={t('Language')}\n        icon={\n          <FontAwesomeIcon style={{ fontSize: '1.5rem' }} icon={faLanguage} />\n        }\n      />\n      <ListItemLink\n        to='#theme'\n        primary={t('Theme')}\n        icon={<ThemeIcon style={{ fontSize: '1.5rem' }} />}\n      />\n    </>\n  )\n})\n\nconst SecondaryMenuItems = (props) => {\n  return <>{/* <ListSubheader inset>Saved reports</ListSubheader> */}</>\n}\n\nexport { MainMenuItems, SecondaryMenuItems, ListItemLink }\n","import handler from './handler'\nimport * as context from './context'\n\nexport default handler\nexport { context }\n","import handler from './handler'\nimport * as context from './context'\n\nexport default handler\nexport { context }\n","import React from 'react'\n\nimport BcnProvider from './Bcn/context'\nimport MapsProvider from './Maps/context'\nimport ChartsProvider from './Charts/context'\n\nconst BackendProvider = ({ children, bcn, maps, charts }) => {\n  return (\n    <BcnProvider value={bcn}>\n      <MapsProvider value={maps}>\n        <ChartsProvider value={charts}>{children}</ChartsProvider>\n      </MapsProvider>\n    </BcnProvider>\n  )\n}\n\nexport default BackendProvider\n","import React from 'react'\n\n// From: https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API\n// Side effects: adds an event listener to document on mount and removes it on unmount\n\n// Set the name of the hidden property and the change event for visibility\nconst { hidden, visibilityChange } =\n  typeof document.hidden !== 'undefined' // Opera 12.10 and Firefox 18 and later support\n    ? {\n        hidden: 'hidden',\n        visibilityChange: 'visibilitychange'\n      }\n    : typeof document.msHidden !== 'undefined' // IE/Edge?\n      ? {\n          hidden: 'msHidden',\n          visibilityChange: 'msvisibilitychange'\n        }\n      : typeof document.webkitHidden !== 'undefined' // Webkit\n        ? {\n            hidden: 'webkitHidden',\n            visibilityChange: 'webkitvisibilitychange'\n          }\n        : {}\n\n// Checks if tab is currently visible\nconst checkVisibility = () => !document[hidden]\n\n// HOC adding `visible` prop to Wrapped component (`true` for incompatible browsers)\nconst withDocumentVisibility = (Wrapped) => {\n  // This component will be returned in case of a non-compatible browser\n  function WithoutDocumentVisibility (props) {\n    <Wrapped {...props} visible />\n  }\n\n  // TODO: Backward compatibility using window.blur and window.focus?\n  if (\n    typeof document.addEventListener === 'undefined' ||\n    typeof hidden === 'undefined'\n  ) {\n    console.warn(\n      'This component requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API.'\n    )\n\n    return WithoutDocumentVisibility\n  }\n\n  function WithDocumentVisibility (props) {\n    const [visible, setVisible] = React.useState(checkVisibility())\n\n    React.useEffect(() => {\n      // Handle page visibility change\n      const handleVisibilityChange = () => setVisible(checkVisibility())\n      document.addEventListener(\n        visibilityChange,\n        handleVisibilityChange,\n        false\n      )\n\n      // Remove event listener on unmount\n      return () =>\n        document.removeEventListener(\n          visibilityChange,\n          handleVisibilityChange,\n          false\n        )\n    }, [])\n\n    return <Wrapped {...props} visible={visible} />\n  }\n\n  return WithDocumentVisibility\n}\n\nexport default withDocumentVisibility\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Loading from \"../Loading\";\nimport withDocumentVisibility from \"../withDocumentVisibility\";\n\nimport { withHandler as withMapsDataHandler } from \"../Backend/Maps/context\";\nimport { withHandler as withChartsDataHandler } from \"../Backend/Charts/context\";\nimport { withHandler as withBcnDataHandler } from \"../Backend/Bcn/context\";\n\nimport Provider from \"./Provider\";\n\n// Initially downloads all backends indexes\n// - Shows <Loading/> while data is downloading\n// - Handles data updates:\n//   - Continue using old data while updating: don't show <Loading/> again\n//     TODO: Instead, execute prop callback to let the app know state changes,\n//           so user can be adequatedly notified. Add local callbacks as arguments\n//           to let the app/user cancel or force an update.\n//   - Schedules next update as specified by each backend (as in ./Base/GHPages)\n//     If a schedule has a \"not updated yet\" response, retry\n//     updating after `milllisToNextUpdate` milliseconds (default: 5 minutes)\n//   - If user is inactive (blur on tab or API Visibility hidden),\n//     cancel  schedule (or don't launch at all if initially inactive)\n//   - If user comes back, check if each backend needs an update and\n//     schedule next update for each backend\n// - Handles side effects on unmount:\n//   - Clear schedule timers if they are active\n//   - Unsubscribe to index updates. If listeners go down to 0 and there is an\n//     ongoing download, it is automatically aborted by each backend handler.\nclass IndexesHandler extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // Create initial handled backends array\n    this.backends = [\"maps\", \"charts\", \"bcn\"].map((name) => ({\n      name,\n      initializer: props[`${name}DataHandler`],\n      state: `${name}DataHandler`,\n      unsubscribe: () => {},\n    }));\n\n    // Initialize to null an index state for each backend\n    this.state = this.backends.reduce((acc, { state }) => {\n      acc[state] = null;\n      return acc;\n    }, {});\n  }\n\n  // TODO: Launch new notification\n  //       App can show a notification with a <Loading> until onAfterUpdate\n  //       Any callback would make sense?\n  onBeforeUpdate = (backend) => {\n    console.log(\n      `onBeforeUpdate: Looking for an update of backend ${backend.handler.name}`\n    );\n  };\n\n  // TODO: Launch new notification\n  //       App can stop onBeforeUpdate <Loading /> and resolve to ok/ok depending on `updated`\n  //       A retry callback can be passed to allow forcing another update\n  onAfterUpdate = (backend, updated) => {\n    console.log(\n      `onAfterUpdate: The backend ${backend.handler.name} was${\n        updated ? \"\" : \" not\"\n      } updated`\n    );\n  };\n\n  // Checks if we need to update it and, if so, do it\n  updateIfNeeded = (backend) => {\n    return new Promise((resolve) => {\n      // If it has not yet been downloaded,\n      // we definitively still don't need an update\n      const now = new Date();\n      if (\n        this.state[backend.state] !== null &&\n        !!backend.nextUpdateDate &&\n        now > backend.nextUpdateDate\n      ) {\n        this.onBeforeUpdate(backend);\n        backend.handler.updateIfNeeded((updated) => {\n          this.onAfterUpdate(backend, updated);\n          resolve(backend, updated);\n        });\n      } else {\n        resolve(backend, false);\n      }\n    });\n  };\n\n  // Return a Promise resolved once all backends have updated if needed\n  updateAllIfNeeded = () => Promise.all(this.backends.map(this.updateIfNeeded));\n\n  // Schedules a backend update and saves its\n  // due date into its `this.backends` object\n  // TODO: Launch new notification\n  //       App can show a `Next BD update at` notification\n  //       A `force now` callback can be passed to allow forcing immediate update\n  //       A `cancel` callback can be passed to allow cancelling the scheduled update\n  scheduleNextUpdate = (backend) => {\n    const { milllisToNextUpdate: notUpdatedMillis } = this.props;\n\n    // Mind the timer on unmount\n    // Use the date where needed\n    backend.nextUpdateDate = backend.handler.scheduleNextUpdate({\n      onBeforeUpdate: this.onBeforeUpdate.bind(this, backend),\n      onAfterUpdate: this.onAfterUpdate.bind(this, backend),\n      notUpdatedMillis,\n    });\n  };\n\n  // Fetch data once mounted\n  componentDidMount() {\n    // Get `visible` status before the update: if it changes,\n    // we will subscribe to update schedule in componentDidUpdate\n    const { visible } = this.props;\n\n    this.backends.forEach((backend) => {\n      // Instantiate the handler\n      backend.handler = new backend.initializer();\n\n      // Subscribe to index updates\n      // Save unsubscriber\n      backend.unsubscribe = backend.handler.index((index) => {\n        // Only on first download\n        if (!this.state[backend.state]) {\n          this.onAfterUpdate(backend, true);\n        }\n\n        // Save data into state\n        this.setState({ [backend.state]: index });\n\n        // Once data has been fetched, schedule next data update\n        if (visible) {\n          this.scheduleNextUpdate(backend);\n        }\n      });\n    });\n  }\n\n  // Handle scheduled updates depending if user has the tab active or not\n  componentDidUpdate = async (prevProps, prevState) => {\n    const { visible } = this.props;\n    if (visible !== prevProps.visible) {\n      if (visible) {\n        console.log(\"Update backends if needed\");\n        await this.updateAllIfNeeded();\n\n        console.log(\"Schedule next indexes updates\");\n        this.backends.forEach(this.scheduleNextUpdate);\n      } else {\n        console.log(\"Cancel schedule of next indexes updates\");\n        this.backends.forEach(({ handler }) => handler.cancelUpdateSchedule());\n      }\n    }\n  };\n\n  // Cleanup side effects\n  componentWillUnmount() {\n    // Cancel next update timers and update subscriptions\n    this.backends.forEach((backend) => {\n      if (backend.handler) {\n        backend.handler.cancelUpdateSchedule();\n        backend.unsubscribe();\n      }\n    });\n  }\n\n  render() {\n    // Get an array with all handled indexes values\n    const indexes = this.backends\n      .map(({ state }) => state)\n      .map((state) => this.state[state]);\n    const provided = this.backends.reduce(\n      (acc, { name, handler }) => ({\n        ...acc,\n        [name]: handler,\n      }),\n      {}\n    );\n\n    // Show <Loading/> while some index has not yet been loaded\n    return indexes.some((index) => !index) ? (\n      <Loading />\n    ) : (\n      <Provider {...provided}>{this.props.children}</Provider>\n    );\n  }\n}\n\nIndexesHandler.defaultProps = {\n  // Retry every 5 minuts after each \"not updated yet\" response\n  milllisToNextUpdate: 300_000,\n};\n\nIndexesHandler.propTypes = {\n  // Delay before retrying a schedule after a \"not updated yet\" response\n  milllisToNextUpdate: PropTypes.number,\n};\n\n// withMapsDataHandler: Add `mapsDataHandler` prop to use maps backend data\n// withChartsDataHandler: Add `chartsDataHandler` prop to use charts backend data\n// withBcnDataHandler: Add `bcnDataHandler` prop to use bcn backend data\n// withDocumentVisibility: Add `visible` boolean prop, telling wether the\n//                         current browser tab is active or not\nexport default withMapsDataHandler(\n  withChartsDataHandler(\n    withBcnDataHandler(withDocumentVisibility(IndexesHandler))\n  )\n);\n","import React from \"react\";\nimport { HashRouter as Router } from \"react-router-dom\";\n\nimport Storage from \"react-simple-storage\";\nimport { TranslatorProvider, useTranslate } from \"react-translate\";\nimport { Helmet, HelmetProvider } from \"react-helmet-async\";\nimport available from \"./i18n/available\";\n\nimport ErrorCatcher from \"./ErrorCatcher\";\nimport Dashboard from \"./Dashboard\";\nimport { WidgetsList } from \"./Widget\";\n\nimport { BackendProvider, IndexesHandler } from \"./Backend\";\n\n// App Helmet: Controls HTML <head> elements with SideEffect\n// - Set a default title and title template, translated\nconst AppHelmet = ({ language }) => {\n  const t = useTranslate(\"App\");\n  const title = t(\"Covid Data - Refactored\");\n  return (\n    <Helmet titleTemplate={`%s | ${title}`} defaultTitle={title}>\n      <html lang={language} />\n    </Helmet>\n  );\n};\n\n// Concentrate all providers (4) used in the app into a single component\nconst AppProviders = ({ translations, language, children }) => (\n  <TranslatorProvider translations={translations}>\n    <HelmetProvider>\n      <BackendProvider>\n        <AppHelmet language={language} />\n        <Router>\n          <div className=\"App\" id=\"router-container\">\n            {children}\n          </div>\n        </Router>\n      </BackendProvider>\n    </HelmetProvider>\n  </TranslatorProvider>\n);\n\nconst fixLocationHash = () => {\n  const decoded = decodeURIComponent(global.location.hash);\n  if (decoded !== \"\" && decoded !== global.location.hash) {\n    const hash = decoded.replace(/[^#]*(#.*)$/, \"$1\");\n    global.location.replace(hash);\n  }\n};\n\nconst getDefaultLanguage = (available) => {\n  const languageNav = (global.navigator.language ?? \"\").toLowerCase();\n  return available.find((language) => language.key === languageNav)\n    ? languageNav\n    : \"ca-es\";\n};\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    // Fix bad browser encoding HASH\n    fixLocationHash();\n\n    const language = getDefaultLanguage(available);\n    this.state = {\n      initializing: true, // For Storage\n      language,\n      theme: false, // Use defined by user in browser\n      tutorialSeen: false,\n    };\n  }\n\n  // Called after Storage hydrated the component\n  stopInitializing = () => this.setState({ initializing: false });\n\n  // Handle global configuration options\n  handleLanguageChange = (language) => this.setState({ language });\n  handleThemeChange = (theme) => this.setState({ theme });\n  handleTutorialSeenChange = (tutorialSeen) => this.setState({ tutorialSeen });\n\n  render() {\n    const { language, theme, tutorialSeen } = this.state;\n    const translations = available.find(\n      (_language) => _language.key === language\n    ).value;\n\n    return (\n      <AppProviders\n        {...{\n          translations,\n          language,\n        }}\n      >\n        {/* Persistent state saver into localStorage */}\n        <ErrorCatcher origin=\"Storage\">\n          <Storage\n            parent={this}\n            prefix=\"App\"\n            blacklist={[\"initializing\"]}\n            onParentStateHydrated={this.stopInitializing}\n          />\n        </ErrorCatcher>\n\n        {/* Shows the app, with ErrorBoundaries */}\n        <ErrorCatcher origin=\"Dashboard\">\n          <Dashboard\n            // Use language and handle its change\n            language={language}\n            onLanguageChange={this.handleLanguageChange}\n            // Use theme and handle its change\n            theme={theme}\n            onThemeChange={this.handleThemeChange}\n            // Force tutorial?\n            tutorialSeen={tutorialSeen}\n            onTutorialSeen={this.handleTutorialSeenChange}\n          >\n            <ErrorCatcher origin=\"IndexesHandler\">\n              <IndexesHandler>\n                <ErrorCatcher origin=\"WidgetsList\">\n                  <WidgetsList />\n                </ErrorCatcher>\n              </IndexesHandler>\n            </ErrorCatcher>\n          </Dashboard>\n        </ErrorCatcher>\n      </AppProviders>\n    );\n  }\n}\n\nexport default App;\nexport { fixLocationHash, getDefaultLanguage }; // For tests\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { translate } from 'react-translate'\n\nimport clsx from 'clsx'\n\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\nimport Drawer from '@material-ui/core/Drawer'\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer'\nimport Typography from '@material-ui/core/Typography'\nimport Divider from '@material-ui/core/Divider'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport List from '@material-ui/core/List'\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft'\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Tooltip from '@material-ui/core/Tooltip'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faArrowAltCircleUp as faUpgrade } from '@fortawesome/free-solid-svg-icons'\n\nimport { MainMenuItems, SecondaryMenuItems } from './MenuItems'\n\nconst drawerWidth = 240\n\nconst useStyles = makeStyles((theme) => ({\n  toolbarIcon: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: '0 8px',\n    ...theme.mixins.toolbar\n  },\n  title: {\n    flexGrow: 1\n  },\n  drawerPaper: {\n    position: 'relative',\n    whiteSpace: 'nowrap',\n    width: drawerWidth,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  drawerPaperClose: {\n    overflowX: 'hidden',\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    width: theme.spacing(7),\n    [theme.breakpoints.up('sm')]: {\n      width: theme.spacing(9)\n    }\n  },\n  updateItem: {\n    color: 'green'\n  }\n}))\n\nconst MenuContent = translate('Menu')((props) => {\n  const classes = useStyles()\n  const { t } = props\n  return (\n    <>\n      <div className={classes.toolbarIcon}>\n        <IconButton\n          edge='start'\n          color='inherit'\n          aria-label={t('close menu')}\n          onClick={props.handleDrawerClose}\n        >\n          <MenuIcon />\n        </IconButton>\n        <Typography\n          component='h1'\n          variant='h6'\n          color='inherit'\n          noWrap\n          className={classes.title}\n        >\n          {t('Menu')}\n        </Typography>\n        <IconButton\n          aria-label={t('close menu')}\n          onClick={props.handleDrawerClose}\n        >\n          <ChevronLeftIcon />\n        </IconButton>\n      </div>\n      <Divider />\n      <List>\n        <MainMenuItems />\n      </List>\n      <Divider />\n      <List>\n        <SecondaryMenuItems />\n      </List>\n    </>\n  )\n})\n\n// Renders the menu, responsive\nconst Menu = translate('Menu')((props) => {\n  const classes = useStyles()\n  const {\n    handleDrawerOpen,\n    handleDrawerClose,\n    open,\n    newServiceWorkerDetected,\n    onLoadNewServiceWorkerAccept,\n    t\n  } = props\n  const theme = useTheme()\n  const isBig = useMediaQuery(theme.breakpoints.up('md'))\n  const DrawerComponent = isBig ? Drawer : SwipeableDrawer\n  const iOS = process.browser && /iPad|iPhone|iPod/.test(navigator.userAgent)\n\n  const toggleDrawer = (open) => (event) => {\n    if (open) {\n      handleDrawerOpen()\n    } else {\n      handleDrawerClose()\n    }\n  }\n\n  const handleClickUpdate = (e) => {\n    e.preventDefault()\n    handleDrawerClose()\n    onLoadNewServiceWorkerAccept()\n  }\n\n  return (\n    <DrawerComponent\n      {...(isBig\n        ? {\n            variant: 'permanent'\n          }\n        : {\n            anchor: 'left',\n            onClose: toggleDrawer(false),\n            onOpen: toggleDrawer(true),\n            disableBackdropTransition: !iOS,\n            disableDiscovery: iOS\n          })}\n      classes={{\n        paper: clsx(classes.drawerPaper, !open && classes.drawerPaperClose)\n      }}\n      open={open}\n    >\n      <MenuContent handleDrawerClose={handleDrawerClose} />\n      {newServiceWorkerDetected ? (\n        <ListItem\n          button\n          onClick={handleClickUpdate}\n          className={classes.updateItem}\n        >\n          <Tooltip title={t('Update!')}>\n            <ListItemIcon>\n              <FontAwesomeIcon\n                icon={faUpgrade}\n                style={{ fontSize: '1.5rem', color: 'green' }}\n              />\n            </ListItemIcon>\n          </Tooltip>\n          <ListItemText primary={t('Update!')} />\n        </ListItem>\n      ) : null}\n    </DrawerComponent>\n  )\n})\n\nMenu.propTypes = {\n  handleDrawerOpen: PropTypes.func.isRequired,\n  handleDrawerClose: PropTypes.func.isRequired,\n  open: PropTypes.bool.isRequired,\n  onLoadNewServiceWorkerAccept: PropTypes.func.isRequired,\n  newServiceWorkerDetected: PropTypes.bool.isRequired\n}\n\nexport default Menu\n","import React from \"react\";\nimport { Route, Switch, Redirect } from \"react-router-dom\";\n\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport Button from \"@material-ui/core/Button\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport { useTheme } from \"@material-ui/core/styles\";\n\nimport { translate } from \"react-translate\";\n\nclass CloseModal extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    if (!(\"history\" in props) || props.history.location.hash !== \"\") {\n      global.setTimeout(() => props.history.push(\"#\"), 10);\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n\nclass ModalRouterInner extends React.PureComponent {\n  constructor(props) {\n    super();\n\n    // Set initial state\n    this.history = props.history;\n    this.state = {\n      ...this.getPathState(props.location),\n      autoForce: false,\n      forced: false,\n      mounted: false,\n    };\n  }\n\n  getPathState(location) {\n    const path = location.hash.replace(/[^#]*#(.*)$/, \"$1\");\n    return {\n      modalIsOpen: !!path.length && path !== \"close\",\n      path,\n      initialPath: this.state ? this.state.initialPath : path,\n    };\n  }\n\n  componentDidMount() {\n    // Register history change event listener\n    this.unlisten = this.history.listen(this.handleHistoryChange);\n    this.setState({\n      ...this.getPathState(this.props.location),\n      mounted: true,\n    });\n  }\n\n  componentWillUnmount() {\n    // Unregister history change event listener\n    this.unlisten();\n    if (this.timer) {\n      global.clearTimeout(this.timer);\n    }\n  }\n\n  // Force user to different URLs\n  componentDidUpdate(prevProps, prevState) {\n    // Remember old URL when forcing\n    if (this.props.force !== false && this.state.forced !== this.props.force) {\n      this.setState({ forced: this.props.force });\n    }\n\n    // Clear autoForce after it has been forced\n    if (this.state.autoForce === this.state.path) {\n      this.setState({ autoForce: false });\n    }\n\n    // Force old modal after forcing another (do auto force)\n    if (\n      prevState.path === this.state.forced &&\n      prevState.path !== this.state.path &&\n      this.state.initialPath !== false &&\n      this.state.initialPath.length > 1 &&\n      this.state.autoForce !== this.state.initialPath\n    ) {\n      this.setState({ autoForce: this.state.initialPath });\n    }\n  }\n\n  openModal = () => this.setState({ modalIsOpen: true });\n\n  closeModal = (propsClose = {}) => {\n    if (!(\"history\" in propsClose) || propsClose.history.location.path !== \"\") {\n      if (!this.timer) {\n        this.timer = global.setTimeout(() => {\n          this.history.push(\"#\");\n          this.timer = undefined;\n        }, 10);\n      }\n    }\n  };\n\n  handleHistoryChange = (location, action) => {\n    const state = this.getPathState(location);\n    this.setState(state);\n  };\n\n  render() {\n    const { children, initializing, force, fullScreen, t } = this.props;\n    const { mounted, autoForce, path, forced, modalIsOpen } = this.state;\n\n    if (initializing || !mounted) {\n      return null;\n    }\n\n    // Redirect to forced URL\n    if (force !== false && force !== path && force !== forced) {\n      return <Redirect push to={{ hash: force }} />;\n    }\n\n    // If previously have been forced when showing a modal,\n    // force to go back there once the forced has been visited\n    if (autoForce !== false && autoForce !== path) {\n      return <Redirect push to={{ hash: autoForce }} />;\n    }\n\n    return (\n      <Dialog\n        open={modalIsOpen}\n        onClose={this.closeModal}\n        /* Be fullsreen on `sm` sreens */\n        fullScreen={fullScreen}\n        aria-labelledby={\"modal_heading\"}\n        aria-describedby={\"modal_description\"}\n      >\n        <DialogContent>\n          <Switch location={{ pathname: path }}>\n            {children}\n\n            {/* Close modal if nothing is shown */}\n            <Route render={(props) => <CloseModal {...props} />} />\n          </Switch>\n        </DialogContent>\n        <DialogActions>\n          <Button autoFocus onClick={this.closeModal} color=\"primary\">\n            {t(\"Close\")}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\n// Get fullScreen prop using MediaQuery\nconst withFullScreen = (Component) => {\n  return (props) => {\n    const theme = useTheme();\n    const fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\n    return <Component {...props} fullScreen={fullScreen} />;\n  };\n};\n\nconst ModalRouterInnerWithClasses = withFullScreen(ModalRouterInner);\n\nclass ModalRouter extends React.PureComponent {\n  render() {\n    const { children, ...rest } = this.props;\n    return (\n      <Route\n        path=\":path(.*)\"\n        render={(props) => (\n          <ModalRouterInnerWithClasses {...{ children, ...rest, ...props }} />\n        )}\n      />\n    );\n  }\n}\n\nexport default translate(\"ModalRouter\")(ModalRouter);\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { translate } from 'react-translate'\n\nimport IconButton from '@material-ui/core/IconButton'\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEllipsisV } from '@fortawesome/free-solid-svg-icons'\n\n// Renders an item into the widget's popup actions menu\n// Ensures click event uses widget id\nconst WidgetMenuItem = React.forwardRef((props, ref) => {\n  const { onClick, option, icon, label } = props\n  const handleClick = () => onClick(option)\n  return (\n    <MenuItem key={option} onClick={handleClick} ref={ref}>\n      <ListItemIcon>{icon}</ListItemIcon>\n      <ListItemText primary={label || option} />\n    </MenuItem>\n  )\n})\n\n// Renders the widget's popup actions menu\nconst WidgetMenu = (props) => {\n  const { onClick, options, id, ...restProps } = props\n\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const open = Boolean(anchorEl)\n\n  // Sets the element where the popup menu will open next to\n  const handleClickOpen = (event) => setAnchorEl(event.currentTarget)\n  const handleClose = () => setAnchorEl(null)\n\n  // When an element is clicked, close menu and call parent's onClick\n  const handleClickElement = (value) => {\n    handleClose()\n    onClick(value)\n  }\n\n  // Render the open icon button and, if in open\n  // state, the menu with all elements but `view`\n  return (\n    <>\n      <IconButton\n        aria-label='actions'\n        aria-controls={anchorEl ? `widget-menu-${id}` : undefined}\n        aria-haspopup='true'\n        onClick={handleClickOpen}\n      >\n        <FontAwesomeIcon icon={faEllipsisV} />\n      </IconButton>\n      {anchorEl ? (\n        <Menu\n          id={`widget-menu-${id}`}\n          anchorEl={anchorEl}\n          keepMounted\n          open={open}\n          onClose={handleClose}\n          PaperProps={{\n            style: {\n              width: '20ch'\n            }\n          }}\n        >\n          {Object.keys(options)\n            .filter((option) => option !== 'view')\n            .map((option) => (\n              <WidgetMenuItem\n                key={option}\n                option={option}\n                onClick={handleClickElement}\n                icon={options[option].icon}\n                label={\n                  typeof options[option].label === 'function'\n                    ? options[option].label(restProps)\n                    : options[option].label\n                }\n              />\n            ))}\n        </Menu>\n      ) : null}\n    </>\n  )\n}\n\nWidgetMenu.propTypes = {\n  id: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  // [optionID('view','edit','legend',...)]: {icon: string, label: string/fn }\n  options: PropTypes.object.isRequired\n}\n\nexport default translate('Widget')(WidgetMenu)\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { translate } from \"react-translate\";\n\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport { useTheme } from \"@material-ui/core/styles\";\n\nimport Draggable from \"react-draggable\";\n\nimport WidgetMenu from \"./Menu\";\nimport ErrorCatcher from \"../ErrorCatcher\";\n\nclass DraggableResponsiveDialogUntranslated extends React.PureComponent {\n  /*\n     Handle dialog open/close status\n  */\n  state = {\n    open: false,\n  };\n\n  // Set open status to the selected menu code\n  handleClickOpen = (open) => {\n    this.setState({ open });\n  };\n\n  handleClose = () => {\n    this.setState({ open: false });\n  };\n\n  render() {\n    const { open } = this.state;\n    // Get `restProps` for child renders (including `id`)\n    const { sections, fullScreen, t, ...restProps } = this.props;\n    const { id } = this.props;\n    // Get shortcut to content & title render functions\n    const Content = open ? sections[open].render : () => {};\n    const Title = open ? sections[open].title : () => {};\n    return (\n      <>\n        <WidgetMenu\n          options={sections}\n          onClick={this.handleClickOpen}\n          {...restProps}\n        />\n        {/* If open is not null, render the related dialog (opened) */}\n        {open ? (\n          <Dialog\n            key={open}\n            open={true}\n            onClose={this.handleClose}\n            /* Allow dragging the dialog on non-small screens */\n            {...(fullScreen ? {} : { TransitionComponent: Draggable })}\n            /* Be fullsreen on `sm` sreens */\n            fullScreen={fullScreen}\n            aria-labelledby={`draggable-dialog-title-${id}-${open}`}\n          >\n            <DialogTitle\n              style={{ cursor: \"move\" }}\n              id={`draggable-dialog-title-${id}-${open}`}\n            >\n              <Title {...restProps} t={t} />\n            </DialogTitle>\n            <DialogContent>\n              <ErrorCatcher\n                reloadOnRetry={false}\n                origin={`${t(\"Widget\")} ${open} ${Title({ ...restProps, t })}`}\n              >\n                <Content {...restProps} t={t} />\n              </ErrorCatcher>\n            </DialogContent>\n            <DialogActions>\n              <Button autoFocus onClick={this.handleClose} color=\"primary\">\n                {t(\"Close\")}\n              </Button>\n            </DialogActions>\n          </Dialog>\n        ) : null}\n      </>\n    );\n  }\n}\n\nconst DraggableResponsiveDialog = translate(\"Widget\")(\n  DraggableResponsiveDialogUntranslated\n);\n\nDraggableResponsiveDialog.propTypes = {\n  id: PropTypes.string.isRequired,\n  // [sectionID('view','edit','legend',...)]: {icon: string, label: string/fn }\n  sections: PropTypes.object.isRequired,\n};\n\n// Get fullScreen prop using MediaQuery\nconst withFullScreen = (Component) => {\n  return (props) => {\n    const theme = useTheme();\n    const fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\n    return <Component {...props} fullScreen={fullScreen} />;\n  };\n};\n\nexport default withFullScreen(DraggableResponsiveDialog);\n","import React from 'react'\n\nimport { translate } from 'react-translate'\n\nimport { SortableHandle } from 'react-sortable-hoc'\n\nimport { makeStyles } from '@material-ui/core/styles'\nimport Card from '@material-ui/core/Card'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport CardContent from '@material-ui/core/CardContent'\nimport DragIndicatorIcon from '@material-ui/icons/DragIndicator'\n\nimport Button from '@material-ui/core/Button'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTrash } from '@fortawesome/free-solid-svg-icons'\n\nimport WidgetActions from './Actions'\nimport ErrorCatcher from '../ErrorCatcher'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100%'\n  },\n  draggableWidgetTitle: {\n    color: 'rgba(0, 0, 0, 0.54)',\n    verticalAlign: 'middle',\n    paddingRight: '.1em',\n    '&:hover': {\n      cursor: 'move'\n    }\n  }\n}))\n\n// HOC to create widgets easily\nconst withWidget = (sectionsOrig) => {\n  // Add always available `Remove` action\n  const sections = {\n    ...sectionsOrig,\n    remove: {\n      icon: <FontAwesomeIcon icon={faTrash} />,\n      label: ({ t }) => t('Remove'),\n      title: ({ t }) => t('Remove?'),\n      render: ({ id, onRemove, t }) => {\n        const handleRemove = () => onRemove(id)\n        return (\n          <Button\n            startIcon={<FontAwesomeIcon icon={faTrash} />}\n            onClick={handleRemove}\n            variant='contained'\n            color='primary'\n            aria-label={t('remove')}\n          >\n            {t('Confirm removal')}\n          </Button>\n        )\n      }\n    }\n  }\n\n  // Get a shortcut to view's render function and\n  // wrap that with an error catcher\n  const ViewUnhandled = sections.view.render\n  const View = (props) => (\n    <ErrorCatcher\n      reloadOnRetry={false}\n      origin={`${props.t('View Widget')} ${\n        sections.view.title(props) || props.name\n      }`}\n    >\n      <ViewUnhandled {...props} />\n    </ErrorCatcher>\n  )\n\n  // Used to sort the widget\n  const DragHandle = SortableHandle((props) => {\n    const { children } = props\n    const classes = useStyles()\n\n    return <span className={classes.draggableWidgetTitle}>{children}</span>\n  })\n\n  // Use an Icon to handle dragging\n  const DragHandleWithIndicatorIcon = () => (\n    <DragHandle>\n      <DragIndicatorIcon />\n    </DragHandle>\n  )\n\n  // Get a shortcut to title's render function and\n  // wrap that with an error catcher\n  const TitleUnhandled = sections.view.title\n  const Title = (props) => (\n    <ErrorCatcher\n      reloadOnRetry={false}\n      origin={`${props.t('Title Widget')} ${props.name}`}\n    >\n      <TitleUnhandled {...props} />\n    </ErrorCatcher>\n  )\n\n  // Renders the view with a header containing the title and the menu with the rest of sections\n  const Widget = (props) => {\n    const classes = useStyles()\n    // Prevent trigger actions components update when changing the day\n    const { indexValues, ...restProps } = props\n    const action = <WidgetActions {...restProps} sections={sections} />\n    const title = (\n      <>\n        <DragHandleWithIndicatorIcon />\n        <Title {...props} />\n      </>\n    )\n    return (\n      <Card className={classes.root}>\n        <CardHeader action={action} title={title} subheader={props.subtitle} />\n        <CardContent>\n          <View {...props} />\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return translate('Widget')(Widget)\n}\n\nexport default withWidget\n","import React from 'react'\n\nconst WidgetStorageContext = React.createContext(() => {})\n\nexport default WidgetStorageContext\n","import React from \"react\";\n\nimport WidgetStorageContext from \"./StorageContext\";\n\n/*\n   Proxies data from this context into Component props\n*/\nconst withStorageHandler = (Component, defaults) => {\n  class WithStorageHandler extends React.Component {\n    storageHandler = (data) => {\n      const { forwardedRef, ...props } = this.props;\n      const { onChangeData = () => {}, ...restData } = data;\n      const allData = Object.assign({}, defaults, restData, props);\n\n      return (\n        <Component\n          ref={forwardedRef}\n          /* Save and get data to/from specific id */\n          onChangeData={onChangeData}\n          {...allData}\n        />\n      );\n    };\n\n    render() {\n      return (\n        <WidgetStorageContext.Consumer>\n          {this.storageHandler}\n        </WidgetStorageContext.Consumer>\n      );\n    }\n  }\n\n  // Return wrapper respecting ref\n  const forwarded = React.forwardRef((props, ref) => (\n    <WithStorageHandler {...props} forwardedRef={ref} />\n  ));\n\n  forwarded.propTypes = Component.propTypes;\n  forwarded.defaultProps = Component.defaultProps;\n\n  return forwarded;\n};\n\nexport default withStorageHandler;\n","import React from \"react\";\n\nimport Storage from \"react-simple-storage\";\n\nimport Loading from \"../../Loading\";\nimport WidgetStorageContext from \"./StorageContext\";\n\n/*\n   Context provider using localStorage as data source for Widgets params\n*/\nclass LocalStorageProvider extends React.Component {\n  state = {\n    initializing: true,\n    data: {},\n  };\n\n  onChangeData = (data) => {\n    this.setState({ data });\n  };\n\n  stopInitializing = () => {\n    this.setState({ initializing: false });\n  };\n\n  render() {\n    const { children, ...props } = this.props;\n    const { initializing, data } = this.state;\n\n    return (\n      <>\n        {/* Persistent state saver into localStorage, only on window close */}\n        <Storage\n          parent={this}\n          prefix=\"LocalStorageProvider\"\n          blacklist={[\"initializing\"]}\n          onParentStateHydrated={this.stopInitializing}\n        />\n\n        {initializing ? (\n          <Loading />\n        ) : (\n          <WidgetStorageContext.Provider\n            value={{\n              onChangeData: this.onChangeData,\n              ...props,\n              data,\n            }}\n          >\n            {children}\n          </WidgetStorageContext.Provider>\n        )}\n      </>\n    );\n  }\n}\n\nLocalStorageProvider.propTypes = {};\n\nexport default LocalStorageProvider;\n","import React from \"react\";\nimport { PropTypes } from \"prop-types\";\nimport { Route, Switch } from \"react-router-dom\";\n\nimport WidgetStorageContext from \"./StorageContext\";\nimport withStorageHandler from \"./withStorageHandler\";\n\n/*\n   Context provider using React Route as data source for Widgets params\n*/\nclass RouterProvider extends React.Component {\n  // History change listener\n  unlisten = () => {};\n\n  constructor(props) {\n    super(props);\n    this.history = props.history;\n  }\n\n  historyPush = (data, replace = false) => {\n    const newPath = this.props.paramsToString(data);\n\n    // Only PUSH or REPLACE if something have to change\n    if (this.history.location.pathname !== newPath) {\n      if (!replace) {\n        this.history.push(newPath + this.history.location.hash);\n      } else {\n        this.history.replace(newPath + this.history.location.hash);\n      }\n    }\n  };\n\n  handleHistoryChange = (location, action) => {\n    // Do nothing when change is made by us\n    if (action !== \"POP\") {\n      return;\n    }\n  };\n\n  componentDidMount = () => {\n    // Register history change event listener\n    this.unlisten = this.history.listen(this.handleHistoryChange);\n    // Check if data from localStorage is better\n    if (\n      !this.props.params.widgets.length &&\n      this.props.data.widgets &&\n      this.props.data.widgets.length\n    ) {\n      this.historyPush(this.props.data, true);\n    }\n  };\n\n  componentWillUnmount = () => {\n    // Unregister history change event listener\n    this.unlisten();\n  };\n\n  // Save data into location\n  onChangeData = (data) => {\n    this.historyPush({ ...data }, true);\n    this.props.onChangeData({ ...data });\n  };\n\n  // Render the provider and the children\n  render() {\n    const {\n      children,\n      data,\n      params,\n      paramsFilter,\n      paramsToString,\n      history,\n      onChangeData,\n      ...props\n    } = this.props;\n\n    return (\n      <WidgetStorageContext.Provider\n        value={{\n          onChangeData: this.onChangeData,\n          ...props,\n          ...data,\n          ...params,\n        }}\n      >\n        {children}\n      </WidgetStorageContext.Provider>\n    );\n  }\n}\n\nRouterProvider.propTypes = {\n  // Receive data and onChangeData from localStorage\n  data: PropTypes.object.isRequired,\n  onChangeData: PropTypes.func.isRequired,\n  // Receive params and history from browser location/Router\n  params: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n};\n\n// Proxy Route data into child props provider\nconst RouterProviderWithSwitch = (props) => {\n  const { pathFilter, paramsFilter, paramsToString, ...restProps } = props;\n  return (\n    <Switch>\n      <Route\n        path={pathFilter}\n        render={(propsRoute) => {\n          const {\n            match: { params },\n            history,\n          } = propsRoute;\n          const processedParams = paramsFilter(params);\n          return (\n            <RouterProvider\n              {...{ paramsFilter, paramsToString, history }}\n              {...restProps}\n              params={processedParams}\n            />\n          );\n        }}\n      />\n    </Switch>\n  );\n};\n\nRouterProviderWithSwitch.propTypes = {\n  // How to handle hash storage\n  pathFilter: PropTypes.string.isRequired,\n  paramsFilter: PropTypes.func.isRequired,\n  paramsToString: PropTypes.func.isRequired,\n};\n\n// Consume localStorage storage provider\nconst RouterProviderWithSwitchWithStorageHandler = withStorageHandler(\n  RouterProviderWithSwitch,\n  { data: { widgets: { type: \"map\" } } } // TODO: default\n);\n\nexport default RouterProviderWithSwitchWithStorageHandler;\n","import React from 'react'\nimport { PropTypes } from 'prop-types'\n\nimport LocalStorageProvider from './StorageContextProviderLocalStorage'\nimport RouterProviderWithSwitch from './StorageContextProviderRouter'\n\n// Combine both providers\nconst ContextProvider = (props) => {\n  const { children, pathFilter, paramsFilter, paramsToString } = props\n  return (\n    <LocalStorageProvider>\n      <RouterProviderWithSwitch\n        {...{ pathFilter, paramsFilter, paramsToString }}\n      >\n        {children}\n      </RouterProviderWithSwitch>\n    </LocalStorageProvider>\n  )\n}\n\nContextProvider.propTypes = {\n  // How to handle URL hash storage\n  pathFilter: PropTypes.string.isRequired,\n  paramsFilter: PropTypes.func.isRequired,\n  paramsToString: PropTypes.func.isRequired\n}\n\nexport default ContextProvider\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport clsx from 'clsx'\n\nimport { makeStyles } from '@material-ui/core/styles'\nimport Paper from '@material-ui/core/Paper'\n\n// UI Material styles/classes\nconst useStyles = makeStyles((theme) => ({\n  appBarSpacer: theme.mixins.toolbar,\n  paper: {\n    padding: theme.spacing(2),\n    display: 'flex',\n    overflow: 'auto',\n    flexDirection: 'column'\n  },\n  fixed: {\n    position: 'sticky',\n    top: 0,\n    zIndex: 1200,\n    padding: 0,\n    // Not using it, adds a scrolling slider to the container on some screens\n    paddingBottom: 1\n  },\n  sliderContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(0.5),\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    // Marks labels not shown under 'md'\n    [theme.breakpoints.up('md')]: {\n      marginBottom: theme.spacing(1),\n      alignItems: 'flex-start'\n    },\n    // This is for non-mouse pointers, which need some extra space for usability\n    // Not using it, adds a scrolling slider to the container on some screens\n    // eslint-disable-next-line no-useless-computed-key\n    ['@media (pointer: coarse)']: {\n      [theme.breakpoints.up('md')]: {\n        marginTop: theme.spacing(0.5),\n        paddingBottom: theme.spacing(1)\n      },\n      [theme.breakpoints.down('sm')]: {\n        paddingBottom: theme.spacing(0.1)\n      }\n    }\n  }\n}))\n\nconst ListHeader = ({ children }) => {\n  const classes = useStyles()\n  const fixedPaper = clsx(classes.paper, classes.fixed)\n\n  return (\n    <Paper className={fixedPaper} elevation={2}>\n      {/* Space used by the App Bar fixed positioned */}\n      <div className={classes.appBarSpacer} />\n      {/*\n      <Container maxWidth=\"lg\" className={classes.container}>\n        <h3>HELLO WORLD!</h3>\n      </Container>\n      */}\n\n      <div className={classes.sliderContainer}>{children}</div>\n    </Paper>\n  )\n}\n\nListHeader.propTypes = {\n  children: PropTypes.arrayOf(PropTypes.element)\n}\n\nexport default ListHeader\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { translate } from 'react-translate'\n\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\n\nimport Fab from '@material-ui/core/Fab'\nimport AddIcon from '@material-ui/icons/Add'\n\n// Renders an item into the widget's popup actions menu\n// Ensures click event uses widget id\nconst WidgetMenuItem = React.forwardRef((props, ref) => {\n  const { onClick, option, icon, label } = props\n  const handleClick = () => onClick(option)\n  return (\n    <MenuItem key={option} onClick={handleClick} ref={ref}>\n      <ListItemIcon>{icon}</ListItemIcon>\n      <ListItemText primary={label || option} />\n    </MenuItem>\n  )\n})\n\nconst MenuAddWidget = React.memo((props) => {\n  const { t, onAdd, options } = props\n\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const open = Boolean(anchorEl)\n\n  // Sets the element where the popup menu will open next to\n  const handleClickOpen = (event) => setAnchorEl(event.currentTarget)\n  const handleClose = () => setAnchorEl(null)\n\n  // When an element is clicked, close menu and call parent's onClick\n  const handleClickElement = (value) => {\n    handleClose()\n    onAdd(value)\n  }\n\n  return (\n    <>\n      <Tooltip title={t('Add a graph')} aria-label={t('add')}>\n        <Fab\n          color='primary'\n          aria-label={t('add')}\n          onClick={handleClickOpen}\n          aria-haspopup='true'\n        >\n          <AddIcon />\n        </Fab>\n      </Tooltip>\n      {anchorEl ? (\n        <Menu\n          id='widget-add-menu'\n          anchorEl={anchorEl}\n          keepMounted\n          open={open}\n          onClose={handleClose}\n          transformOrigin={{\n            vertical: 'center',\n            horizontal: 'right'\n          }}\n          PaperProps={{\n            style: {\n              width: '30ch'\n            }\n          }}\n        >\n          {options.map((option) => (\n            <WidgetMenuItem\n              key={option.key}\n              option={option.key}\n              onClick={handleClickElement}\n              icon={option.icon}\n              label={t(option.name)}\n            />\n          ))}\n        </Menu>\n      ) : null}\n    </>\n  )\n})\n\nMenuAddWidget.propTypes = {\n  onAdd: PropTypes.func.isRequired,\n  options: PropTypes.arrayOf(\n    PropTypes.shape({\n      icon: PropTypes.element.isRequired,\n      name: PropTypes.string.isRequired\n    })\n  ).isRequired\n}\n\nexport default translate('MenuAddWidget')(MenuAddWidget)\n","/*\n   Renders a sqared box:\n   - bgColor: props.color\n   - width x height: theme.spacing(2x2)\n   - border: {...theme.shape, \"1px solid theme.palete.text.hint\" }\n   - marginRight: theme.spacing(1)\n*/\nimport { styled } from '@material-ui/core/styles'\nimport BoxMaterial from '@material-ui/core/Box'\n\nconst Box = styled(BoxMaterial)(({ theme, color }) => ({\n  width: theme.spacing(2),\n  height: theme.spacing(2),\n  marginRight: theme.spacing(1),\n  ...theme.shape,\n  borderWidth: 1,\n  borderStyle: 'solid',\n  borderColor: theme.palette.text.hint,\n  backgroundColor: color\n}))\n\nexport default Box\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport Grid from '@material-ui/core/Grid'\n\nimport Box from './Box'\n\nconst LegendElement = ({ value, color, ...rest }) => {\n  return (\n    <Grid container direction='row' alignItems='center' wrap='nowrap' {...rest}>\n      <Grid item>\n        <Box color={color} />\n      </Grid>\n      <Grid item>{value}</Grid>\n    </Grid>\n  )\n}\n\nLegendElement.propTypes = {\n  value: PropTypes.string.isRequired,\n  color: PropTypes.string.isRequired\n}\n\nexport default LegendElement\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { styled } from \"@material-ui/core/styles\";\n\nimport { ReactSVG } from \"react-svg\";\nimport ReactTooltip from \"react-tooltip\";\n\nimport Loading from \"../../../Loading\";\nimport LegendElement from \"../Common/LegendElement\";\n\nimport \"./Map.css\";\n\n// Renders ReactTooltip with MaterialUI theme styles\nconst ReactTooltipStyled = styled(ReactTooltip)(({ theme }) => ({\n  backgroundColor: `${theme.palette.background.default} !important`,\n  color: `${theme.palette.text.primary} !important`,\n  opacity: \"1 !important\",\n  borderColor: `${theme.palette.text.hint} !important`,\n  ...theme.shape,\n  fontFamily: theme.typography.fontFamily,\n  fontSize: theme.typography.fontSize,\n  \"&:before\": {\n    borderTopColor: `${theme.palette.text.hint} !important`,\n  },\n  \"&:after\": {\n    borderTopColor: `${theme.palette.background.default} !important`,\n  },\n}));\n\n// Helper functions for ReactTooltip\nconst fallback = () => <span>Error!</span>; /* Should never happen */\nconst loading = () => <Loading />;\n\nconst TipContent = React.memo(\n  ({ id, valuesDay, label, element, colorGetter }) => {\n    const valueRaw = valuesDay.get(id);\n    const color = colorGetter(valueRaw);\n    const value = `${label}: ${valueRaw ?? \"\"}`;\n    const title = element.getAttribute(\"label\");\n    return (\n      <>\n        <h4>{title}</h4>\n        <LegendElement {...{ value, color }} justify=\"center\" />\n      </>\n    );\n  }\n);\n\n/*\n   Renders an SVG map, allowing to change each region background color and tooltip\n   Optimized:\n    - Save index of map elements with their ID as index\n    - Don't update if only `indexValues` has changed, but trigger colors update\n      using indexed DOM elements\n\n   Some of the code here has been inspired in the original from https://dadescovid.org\n*/\nclass MapImage extends React.Component {\n  svg = null;\n  state = {\n    // Used to force update based on side effects\n    svgStatus: null,\n  };\n\n  // Save SVG DOM node reference\n  // This way we can access it's regions to modify them\n  wrapperNodeSVG = React.createRef();\n\n  // Get the SVG node itself\n  isSVGMounted = () => {\n    return (\n      this?.wrapperNodeSVG?.current?.container?.querySelector(`svg`) !== null &&\n      this.svg !== null\n    );\n  };\n\n  // Gets the color for a given value (in func params) in a colors table (in props)\n  getColor = (value) => {\n    const color = this.props.colors.find((c) => value >= c.value);\n    return color ? color.color : \"fff\";\n  };\n\n  // Sets the background color in a SVG region for a given value\n  setColorBackground = (element, value) => {\n    element.style.fill = this.getColor(value);\n  };\n\n  // Sets the background color for all regions in values prop\n  fillColors = (props) => {\n    if (this.timer) {\n      return;\n    }\n\n    this.timer = requestAnimationFrame(() => {\n      const values = props.values[props.indexValues] || {};\n      const { mapElements } = this;\n      for (const [id, value] of values.entries()) {\n        const element = mapElements.get(id);\n        if (element !== undefined) {\n          this.setColorBackground(element, value);\n        }\n      }\n      this.timer = false;\n    }, 0);\n  };\n\n  // Sets data into a map region to be used by the tooltip renderer)\n  setTooltipData = (element) => {\n    const dataFor = `mapa-${this.props.id}`;\n    element.setAttribute(\"data-tip\", element.id);\n    element.setAttribute(\"data-for\", dataFor);\n  };\n\n  // Save an Map of the map elements, indexed by their `id`\n  saveElementsIndex = (svg) => {\n    this.mapElements = new Map(\n      Array.prototype.map.call(\n        this.svg.querySelectorAll(`.map_elem`),\n        (current) => {\n          this.setTooltipData(current);\n          return [current.id, current];\n        }\n      )\n    );\n  };\n\n  // Process data into the SVG DOM node before first injecting it into the DOM tree\n  beforeInjection = (svg) => {\n    this.svg = svg;\n    this.saveElementsIndex();\n    this.setState({ svgStatus: \"beforeInjection\" });\n  };\n\n  // Get SVG DOM node and reset colors from data if needed\n  afterInjection = (error, svg) => {\n    if (error) {\n      throw Error(error);\n    }\n\n    // Call ReactTooltip to rebuild its database with new objects\n    ReactTooltip.rebuild();\n    this.svg = svg;\n    this.fillColors(this.props);\n    this.setState({ svgStatus: \"afterInjection\" });\n  };\n\n  // Update background colors if SVG is mounted\n  updateColorsIfPossible = (props) => {\n    if (this.isSVGMounted()) {\n      this.fillColors(props);\n    }\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.mapSrc !== prevProps.mapSrc) {\n      this.setState({ svgStatus: \"srcChanged\" });\n    }\n  }\n\n  componentDidMount() {\n    this.updateColorsIfPossible(this.props);\n    this.setState({ svgStatus: \"mounted\" });\n  }\n\n  // Help GC about side effects\n  componentWillUnmount() {\n    if (this.timer) {\n      cancelAnimationFrame(this.timer);\n    }\n  }\n\n  // Optimize renders:\n  // - Only render on map/svg changes\n  // - Trigger color update on indexUpdate, but\n  //   avoid render if this is the only change\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.props.indexValues !== nextProps.indexValues) {\n      this.updateColorsIfPossible(nextProps);\n      if (this.state.tooltipShow) {\n        // It's slow, but it's the faster solution found to update tooltip content\n        // without re-drawing full tooltip component (very slow)\n        ReactTooltip.show(this.mapElements.get(this.state.tooltipShow));\n      }\n    }\n    if (\n      this.props.mapSrc !== nextProps.mapSrc ||\n      this.state.svgStatus !== nextState.svgStatus\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  // Renders the tip contents for a region\n  afterTipShow = (event) => this.setState({ tooltipShow: event.target.id });\n  afterTipHide = (event) => this.setState({ tooltipShow: false });\n  getTipContent = (id) => {\n    if (!id) {\n      return \"\";\n    }\n\n    const element = this.mapElements?.get(id) ?? false;\n    if (!element) {\n      return \"\";\n    }\n\n    const { values, indexValues, label } = this.props;\n    const valuesDay = values[indexValues];\n    return (\n      <TipContent\n        {...{\n          id,\n          valuesDay,\n          label,\n          element,\n          colorGetter: this.getColor,\n        }}\n      />\n    );\n  };\n\n  render() {\n    const { mapSrc, title, id } = this.props;\n    return (\n      <>\n        <ReactSVG\n          src={mapSrc}\n          ref={this.wrapperNodeSVG}\n          role=\"img\"\n          aria-label={title}\n          beforeInjection={this.beforeInjection}\n          afterInjection={this.afterInjection}\n          evalScripts=\"never\"\n          fallback={fallback}\n          loading={loading}\n          renumerateIRIElements={false}\n        />\n        <ReactTooltipStyled\n          id={`mapa-${id}`}\n          getContent={this.getTipContent}\n          afterShow={this.afterTipShow}\n          afterHide={this.afterTipHide}\n          border={true}\n        />\n      </>\n    );\n  }\n}\n\nMapImage.defaultProps = {\n  values: [],\n  indexValues: 0,\n  label: \"Index\",\n  title: \"Map\",\n};\n\nMapImage.propTypes = {\n  label: PropTypes.string,\n  mapSrc: PropTypes.string,\n  id: PropTypes.string,\n  // {[\"day\"]: {[\"regionId\"]: \"color\"} }\n  values: PropTypes.arrayOf(PropTypes.shape()).isRequired,\n  colors: PropTypes.arrayOf(\n    PropTypes.shape({\n      value: PropTypes.number.isRequired,\n      color: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n  indexValues: PropTypes.number.isRequired,\n};\n\nexport default MapImage;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { translate } from \"react-translate\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport Divider from \"@material-ui/core/Divider\";\n\nimport MapData from \"../../../Backend/Maps\";\n\n// UI-Material Styles\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}));\n\n// Renders a Select, with options from props\nconst Selector = (props) => {\n  const classes = useStyles();\n  const { label, help, id, options, ...restProps } = props;\n  return (\n    <div\n      style={{\n        margin: \"0 auto\",\n        display: \"block\",\n      }}\n    >\n      <FormControl required className={classes.formControl}>\n        <InputLabel htmlFor={id}>{label}</InputLabel>\n        <Select\n          native\n          {...restProps}\n          aria-describedby={`helper-text-${id}`}\n          inputProps={{\n            name: label,\n            id: id,\n          }}\n        >\n          {options.map(({ value, label }) => (\n            <option key={`v_${value}`} value={value}>\n              {label}\n            </option>\n          ))}\n        </Select>\n        {help ? (\n          <FormHelperText id={`helper-text-${id}`}>{help}</FormHelperText>\n        ) : null}\n      </FormControl>\n    </div>\n  );\n};\n\n// Renders a Select with map kinds options\nconst MapSelectorOptions = MapData.kinds().map((kind) => ({\n  value: kind,\n  label: kind,\n}));\nconst MapSelector = translate(\"Widget/Map/Edit\")((props) => {\n  const { t, ...restProps } = props;\n  return (\n    <Selector\n      options={MapSelectorOptions}\n      label={t(\"Type\")}\n      help={t(\"Select the regions type to show\")}\n      {...restProps}\n    />\n  );\n});\n\n// Renders a Select with map values options\nconst MapValueSelectorOptions = MapData.kinds().reduce((options, kind) => {\n  options[kind] = MapData.values(kind).map((values) => ({\n    value: values,\n    label: MapData.metaName(values),\n  }));\n  return options;\n}, {});\nconst MapValueSelector = translate(\"Widget/Map/Edit\")((props) => {\n  const { kind, t, ...restProps } = props;\n  return (\n    <Selector\n      label={t(\"Values\")}\n      help={t(\"Select the data origin\")}\n      options={MapValueSelectorOptions[kind]}\n      {...restProps}\n    />\n  );\n});\n\n/*\n   Renders the edit form for the Map widget\n*/\nclass Edit extends React.PureComponent {\n  onChangeMapKind = (event) => this.props.onChangeMapKind(event.target.value);\n  onChangeMapValue = (event) => this.props.onChangeMapValue(event.target.value);\n\n  render() {\n    const { mapKind, mapValue } = this.props;\n\n    return (\n      <div style={{ textAlign: \"left\" }}>\n        <MapSelector value={mapKind} onChange={this.onChangeMapKind} />\n        <Divider style={{ margin: \"2em 0\" }} />\n        <MapValueSelector\n          kind={mapKind}\n          value={mapValue}\n          onChange={this.onChangeMapValue}\n        />\n      </div>\n    );\n  }\n}\n\nEdit.propTypes = {\n  mapKind: PropTypes.string.isRequired,\n  mapValue: PropTypes.string.isRequired,\n  onChangeMapKind: PropTypes.func.isRequired,\n  onChangeMapValue: PropTypes.func.isRequired,\n};\n\nexport default Edit;\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport Grid from '@material-ui/core/Grid'\nimport Tooltip from '@material-ui/core/Tooltip'\n\nimport LegendElement from '../Common/LegendElement'\n\n/*\n   Renders the legend of a map\n*/\n\n// Renders an element in the legend list\n// - Draws a sqared box with `color` background\n// - Adds unit to values, if both unit and value are defined\n// - If both `valueStart` and `valueEnd` are defined and greater than 0, as `start - end`\n// - If only `valueEnd`, as `< end`\n// - If only `valueStart`, as `> start`\nconst Element = ({ valueStart, valueEnd, color, unit }) => {\n  const withUnit = (value) =>\n    `${value}${value !== undefined && unit ? unit : ''}`\n  const value =\n    valueStart && valueEnd !== null\n      ? `${withUnit(valueStart)} - ${withUnit(valueEnd)}`\n      : valueEnd !== null\n        ? `< ${withUnit(valueEnd)}`\n        : `> ${withUnit(valueStart)}`\n  return <LegendElement justify='flex-end' {...{ value, color }} />\n}\n\nElement.propTypes = {\n  valueStart: PropTypes.number.isRequired,\n  valueEnd: PropTypes.number,\n  color: PropTypes.string.isRequired,\n  unit: PropTypes.string\n}\n\n// Renders children conditionally wrapped with a tooltip,\n// depending on the existence and length of `title` prop\nconst ConditionalTooltip = ({ title, children, ...rest }) =>\n  title && title.length ? (\n    <Tooltip arrow placement='top' title={title} {...rest}>\n      {children}\n    </Tooltip>\n  ) : (\n    children\n  )\n\nConditionalTooltip.defaultProps = {\n  children: []\n}\n\nConditionalTooltip.propTypes = {\n  title: PropTypes.string.isRequired,\n  children: PropTypes.arrayOf(PropTypes.node)\n}\n\n// Renders a legend using prop `colors` (shaped as defined\n// with propTypes) as data origin for it\nconst Legend = ({ colors }) => (\n  <Grid\n    container\n    direction='column'\n    justify='center'\n    alignItems='flex-start'\n    alignContent='center'\n  >\n    {colors.map((color, index) => (\n      <ConditionalTooltip key={index} title={color.name}>\n        <Grid item>\n          <Element\n            valueStart={color.value}\n            valueEnd={index === 0 ? null : colors[index - 1].value}\n            color={color.color}\n          />\n        </Grid>\n      </ConditionalTooltip>\n    ))}\n  </Grid>\n)\n\nLegend.propTypes = {\n  colors: PropTypes.arrayOf(\n    PropTypes.shape({\n      value: PropTypes.number.isRequired,\n      color: PropTypes.string.isRequired,\n      name: PropTypes.string,\n      unit: PropTypes.string\n    })\n  )\n}\n\nexport default Legend\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faInfoCircle as faLegend,\n  faEdit,\n  faGlobeEurope as faMap,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nimport MapData from \"../../../Backend/Maps\";\nimport { withData } from \"../../../Backend/Maps/context\";\n\nimport MapImage from \"./MapImage\";\nimport Edit from \"./Edit\";\nimport Legend from \"./Legend\";\nimport withWidget from \"../../Widget\";\n\nconst MapWrapper = withWidget({\n  // The normal view\n  view: {\n    icon: <FontAwesomeIcon icon={faMap} />,\n    label: ({ t }) => t(\"View\"),\n    title: (props) => props.name,\n    render: withData(\n      ({ t, mapKind, label, mapData, indexValues, colors, id }) => (\n        <MapImage\n          title={`${t(\"Map\")}: Catalunya: ${t(mapKind)}`}\n          label={label}\n          values={mapData.valors}\n          mapSrc={MapData.svg(mapKind)}\n          indexValues={indexValues}\n          colors={colors}\n          id={id}\n        />\n      )\n    ),\n  },\n  // Edit data\n  edit: {\n    icon: <FontAwesomeIcon icon={faEdit} />,\n    label: ({ t }) => t(\"Edit\"),\n    title: ({ t }) => t(\"Edit map parameters\"),\n    render: (props) => (\n      <Edit\n        mapKind={props.mapKind}\n        mapValue={props.mapValue}\n        onChangeMapKind={props.onChangeMapKind}\n        onChangeMapValue={props.onChangeMapValue}\n      />\n    ),\n  },\n\n  // Show map legend\n  legend: {\n    icon: <FontAwesomeIcon icon={faLegend} />,\n    label: ({ t }) => t(\"Legend\"),\n    title: (props) => props.title,\n    render: (props) => (\n      <Legend colors={props.colors} subtitle={props.days[props.indexValues]} />\n    ),\n  },\n});\n\n/*\n   Combine MapData backend with MapWrapper/MapImage\n*/\nclass DataHandler extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // Default values: first element of each's group\n    // TODO: Get data from storage/router/props\n    const { mapKind, mapValue } = props;\n\n    this.state = {\n      mapKindDefault: mapKind,\n      mapValueDefault: mapValue,\n      ...this.getMeta(mapValue),\n    };\n  }\n\n  // Get metadata from given params\n  getMeta = (mapValue) => ({\n    colors: MapData.metaColors(mapValue),\n    title: MapData.metaTitle(mapValue),\n    label: MapData.metaLabel(mapValue),\n    name: MapData.metaLabel(mapValue),\n  });\n\n  // Update map metadata\n  onChangeMapKind = (mapKind) => {\n    const { mapValue } = this.props;\n    this.props.onChangeData(this.props.id, {\n      mapKind,\n      mapValue,\n    });\n  };\n\n  // Update map metadata\n  onChangeMapValue = (mapValue) => {\n    const { mapKind } = this.props;\n    this.setState({\n      ...this.getMeta(mapValue),\n    });\n    this.props.onChangeData(this.props.id, {\n      mapKind,\n      mapValue,\n    });\n  };\n\n  render() {\n    const { days, indexValues, id, mapKind, mapValue } = this.props;\n    const { mapKindDefault, mapValueDefault, colors, title, label, name } =\n      this.state;\n\n    return (\n      <div\n        style={{\n          minWidth: \"200px\",\n          height: \"100%\",\n          paddingTop: \".3em\",\n          flex: \"1 1 0px\",\n        }}\n      >\n        <MapWrapper\n          id={id}\n          mapKind={mapKind}\n          mapValue={mapValue}\n          mapKindDefault={mapKindDefault}\n          mapValueDefault={mapValueDefault}\n          onChangeMapKind={this.onChangeMapKind}\n          onChangeMapValue={this.onChangeMapValue}\n          onRemove={this.props.onRemove}\n          indexValues={indexValues}\n          days={days}\n          colors={colors}\n          title={title}\n          label={label}\n          name={name}\n        />\n      </div>\n    );\n  }\n}\n\n// Default values: first element of each's group\nconst mapKind = MapData.kinds()[0];\nconst mapValue = MapData.values(mapKind)[0];\n\nDataHandler.defaultProps = {\n  mapKind,\n  mapValue,\n  onChangeData: () => {},\n  onRemove: () => {},\n};\n\nDataHandler.propTypes = {\n  days: PropTypes.arrayOf(PropTypes.string).isRequired,\n  indexValues: PropTypes.number.isRequired,\n  id: PropTypes.string.isRequired,\n  onChangeData: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  mapKind: PropTypes.string.isRequired,\n  mapValue: PropTypes.string.isRequired,\n};\n\nexport default DataHandler;\n","import Widget from './Widget'\n\nexport default Widget\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { makeStyles } from '@material-ui/core/styles'\nimport Grid from '@material-ui/core/Grid'\n\nimport LegendElement from './LegendElement'\n\nconst useStyles = makeStyles((theme) => ({\n  tooltip: {\n    backgroundColor: theme.palette.background.default,\n    borderWidth: 1,\n    borderStyle: 'solid',\n    borderColor: theme.palette.text.hint,\n    ...theme.shape,\n    fontFamily: theme.typography.fontFamily,\n    fontSize: theme.typography.fontSize,\n    padding: theme.spacing(1)\n  },\n  legend: {\n    fontFamily: theme.typography.fontFamily,\n    fontSize: theme.typography.fontSize,\n    padding: 0,\n    marginTop: theme.spacing(1)\n  },\n  legendElement: {\n    paddingRight: theme.spacing(1)\n  },\n  label: {\n    ...theme.typography.subtitle1\n  }\n}))\n\nconst Element = ({ name, value, color, unit, gridOptions }) => {\n  const withUnit = (value) =>\n    `${value ?? ''}${value !== undefined && unit ? unit : ''}`\n  const nameWithValue = `${name}: ${withUnit(value)}`\n  return (\n    <Grid item {...gridOptions}>\n      <LegendElement justify='flex-start' color={color} value={nameWithValue} />\n    </Grid>\n  )\n}\n\nconst ElementpropTypes = {\n  name: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  color: PropTypes.string.isRequired,\n  unit: PropTypes.string,\n  gridOption: PropTypes.object\n}\n\nElement.propTypes = ElementpropTypes\n\nconst List = ({ payload }) => {\n  return (\n    <Grid container direction='column' justify='center' alignItems='flex-start'>\n      {payload.map((pl, index) => (\n        <Element key={index} {...pl} />\n      ))}\n    </Grid>\n  )\n}\n\nList.defaultProps = {\n  payload: []\n}\n\nList.propTypes = {\n  payload: PropTypes.arrayOf(ElementpropTypes)\n}\nconst ChartLegend = (props) => {\n  const { payload, data, indexValues, colors } = props\n  const classes = useStyles()\n  const payloadModified = React.useMemo(\n    () =>\n      (payload || []).map((line, index) => ({\n        ...line,\n        unit: line.format?.replace(/^\\{[^}]*\\}/, '').trim() /* \"{,.2f}€\" */,\n        color: line.color ?? colors[index],\n        value:\n          data[indexValues] !== undefined\n            ? data[indexValues][`v${index}`]\n            : undefined\n      })),\n    [payload, data, indexValues, colors]\n  )\n\n  /*\n    - Center the elements list in a 11xs container with a 1xs free left\n      space and 1xs on each element' right padding (at legend center and right)\n    - Show 2 elements per column, or only 1 if there is only one element in the list\n  */\n  return (\n    <Grid container direction='column' alignItems='flex-end'>\n      <Grid\n        item\n        xs={11}\n        container\n        direction='row'\n        justify='flex-start'\n        alignItems='center'\n        className={classes.legend}\n      >\n        {payloadModified.map((pl, index) => (\n          <Element\n            key={index}\n            gridOptions={{\n              xs: payloadModified.length > 1 ? 6 : 12,\n              className: classes.legendElement\n            }}\n            {...pl}\n          />\n        ))}\n      </Grid>\n    </Grid>\n  )\n}\n\nChartLegend.defaultProps = {\n  label: '',\n  payload: [],\n  data: []\n}\n\nChartLegend.propTypes = {\n  label: PropTypes.string.isRequired,\n  payload: PropTypes.array.isRequired,\n  indexValues: PropTypes.number.isRequired,\n  colors: PropTypes.array.isRequired,\n  data: PropTypes.array.isRequired\n}\n\nconst ChartTooltip = ({ active, payload, label }) => {\n  const classes = useStyles()\n  return active ? (\n    <div className={classes.tooltip}>\n      <p className={classes.label}>{label}</p>\n      <List payload={payload} />\n    </div>\n  ) : null\n}\n\nChartTooltip.defaultProps = {\n  label: '',\n  payload: []\n}\n\nChartTooltip.propTypes = {\n  active: PropTypes.bool,\n  label: PropTypes.string.isRequired,\n  payload: PropTypes.arrayOf(\n    PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      value: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n        .isRequired,\n      color: PropTypes.string.isRequired,\n      unit: PropTypes.string\n    })\n  ).isRequired\n}\n\nexport default ChartTooltip\nexport { ChartLegend }\n","import React from 'react'\n\nimport Loading from './Loading'\n\n// From https://gist.github.com/aadii104/0ed32d46b70ed2f4037dbbbbc1477edc\nconst asyncComponent = (importComponent, module = 'default') =>\n  function AsyncComponent (props) {\n    // Will save the component into a state\n    const [C, setComponent] = React.useState(false)\n\n    // Call module import (async), wait for\n    // results and set component state\n    //\n    // useEffect' Callback must not be async, so create an internal\n    // anonymous and async function and call it immediatelly\n    React.useEffect(() => {\n      (async () => {\n        const imported = await importComponent()\n        const component = imported[module]\n\n        setComponent({ component })\n        // No return, no unsubscribe\n      })()\n      // Only call it once\n    }, [])\n\n    // Returns the needed component markup\n    // Can be a single child component or null or false\n    return C ? <C {...props} /> : <Loading />\n  }\n\nconst asyncModuleComponent = (importModule, modules, Wrapped) =>\n  function AsyncModuleComponent (props) {\n    // Will save components into a state\n    const [components, setComponents] = React.useState(false)\n\n    // Call module import (async), wait for\n    // results and set components state\n    //\n    // useEffect' Callback must not be async, so create an internal\n    // anonymous and async function and call it immediatelly\n    React.useEffect(() => {\n      (async () => {\n        // Import all components\n        const comps = await importModule()\n        // Create a new object only with the modules\n        // defined in HOC argument `modules`\n        const filtered = Object.fromEntries(\n          Object.entries(comps).filter(([module]) => modules.includes(module))\n        )\n        setComponents(filtered)\n        // No return, no unsubscribe\n      })()\n      // Only call it once\n    }, [])\n\n    // Once loaded, pass components to wrapped as a prop\n    return !components ? (\n      <Loading />\n    ) : (\n      <Wrapped {...props} {...{ components }} />\n    )\n  }\n\nexport default asyncComponent\nexport { asyncModuleComponent }\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { useTheme } from '@material-ui/core/styles'\n\nimport ChartTooltip, { ChartLegend } from './ChartTooltip'\n\n// Import charting systems dynamically\nimport { asyncModuleComponent } from '../../../asyncComponent'\n\nconst DefaultColors = [\n  '#3366CC',\n  '#DC3912',\n  '#FF9900',\n  '#109618',\n  '#990099',\n  '#3B3EAC',\n  '#0099C6',\n  '#DD4477',\n  '#66AA00',\n  '#B82E2E',\n  '#316395',\n  '#994499',\n  '#22AA99',\n  '#AAAA11',\n  '#6633CC',\n  '#E67300',\n  '#8B0707',\n  '#329262',\n  '#5574A6',\n  '#3B3EAC'\n]\n\nconst MAX_LINES_PER_CHART = 8\n\n// Parses graph data:\n// - Mixes graph dates range with global dates array\n// - Fills data graph with each line previous date data\nconst parseData = (graph, dies) => {\n  // Date helpers\n  const parseDateStr = (dateStr, sep = '/') =>\n    dateStr.split(sep).map((d) => Number(d))\n  const parseDate = ([year, month, day]) => new Date(year, month - 1, day)\n\n  // Transforms a date to a string\n  // - sep: Separator\n  // - reverse: if true, day at begining and year at end\n  const dateToString = (date, sep = '/', reverse = false) => {\n    const pad2 = (num) => `${num}`.padStart(2, '0')\n    const params = [\n      pad2(date.getDate()),\n      pad2(date.getMonth() + 1),\n      date.getFullYear()\n    ]\n\n    return (reverse ? params.reverse() : params).join(sep)\n  }\n\n  // Generates an array of Date, containing both ranges,\n  // with formats \"17/10/2020\" and \"2020-10-17\", respectively\n  const fillDays = (range, range2) => {\n    // Generates a range (array with starting and ending\n    // dates) containing both ranges\n    const fixRange = (rangeFix, rangeFix2) => {\n      const parsed = rangeFix.map((date) => parseDate(parseDateStr(date, '-'))) // 17/10/2020\n      const parsed2 = rangeFix2.map((date) =>\n        parseDate(parseDateStr(date).reverse())\n      ) // 2020-10-17\n      return [\n        parsed[0] < parsed2[0] ? parsed[0] : parsed2[0],\n        parsed[1] > parsed2[1] ? parsed[1] : parsed2[1]\n      ]\n    }\n\n    // Returns a Date the day after the Date passed as argument\n    const nextDate = (date) => {\n      const next = new Date(date.getTime())\n      next.setDate(next.getDate() + 1)\n      return next\n    }\n\n    // Get combined range\n    const [dateStart, dateEnd] = fixRange(range, range2)\n\n    // Generate the Array of dates\n    const result = []\n    for (let i = dateStart; i <= dateEnd; i = nextDate(i)) {\n      result.push(i)\n    }\n\n    return result\n  }\n\n  // Generate a dates array, ranged from first start until the last end\n  const days = fillDays(graph[0].range, [dies[0], dies[dies.length - 1]])\n  // Create a hash like: { dateAsStr => { date: dateObject }}\n  const daysHash = Object.fromEntries(\n    days.map((date, index) => [dateToString(date, '-', true), { date, index }])\n  )\n\n  // Allow sorting lines/areas from data\n  const graphSorted = [...graph]\n    .sort((line1, line2) =>\n      line1.order !== undefined ? line1.order - line2.order : 0\n    )\n    // Maximum number of lines per chart\n    .filter((line, index) => index < MAX_LINES_PER_CHART)\n\n  // Fill days hash with graph data\n  graphSorted.forEach((line, index) =>\n    line.dates.forEach(\n      (date, dateIndex) => (daysHash[date][`v${index}`] = line.data[dateIndex])\n    )\n  )\n\n  const lastOwnDate = parseDate(parseDateStr(graph[0].range[1], '-'))\n\n  return {\n    // Fill empty days with data from the previous one (fill the gaps)\n    data: days.reduce((result, date, index) => {\n      const prev = index > 0 ? result[index - 1] : {}\n      result.push({\n        ...(lastOwnDate >= date ? prev : {}),\n        ...daysHash[dateToString(date, '-', true)],\n        x: dateToString(date)\n      })\n      return result\n    }, []),\n    dies: days.map((day) => dateToString(day)),\n    daysHash,\n    graphSorted\n  }\n}\n\n// Translates global selected day to current chart days range index\nconst translateIndexDays = (diesBase, daysHash, indexValues) => {\n  const dayCode = diesBase[indexValues].split('/').reverse().join('-')\n  return daysHash[dayCode].index\n}\n\n// Memoized chart: show static data (independent from selected day)\nfunction ChartForCached (props) {\n  const {\n    data,\n    graph,\n    colors,\n    yAxisLabel,\n    scale,\n    children,\n    syncId,\n    components\n  } = props\n  const themeUI = useTheme()\n  const {\n    ResponsiveContainer,\n    ComposedChart,\n    Line,\n    Area,\n    CartesianGrid,\n    XAxis,\n    YAxis,\n    Tooltip,\n    Brush\n  } = components\n  return (\n    <ResponsiveContainer width='100%' height={250}>\n      <ComposedChart\n        data={data}\n        margin={{ right: 10, left: 0 }}\n        syncId={syncId}\n      >\n        {/* Extra rechart children can be passed as children to this */}\n        {children}\n\n        {graph // Don't save sorting in original array!\n          .map((line, index) => {\n            const types = { line: Line, area: Area }\n            const { type, name, width, color, format } = line\n            const Component =\n              type && Object.keys(types).includes(type) ? types[type] : Line\n            return (\n              <Component\n                key={index}\n                type='monotone'\n                dataKey={`v${index}`}\n                dot={null}\n                connectNulls\n                name={name}\n                strokeWidth={width ?? 2}\n                stroke={color ?? colors[index]}\n                fill={color ?? colors[index]}\n                unit={format?.replace(/^\\{[^}]*\\}/, '').trim() /* \"{,.2f}€\" */}\n              />\n            )\n          })}\n\n        <CartesianGrid stroke={themeUI.palette.text.hint} />\n        <YAxis\n          scale={scale}\n          stroke={themeUI.palette.text.hint}\n          label={{\n            fill: themeUI.palette.text.primary,\n            value: yAxisLabel,\n            angle: -90,\n            offset: 20,\n            position: 'insideBottomLeft'\n          }}\n        />\n        <XAxis\n          dataKey='x'\n          interval='preserveStartEnd'\n          stroke={themeUI.palette.text.hint}\n          angle={-30}\n          dx={-5}\n          dy={15}\n          height={55}\n        />\n        <Tooltip content={<ChartTooltip />} />\n        {graph.zoom ? <Brush dataKey='x' height={30} stroke='#8884d8' /> : null}\n      </ComposedChart>\n    </ResponsiveContainer>\n  )\n}\n\nconst ChartCachedPropTypes = {\n  data: PropTypes.arrayOf(\n    PropTypes.shape({\n      name: PropTypes.string,\n      value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    })\n  ).isRequired,\n  graph: PropTypes.arrayOf(\n    PropTypes.shape({\n      type: PropTypes.string,\n      name: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n      width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n      color: PropTypes.string,\n      format: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    })\n  ).isRequired,\n  colors: PropTypes.arrayOf(PropTypes.string).isRequired,\n  yAxisLabel: PropTypes.string.isRequired,\n  scale: PropTypes.string.isRequired,\n  children: PropTypes.arrayOf(PropTypes.node),\n  syncId: PropTypes.string,\n  components: PropTypes.shape({\n    ResponsiveContainer: PropTypes.elementType,\n    ComposedChart: PropTypes.elementType,\n    Line: PropTypes.elementType,\n    Area: PropTypes.elementType,\n    CartesianGrid: PropTypes.elementType,\n    XAxis: PropTypes.elementType,\n    YAxis: PropTypes.elementType,\n    Tooltip: PropTypes.elementType,\n    Brush: PropTypes.elementType\n  }).isRequired\n}\nconst ChartCached = React.memo(ChartForCached)\nChartForCached.propTypes = ChartCachedPropTypes\nChartForCached.defaultProps = {\n  children: [],\n  syncId: null\n}\n\n// Optimized chart:\n// - Memoizes the static data\n// - Memoizes the real chart with all the static data\n// - Renders an extra chart to render time dependent value (reference line for selected date)\nfunction Chart (props) {\n  const {\n    data: graph,\n    dies: diesBase,\n    indexValues,\n    yAxis,\n    children,\n    syncId\n  } = props\n  const themeUI = useTheme()\n  const { data, dies, daysHash, graphSorted } = React.useMemo(\n    () => parseData(graph, diesBase),\n    [graph, diesBase]\n  )\n  const indexTranslated = translateIndexDays(diesBase, daysHash, indexValues)\n\n  const colors = props.theme?.colors || DefaultColors\n  const yAxisLabel = yAxis?.label || ''\n  const scale = yAxis?.scale\n    ? yAxis.scale === 'squarified'\n        ? 'pow'\n        : yAxis.scale\n    : 'linear'\n\n  const { ResponsiveContainer, ComposedChart, ReferenceLine, XAxis, YAxis } =\n    props.components\n\n  return (\n    <div style={{ position: 'relative' }}>\n      {/* Draw a dedicated graph for the reference line, which changes with the selected day */}\n      <div style={{ position: 'absolute', width: '100%' }}>\n        <ResponsiveContainer width='100%' height={250}>\n          <ComposedChart data={data} margin={{ right: 10, left: 0 }}>\n            <ReferenceLine\n              x={dies[indexTranslated]}\n              stroke={themeUI.palette.text.hint}\n              strokeDasharray='3 3'\n            />\n            {/* Draw transparent axises to get the size */}\n            <YAxis\n              stroke='#ffffff00'\n              scale={scale}\n              label={{\n                value: yAxisLabel,\n                angle: -90,\n                offset: 20,\n                position: 'insideBottomLeft'\n              }}\n            />\n            <XAxis\n              stroke='#ffffff00'\n              dataKey='x'\n              interval='preserveStartEnd'\n              angle={-30}\n              dx={-5}\n              dy={15}\n              height={55}\n            />\n          </ComposedChart>\n        </ResponsiveContainer>\n      </div>\n\n      {/* Memoized component, independent of the selected day */}\n      <ChartCached\n        data={data}\n        graph={graphSorted}\n        colors={colors}\n        yAxisLabel={yAxisLabel}\n        scale={scale}\n        syncId={syncId}\n        components={props.components}\n      >\n        {children}\n      </ChartCached>\n\n      {/* Use outer legend to lower chart updates */}\n      <ChartLegend\n        data={data}\n        colors={colors}\n        indexValues={indexTranslated}\n        payload={graphSorted}\n      />\n    </div>\n  )\n}\n\nexport default asyncModuleComponent(\n  () => import('recharts'),\n  [\n    'ResponsiveContainer',\n    'ComposedChart',\n    'Line',\n    'Area',\n    'ReferenceLine',\n    'CartesianGrid',\n    'XAxis',\n    'YAxis',\n    'Tooltip',\n    'Brush'\n  ],\n  Chart\n)\n","const dataTransform = (dies, graph, chartsStyles = []) => {\n  const reformatDate = (date) => date.split('/').reverse().join('-')\n  const range = [dies[0], dies[dies.length - 1]].map(reformatDate)\n  const dates = dies.map(reformatDate)\n\n  return graph.data.map(({ data, label }, index) => ({\n    data,\n    name: label,\n    range,\n    dates,\n    ...(chartsStyles[index] ?? {})\n  }))\n}\n\nexport default dataTransform\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport Chart from '../../Common/Chart'\nimport dataTransform from './dataTransform'\n\n// Import charting systems dynamically\nimport asyncComponent from '../../../../asyncComponent'\nconst ReferenceLine = asyncComponent(() => import('recharts'), 'ReferenceLine')\n\n// Adapt data shape to the expected by `Common/Chart`\nconst chartsStylesIEPG = [{ type: 'line', color: '#000000', width: 3 }]\n\nfunction ChartIEPG ({ graph, dies, indexValues }) {\n  const { data, references } = React.useMemo(\n    () => ({\n      data: dataTransform(dies, graph, chartsStylesIEPG),\n      references: [\n        { y: 30, color: '#0f0' },\n        { y: 70, color: '#ff0' },\n        { y: 100, color: '#f00' }\n      ].map(({ y, color }) => (\n        <ReferenceLine\n          key={`y_${y}`}\n          y={y}\n          stroke={color}\n          strokeDasharray='3 3'\n          ifOverflow='extendDomain'\n        />\n      ))\n    }),\n    [graph, dies]\n  )\n\n  return (\n    <Chart syncId='charts' dies={dies} indexValues={indexValues} data={data}>\n      {references}\n    </Chart>\n  )\n}\n\nconst ChartIEPGPropTypes = {\n  graph: PropTypes.shape({\n    data: PropTypes.arrayOf(\n      PropTypes.shape({\n        data: PropTypes.arrayOf(\n          PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n        ),\n        label: PropTypes.string\n      })\n    ).isRequired\n  }),\n  dies: PropTypes.arrayOf(PropTypes.string),\n  indexValues: PropTypes.number\n}\nChartIEPG.propTypes = ChartIEPGPropTypes\nChartIEPG.defaultProps = {\n  graph: { data: [] },\n  dies: [],\n  indexValues: 0\n}\n\nexport default ChartIEPG\nexport { ChartIEPGPropTypes }\n","import React from 'react'\n\nimport Chart from '../../Common/Chart'\nimport dataTransform from './dataTransform'\nimport { ChartIEPGPropTypes } from './ChartIEPG'\n\nconst chartsStylesExtensio = [\n  { type: 'area', order: 1, color: '#648ac8', width: 1 },\n  { type: 'area', order: 0, color: '#cacaca', width: 1 },\n  { type: 'line', order: 2, color: '#969696', width: 1 }\n]\n\nfunction ChartExtensio ({ graph, dies, indexValues }) {\n  const data = React.useMemo(\n    () => dataTransform(dies, graph, chartsStylesExtensio),\n    [graph, dies]\n  )\n\n  return (\n    <Chart syncId='charts' dies={dies} indexValues={indexValues} data={data} />\n  )\n}\n\nconst ChartExtensioPropTypes = ChartIEPGPropTypes\nChartExtensio.propTypes = ChartExtensioPropTypes\nChartExtensio.defaultProps = {\n  graph: { data: [] },\n  dies: [],\n  indexValues: 0\n}\n\nexport default ChartExtensio\nexport { ChartExtensioPropTypes }\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport Grid from '@material-ui/core/Grid'\nimport Chip from '@material-ui/core/Chip'\n\nfunction PillsList ({ list }) {\n  return list.map(({ key, name }) => (\n    <Grid key={key} item>\n      <Chip color='primary' size='small' label={name} />\n    </Grid>\n  ))\n}\n\nPillsList.propTypes = {\n  list: PropTypes.arrayOf(\n    PropTypes.shape({\n      key: PropTypes.string,\n      name: PropTypes.string\n    })\n  )\n}\n\nfunction PillsForCache ({ dies, ...props }) {\n  const dateStr = dies[dies.length - 1]\n  const list = [['dies', dateStr], ...Object.entries(props)].map(\n    ([key, name]) => ({ key, name })\n  )\n  return (\n    <Grid\n      container\n      direction='row'\n      alignItems='center'\n      justifyContent='center'\n      spacing={1}\n      style={{ position: 'relative', top: '-2em' }}\n    >\n      <PillsList list={list} />\n    </Grid>\n  )\n}\nconst PillsPropTypes = {\n  population: PropTypes.string,\n  region: PropTypes.string,\n  dies: PropTypes.arrayOf(PropTypes.string)\n}\nPillsForCache.propTypes = PillsPropTypes\nPillsForCache.defaultProps = {\n  population: '',\n  region: '',\n  dies: []\n}\nconst Pills = React.memo(PillsForCache)\n\nexport default Pills\nexport { PillsPropTypes }\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport Grid from '@material-ui/core/Grid'\nimport Pills, { PillsPropTypes } from './Pills'\n\nfunction TableSituacioInternalForCache ({ elements }) {\n  return (\n    <Grid container direction='row' alignItems='center'>\n      {elements.map(({ name, value }) => (\n        <Grid\n          key={name.replace(/[^a-zA-Z0-9]/gm, '_')}\n          item\n          container\n          direction='column'\n          alignItems='center'\n        >\n          <Grid item>\n            <strong>{name}</strong>\n          </Grid>\n          <Grid item>{value}</Grid>\n        </Grid>\n      ))}\n    </Grid>\n  )\n}\nconst TableSituacioInternal = React.memo(TableSituacioInternalForCache)\n\nconst TableSituacioInternalPropTypes = {\n  elements: PropTypes.arrayOf(\n    PropTypes.shape({\n      name: PropTypes.string,\n      value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    })\n  ).isRequired\n}\nTableSituacioInternalForCache.propTypes = TableSituacioInternalPropTypes\n\nfunction TableSituacio ({ graph: { elements }, population, region, dies }) {\n  return (\n    <>\n      <Pills population={population} region={region} dies={dies} />\n      <TableSituacioInternal elements={elements} />\n    </>\n  )\n}\n\nconst TableSituacioPropTypes = {\n  graph: PropTypes.shape(TableSituacioInternalPropTypes),\n  ...PillsPropTypes\n}\nTableSituacio.propTypes = TableSituacioPropTypes\nTableSituacio.defaultProps = {\n  graph: { elements: [] }\n}\n\nexport default TableSituacio\nexport { TableSituacioPropTypes }\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport Pills, { PillsPropTypes } from './Pills'\n\n// TODO: Abstract it?\n// Copied from Widgets/Common/Chart\nconst parseDateStr = (dateStr, sep = '/') =>\n  dateStr.split(sep).map((d) => Number(d))\nconst parseDate = ([day, month, year]) => new Date(year, month - 1, day)\n\nfunction TableSeguimentInternalForCache ({ graph, selectedRows }) {\n  return (\n    <div style={{ overflowY: 'auto' }}>\n      <table>\n        <thead>\n          <tr>\n            {graph.headers.map(({ content, title }) => (\n              <th\n                key={(typeof content !== 'undefined'\n                  ? content\n                  : 'undef'\n                ).replace(/[^a-zA-Z0-9]/gm, '_')}\n                title={title}\n              >\n                {content}\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {graph.body.map((row, index) => (\n            <tr\n              key={index}\n              style={selectedRows[index] ? { backgroundColor: '#eee' } : {}}\n            >\n              {row.map(({ content }, indexRow) => (\n                <td key={indexRow} style={{ textAlign: 'right' }}>\n                  {content}\n                </td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  )\n}\nconst TableSeguimentInternal = React.memo(TableSeguimentInternalForCache)\n\nconst TableSeguimentInternalGraphPropTypes = PropTypes.shape({\n  headers: PropTypes.arrayOf(\n    PropTypes.shape({\n      content: PropTypes.string,\n      title: PropTypes.string\n    })\n  ).isRequired,\n  // [row].[cell].content\n  body: PropTypes.arrayOf(\n    PropTypes.arrayOf(\n      PropTypes.shape({\n        content: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n      })\n    )\n  ).isRequired\n})\nconst TableSeguimentInternalPropTypes = {\n  graph: TableSeguimentInternalGraphPropTypes.isRequired,\n  selectedRows: PropTypes.arrayOf(PropTypes.bool).isRequired\n}\nTableSeguimentInternalForCache.propTypes = TableSeguimentInternalPropTypes\n\nfunction TableSeguiment ({ graph, population, region, dies, indexValues }) {\n  // Generate an array containing rows date ranges (as Date)\n  const rowDates = React.useMemo(\n    () =>\n      graph.body.map((row) =>\n        row[0].content\n          .split(' - ')\n          .map((dateStr) => parseDate(parseDateStr(dateStr)))\n      ),\n    [graph]\n  )\n\n  // Find which rows are selected by currently selected day\n  const dateStr = dies[indexValues]\n  const currentDate = parseDate(parseDateStr(dateStr))\n  const selectedRows = rowDates.map(\n    (row, index) =>\n      currentDate >= rowDates[index][0] && currentDate <= rowDates[index][1]\n  )\n\n  // Performance: use useState to cache the selected rows array reference\n  const [selectedRowsCached, setSelectedRowsCached] = React.useState(\n    rowDates.map(() => false)\n  )\n  if (\n    selectedRows.length !== selectedRowsCached.length ||\n    selectedRows.some((row, index) => row !== selectedRowsCached[index])\n  ) {\n    setSelectedRowsCached(selectedRows)\n  }\n\n  // For Pills\n  return (\n    <>\n      <Pills population={population} region={region} dies={dies} />\n      <TableSeguimentInternal graph={graph} selectedRows={selectedRowsCached} />\n    </>\n  )\n}\n\nconst TableSeguimentPropTypes = {\n  graph: TableSeguimentInternalGraphPropTypes,\n  ...PillsPropTypes\n}\nTableSeguiment.propTypes = TableSeguimentPropTypes\nTableSeguiment.defaultProps = {\n  graph: { header: [], body: [] }\n}\n\nexport default TableSeguiment\nexport { TableSeguimentPropTypes }\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport ChartIEPG, { ChartIEPGPropTypes } from './ChartIEPG'\nimport ChartExtensio, { ChartExtensioPropTypes } from './ChartExtensio'\nimport TableSituacio, { TableSituacioPropTypes } from './TableSituacio'\nimport TableSeguiment, { TableSeguimentPropTypes } from './TableSeguiment'\n\nconst GraphFromDataset = {\n  grafic_risc_iepg: {\n    component: ChartIEPG,\n    types: ChartIEPGPropTypes\n  },\n  grafic_extensio: {\n    component: ChartExtensio,\n    types: ChartExtensioPropTypes\n  },\n  situacio: {\n    component: TableSituacio,\n    types: TableSituacioPropTypes\n  },\n  seguiment: {\n    component: TableSeguiment,\n    types: TableSeguimentPropTypes\n  }\n}\n\nfunction MultiChart ({ dataset, valors, ...restProps }) {\n  const ChartComponent = GraphFromDataset[dataset].component\n  return <ChartComponent graph={valors[dataset]} {...restProps} />\n}\n\nconst MultiChartPropTypes = {\n  dataset: PropTypes.oneOf(Object.keys(GraphFromDataset)).isRequired,\n  valors: PropTypes.shape(\n    Object.entries(GraphFromDataset).reduce(\n      (acc, [key, { types }]) => ({\n        ...acc,\n        [key]: PropTypes.shape(types)\n      }),\n      {}\n    )\n  )\n}\nMultiChart.propTypes = MultiChartPropTypes\n\nMultiChart.defaultProps = {\n  valors: []\n}\n\nexport default MultiChart\nexport { MultiChartPropTypes }\n","import MultiChart, { MultiChartPropTypes } from './MultiChart'\n\nexport default MultiChart\nexport { MultiChartPropTypes }\n","import React from 'react'\n\nimport { makeStyles } from '@material-ui/core/styles'\nimport TreeView from '@material-ui/lab/TreeView'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight'\nimport TreeItem from '@material-ui/lab/TreeItem'\n\nimport { withHandler } from '../../../Backend/Charts/context'\n\n// From: https://material-ui.com/components/tree-view/#rich-object\n\nconst useStyles = makeStyles({\n  root: {\n    height: 110,\n    flexGrow: 1,\n    maxWidth: 400\n  }\n})\n\nconst RecursiveTreeView = (props) => {\n  const classes = useStyles()\n  const {\n    chartsIndex,\n    division,\n    population,\n    value,\n    onChange,\n    chartsDataHandler,\n    ...restProps\n  } = props\n\n  const onNodeSelect = (event, value) => onChange(Number(value))\n\n  const renderTree = ({ url, name, children }) => (\n    <TreeItem key={url} nodeId={`${url}`} label={name}>\n      {Array.isArray(children) ? children.map(renderTree) : null}\n    </TreeItem>\n  )\n\n  const { initialNode, found } = React.useMemo(() => {\n    const initialNode = chartsDataHandler.findInitialNode(division, population)\n    const found = chartsDataHandler\n      .findBreadcrumb(initialNode, value)\n      .map(({ url }) => `${url}`)\n\n    return { initialNode, found }\n  }, [division, population, value, chartsDataHandler])\n\n  return (\n    <TreeView\n      className={classes.root}\n      defaultCollapseIcon={<ExpandMoreIcon />}\n      defaultExpandIcon={<ChevronRightIcon />}\n      expanded={found}\n      selected={`${value}`}\n      onNodeSelect={onNodeSelect}\n      {...restProps}\n    >\n      {renderTree(initialNode)}\n    </TreeView>\n  )\n}\n\nexport default withHandler(RecursiveTreeView)\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { translate } from \"react-translate\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport Divider from \"@material-ui/core/Divider\";\n\nimport ChartRegionSelector from \"./EditRegion\";\n\n// UI-Material Styles\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  labelFixed: {\n    position: \"initial\",\n    transform: \"unset\",\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nconst FormDecorators = (props) => {\n  const classes = useStyles();\n  const { label, help, id, children, fixTree } = props;\n  return (\n    <div\n      style={{\n        margin: \"0 auto\",\n        display: \"block\",\n      }}\n    >\n      <FormControl required className={classes.formControl}>\n        <InputLabel\n          className={fixTree ? classes.labelFixed : null}\n          htmlFor={id}\n        >\n          {label}\n        </InputLabel>\n        {children}\n        {help ? (\n          <FormHelperText id={`helper-text-${id}`}>{help}</FormHelperText>\n        ) : null}\n      </FormControl>\n    </div>\n  );\n};\n\n// Renders a Select, with options from props\nconst Selector = (props) => {\n  const { label, help, id, options, ...restProps } = props;\n  return (\n    <FormDecorators id={id} label={label} help={help}>\n      <Select\n        native\n        {...restProps}\n        aria-describedby={`helper-text-${id}`}\n        inputProps={{\n          name: label,\n          id: id,\n        }}\n      >\n        {options.map(({ value, label }) => (\n          <option key={`v_${value}`} value={value}>\n            {label}\n          </option>\n        ))}\n      </Select>\n    </FormDecorators>\n  );\n};\n\n// Renders a Select with chart division options\nconst ChartDivisionSelector = translate(\"Widget/Chart/Edit\")((props) => {\n  const { t, divisions, ...restProps } = props;\n  const ChartDivisionSelectorOptions = React.useMemo(\n    () => divisions.map((kind) => ({ value: kind, label: kind })),\n    [divisions]\n  );\n  return (\n    <Selector\n      options={ChartDivisionSelectorOptions}\n      label={t(\"Division\")}\n      help={t(\"Select the division type to show\")}\n      {...restProps}\n    />\n  );\n});\n\n// Renders a Select with chart population options\nconst ChartPopulationSelector = translate(\"Widget/Chart/Edit\")((props) => {\n  const { t, populations, ...restProps } = props;\n  const ChartPopulationSelectorOptions = React.useMemo(\n    () => populations.map((kind) => ({ value: kind, label: kind })),\n    [populations]\n  );\n  return (\n    <Selector\n      label={t(\"Population\")}\n      help={t(\"Select the population\")}\n      options={ChartPopulationSelectorOptions}\n      {...restProps}\n    />\n  );\n});\n\n// Renders a Select with chart population options\nconst ChartDatasetSelector = translate(\"Widget/Chart/Edit\")((props) => {\n  const { t, ...restProps } = props;\n  const ChartDatasetSelectorOptions = React.useMemo(\n    () => [\n      { value: \"grafic_extensio\", label: t(\"Extensió\") },\n      { value: \"grafic_risc_iepg\", label: t(\"Risc iEPG\") },\n      { value: \"seguiment\", label: t(\"Tracking\") },\n      { value: \"situacio\", label: t(\"Situation\") },\n    ],\n    [t]\n  );\n  return (\n    <Selector\n      label={t(\"Dataset\")}\n      help={t(\"Select the dataset\")}\n      options={ChartDatasetSelectorOptions}\n      {...restProps}\n    />\n  );\n});\n\n/*\n   Renders the edit form for the Map widget\n*/\nclass Edit extends React.PureComponent {\n  onChangeChartDivision = (event) =>\n    this.props.onChangeChartDivision(event.target.value);\n  onChangeChartPopulation = (event) =>\n    this.props.onChangeChartPopulation(event.target.value);\n  onChangeChartDataset = (event) =>\n    this.props.onChangeChartDataset(event.target.value);\n  onChangeChartRegion = (value) => this.props.onChangeChartRegion(value);\n\n  render() {\n    const {\n      chartDivision,\n      chartPopulation,\n      chartDataset,\n      chartRegion,\n      divisions,\n      populations,\n      chartsIndex,\n      t,\n    } = this.props;\n\n    return (\n      <div style={{ textAlign: \"left\" }}>\n        <ChartDivisionSelector\n          divisions={divisions}\n          value={chartDivision}\n          onChange={this.onChangeChartDivision}\n        />\n        <Divider style={{ margin: \"2em 0\" }} />\n        <ChartPopulationSelector\n          populations={populations}\n          value={chartPopulation}\n          onChange={this.onChangeChartPopulation}\n        />\n        <Divider style={{ margin: \"2em 0\" }} />\n        <ChartDatasetSelector\n          value={chartDataset}\n          onChange={this.onChangeChartDataset}\n        />\n\n        <Divider style={{ margin: \"2em 0\" }} />\n        <FormDecorators id={\"regions-tree\"} label={t(\"Region\")} fixTree>\n          <ChartRegionSelector\n            id={\"regions-tree\"}\n            chartsIndex={chartsIndex}\n            division={chartDivision}\n            population={chartPopulation}\n            value={chartRegion}\n            onChange={this.onChangeChartRegion}\n          />\n        </FormDecorators>\n      </div>\n    );\n  }\n}\n\nEdit.propTypes = {\n  chartDivision: PropTypes.string.isRequired,\n  chartPopulation: PropTypes.string.isRequired,\n  chartDataset: PropTypes.string.isRequired,\n  chartRegion: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    .isRequired,\n  onChangeChartDivision: PropTypes.func.isRequired,\n  onChangeChartPopulation: PropTypes.func.isRequired,\n  onChangeChartDataset: PropTypes.func.isRequired,\n  onChangeChartRegion: PropTypes.func.isRequired,\n};\n\nexport default translate(\"Widget/Chart/Edit\")(Edit);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faEdit,\n  faChartArea as faChart,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nimport { withHandler, withData } from \"../../../Backend/Charts/context\";\n\nimport Chart from \"./MultiChart\";\nimport Edit from \"./Edit\";\nimport withWidget from \"../../Widget\";\n\nconst ChartWrapper = withWidget({\n  // The normal view\n  view: {\n    icon: <FontAwesomeIcon icon={faChart} />,\n    label: ({ t }) => t(\"View\"),\n    title: ({ title }) => title,\n\n    // withData: Uses {chartPopulation, chartDivision, chartRegion} props to handle `chartDataset` download\n    //   and pass it as a prop, showing <Loading/> until it's downloaded\n    render: withData((props) => {\n      const {\n        // Translated\n        days: dies,\n        chartData: valors,\n        chartPopulation: population,\n        chartRegionName: region,\n        chartDataset: dataset,\n        // Used\n        setChartData,\n        indexValues,\n        id,\n      } = props;\n\n      // Once downloaded, set parent's data, so it can properly\n      // set title and other widget components\n      React.useEffect(() => setChartData(valors), [valors, setChartData]);\n\n      return (\n        <Chart\n          {...{\n            id,\n            dies,\n            indexValues,\n            valors,\n            population,\n            region,\n            dataset,\n          }}\n        />\n      );\n    }),\n  },\n\n  // Edit data\n  edit: {\n    icon: <FontAwesomeIcon icon={faEdit} />,\n    label: ({ t }) => t(\"Edit\"),\n    title: ({ t }) => t(\"Edit chart parameters\"),\n    render: Edit,\n  },\n});\n\n/*\n   Combine ChartData backend with Chart\n*/\nclass DataHandler extends React.Component {\n  state = {\n    chartData: false,\n  };\n\n  constructor(props) {\n    super(props);\n\n    // Default values: first element of each's group\n    const { chartDivision, chartPopulation, chartRegion, chartDataset } = props;\n    const { chartData } = this.state;\n\n    // Used to find metadata from selected options\n    // and for the rest of options while editing\n    this.state = {\n      ...this.state,\n      ...this.getMeta(\n        chartDivision,\n        chartPopulation,\n        chartRegion,\n        chartDataset,\n        chartData\n      ),\n    };\n  }\n\n  // Get chartData from child\n  // Using this instead of receiving data via props:\n  //  - Allows showing <Loading/> only on internal view\n  //  - Allows continue editing once a value has changed\n  setChartData = (chartData) => {\n    if (chartData !== this.state.chartData) {\n      this.setState({ chartData });\n    }\n  };\n\n  // Get metadata from given params\n  getMeta = (\n    chartDivision,\n    chartPopulation,\n    chartRegion,\n    chartDataset,\n    chartData\n  ) => {\n    // Get selected node metadata and save to cache\n    const { children, ...node } = this.props.chartsDataHandler.find(\n      chartDivision,\n      chartPopulation,\n      chartRegion\n    );\n\n    if (!chartData) {\n      return {\n        title: \"...\",\n        name: \"...\",\n        node,\n      };\n    }\n\n    const title =\n      chartData[chartDataset]?.title || chartData[chartDataset]?.name;\n    return {\n      title,\n      name: title,\n      node,\n    };\n  };\n\n  // Set map meta data\n  updateMetadata = () => {\n    const { chartDivision, chartPopulation, chartRegion, chartDataset } =\n      this.props;\n    const { chartData } = this.state;\n\n    this.setState({\n      ...this.getMeta(\n        chartDivision,\n        chartPopulation,\n        chartRegion,\n        chartDataset,\n        chartData\n      ),\n    });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { chartDivision, chartPopulation, chartRegion, chartDataset } =\n      this.props;\n    const { chartData } = this.state;\n\n    // If chartData is unset, gather new data\n    if (\n      // If params changed, unset chartData\n      chartDivision !== prevProps.chartDivision ||\n      chartPopulation !== prevProps.chartPopulation ||\n      chartRegion !== prevProps.chartRegion ||\n      chartDataset !== prevProps.chartDataset ||\n      chartData !== prevState.chartData\n    ) {\n      this.updateMetadata();\n    }\n  }\n\n  // Fix region if needed\n  // Also, update metadata\n  onChangeChart = (\n    chartDivision,\n    chartPopulation,\n    chartRegion,\n    chartDataset\n  ) => {\n    this.updateMetadata();\n    const { chartsDataHandler, onChangeData, id } = this.props;\n    const region = chartsDataHandler.findRegion(\n      chartDivision,\n      chartPopulation,\n      chartRegion\n    );\n    onChangeData(id, {\n      chartDivision,\n      chartPopulation,\n      chartDataset,\n      chartRegion: region.url,\n    });\n  };\n\n  // Force data update on division change\n  onChangeChartDivision = (chartDivision) => {\n    const { chartPopulation, chartRegion, chartDataset } = this.props;\n    this.onChangeChart(\n      chartDivision,\n      chartPopulation,\n      chartRegion,\n      chartDataset\n    );\n  };\n\n  // Force data update on value change\n  onChangeChartPopulation = (chartPopulation) => {\n    const { chartDivision, chartRegion, chartDataset } = this.props;\n    this.onChangeChart(\n      chartDivision,\n      chartPopulation,\n      chartRegion,\n      chartDataset\n    );\n  };\n\n  // Force data update on value change\n  onChangeChartRegion = (chartRegion) => {\n    const { chartDivision, chartPopulation, chartDataset } = this.props;\n    this.onChangeChart(\n      chartDivision,\n      chartPopulation,\n      chartRegion,\n      chartDataset\n    );\n  };\n\n  // Datasets are on same data object\n  onChangeChartDataset = (chartDataset) => {\n    const { chartDivision, chartPopulation, chartRegion } = this.props;\n    this.onChangeChart(\n      chartDivision,\n      chartPopulation,\n      chartRegion,\n      chartDataset\n    );\n  };\n\n  render() {\n    const {\n      id,\n      days,\n      indexValues,\n      chartDivision,\n      chartPopulation,\n      chartDataset,\n      chartRegion,\n      chartsDataHandler: { divisions, populations },\n      onRemove,\n    } = this.props;\n    const { title, name, node } = this.state;\n\n    return (\n      <div\n        style={{\n          minWidth: \"200px\",\n          height: \"100%\",\n          paddingTop: \".3em\",\n          flex: \"1 1 0px\",\n        }}\n      >\n        <ChartWrapper\n          id={id}\n          setChartData={this.setChartData}\n          {...{\n            chartDivision,\n            chartPopulation,\n            chartDataset,\n            chartRegion,\n            chartRegionName: node.name,\n            indexValues,\n            days,\n            title,\n            name,\n          }}\n          /* Used in Edit */\n          divisions={divisions}\n          populations={populations}\n          onChangeChartDivision={this.onChangeChartDivision}\n          onChangeChartPopulation={this.onChangeChartPopulation}\n          onChangeChartDataset={this.onChangeChartDataset}\n          onChangeChartRegion={this.onChangeChartRegion}\n          onRemove={onRemove}\n        />\n      </div>\n    );\n  }\n}\n\n// Default values: first element of each's group\nconst chartDivision = \"REGIÓ/AGA\";\nconst chartPopulation = \"Població total\";\nconst chartRegion = 0;\nconst chartDataset = \"grafic_extensio\";\n\nDataHandler.defaultProps = {\n  chartDivision,\n  chartPopulation,\n  chartRegion,\n  chartDataset,\n  onChangeData: () => {},\n  onRemove: () => {},\n};\n\nDataHandler.propTypes = {\n  days: PropTypes.arrayOf(PropTypes.string).isRequired,\n  indexValues: PropTypes.number.isRequired,\n  id: PropTypes.string.isRequired,\n  onChangeData: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  chartDivision: PropTypes.string.isRequired,\n  chartPopulation: PropTypes.string.isRequired,\n  chartDataset: PropTypes.string.isRequired,\n  chartRegion: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    .isRequired,\n};\n\nexport default withHandler(DataHandler);\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgBcn(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 90.557 112.28\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m45.275 106.43 39.441-39.439-39.441-39.446-39.439 39.446zm40.019-39.439s-4.4106 7.9134-18.032 21.547c-13.823 13.806-21.988 18.452-21.988 18.452s-7.909-4.3975-21.538-18.045c-13.826-13.81-18.469-21.955-18.469-21.955s4.4236-7.9145 18.051-21.544c13.817-13.805 21.955-18.445 21.955-18.445s7.9308 4.3834 21.552 18.023c13.81 13.81 18.467 21.966 18.467 21.966m-40.019 39.439 39.441-39.439-39.441-39.446-39.439 39.446zm40.019-39.439s-4.4106 7.9134-18.032 21.547c-13.823 13.806-21.988 18.452-21.988 18.452s-7.909-4.3975-21.538-18.045c-13.826-13.81-18.469-21.955-18.469-21.955s4.4236-7.9145 18.051-21.544c13.817-13.805 21.955-18.445 21.955-18.445s7.9308 4.3834 21.552 18.023c13.81 13.81 18.467 21.966 18.467 21.966m-3.8377-0.56314h-3.6028v-3.6246zm-7.6209-7.6177v7.6177h-3.9888v-11.625zm-7.983-7.9928v15.61h-3.9942v-19.611zm-7.9971-7.996v23.606h-3.9899v-27.597zm-7.996-7.9949v31.601h-3.9942v-35.589zm-40.739 32.742h3.6289v3.6354zm7.621 7.6231v-7.6231h4.0029v11.611zm7.9841 7.996v-15.619h4.0083v19.611zm7.9982 7.9993v-23.618h3.9964v27.605zm7.9797 7.9808v-31.599h4.0105v35.587zm5.1618-31.599h7.9982v9.9518h-7.9982zm35.591 0-27.591 27.612-8.0004 7.9754v-21.641h8.0004v13.666l4.0051-4.0192v-9.6463h9.6398l4.0051-3.9942h-13.645v-9.9518zm-72.336-1.1404 23.603-23.625v9.6768h-9.6485l-3.9877 3.9996h13.636v9.9486zm27.6-27.619 7.9938-7.9699v21.641h-7.9938zm7.9938 27.619h-7.9949v-9.9486h7.9949zm42.59 0.58163c0-0.91104 0.72404-1.6199 1.622-1.6199 0.88821 0 1.6351 0.70882 1.6351 1.6199 0 0.8882-0.74687 1.6286-1.6351 1.6286-0.89799 0-1.622-0.74035-1.622-1.6286m-87.3 0c0-0.91104 0.73926-1.6199 1.6264-1.6199 0.90342 0 1.6329 0.70882 1.6329 1.6199 0 0.8882-0.72948 1.6286-1.6329 1.6286-0.88712 0-1.6264-0.74035-1.6264-1.6286m43.659 43.635c0-0.88712 0.73383-1.6155 1.6264-1.6155 0.90451 0 1.6199 0.7284 1.6199 1.6155 0 0.91538-0.71535 1.6307-1.6199 1.6307-0.89255 0-1.6264-0.71535-1.6264-1.6307m-8.407-101.02c-0.48813-0.14243-0.98279-0.22396-1.4948-0.22396-2.2461 0-4.0344 1.3622-4.0344 3.0125 0 0.78493 0.40333 1.5046 1.0404 2.0558l-1.771 1.7601c-1.1122-0.99258-1.7851-2.3341-1.7851-3.8007 0-3.068 2.9212-5.539 6.5501-5.539 0.92191 0 1.8264 0.16416 2.6418 0.48052 1.1806-1.3687 3.1082-2.2515 5.2618-2.2515 1.3329 0 2.5776 0.32723 3.6094 0.91321 1.0469-0.58598 2.2993-0.91321 3.618-0.91321 2.1656 0 4.0812 0.88277 5.2618 2.2515 0.81319-0.31636 1.7134-0.48052 2.6646-0.48052 3.6094 0 6.5425 2.4711 6.5425 5.539 0 1.4666-0.70556 2.8081-1.8025 3.8007l-1.7612-1.7601c0.64142-0.55118 1.0426-1.2709 1.0426-2.0558 0-1.6503-1.8047-3.0125-4.0214-3.0125-0.53488 0-1.0252 0.0815-1.5057 0.22396 0.07501 0.33701 0.10872 0.6762 0.10872 1.0295 0 1.0948-0.36528 2.1265-1.023 2.9973l-1.8058-1.8134c0.21961-0.37833 0.31419-0.76862 0.31419-1.1839 0-1.6862-1.7916-3.0288-4.0149-3.0288-0.84907 0-1.6514 0.21091-2.3037 0.54901v3.6344h-2.52v-3.568c-0.65882-0.39138-1.5014-0.61533-2.4146-0.61533-2.208 0-4.0094 1.3426-4.0094 3.0288 0 0.41529 0.11741 0.80558 0.31636 1.1839l-1.809 1.8134c-0.65556-0.87081-1.0121-1.9025-1.0121-2.9973 0-0.35333 0.03153-0.69252 0.11632-1.0295m-2.2482 13.247 1.4035 2.1156c3.1723-1.4677 6.9393-2.4461 10.863-2.4461 3.9725 0 7.7188 0.97845 10.891 2.4461l1.3992-2.1156c-3.58-1.7199-7.7677-2.7298-12.246-2.7298-4.4671 0-8.6972 0.9904-12.311 2.7298m10.595-21.166c0-0.94691 0.74905-1.7079 1.7025-1.7079 0.93278 0 1.6992 0.76101 1.6992 1.7079 0 0.93604-0.76644 1.6949-1.6992 1.6949-0.95343 0-1.7025-0.75884-1.7025-1.6949m-10.57 19.115c-0.6349-0.0641-1.148-0.52727-1.4861-1.2057 0.45443-0.59685 1.0643-0.94039 1.6949-0.87407 0.63055 0.0772 1.1633 0.53488 1.4883 1.2035-0.4653 0.59902-1.073 0.91756-1.697 0.87625m-1.1806-3.0875c-0.24787-0.57185-0.84689-0.92843-1.6025-1.0284-0.41855 0.61642-0.55445 1.3068-0.29136 1.8808 0.25874 0.56749 0.83711 0.93278 1.5883 1.0295 0.42725-0.61859 0.56749-1.2915 0.30549-1.8819m7.5872 1.2252c-0.61642-0.19134-1.0176-0.73818-1.2089-1.4796 0.56967-0.47943 1.2491-0.68056 1.8416-0.5077 0.6012 0.21091 1.0165 0.7621 1.1872 1.497-0.56532 0.47509-1.2209 0.68491-1.8199 0.49031m-1.6992 0.37398c0.4653-0.43486 0.6262-1.1122 0.49031-1.8536-0.711-0.20438-1.409-0.12284-1.8721 0.29571-0.48052 0.4316-0.62403 1.1122-0.49031 1.8406 0.71317 0.21852 1.4013 0.12068 1.8721-0.28266m1.1741-3.6224c-0.1185-0.62511-0.61533-1.0937-1.3307-1.347-0.55445 0.51966-0.82189 1.1643-0.69469 1.7742 0.13589 0.61206 0.6436 1.0872 1.3502 1.3415 0.53923-0.51096 0.81319-1.1513 0.67512-1.7688m18.561 5.1107c0.63925-0.0641 1.1524-0.52727 1.4796-1.2057-0.45008-0.59685-1.0719-0.94039-1.7025-0.87407-0.62511 0.0772-1.1404 0.53488-1.459 1.2035 0.45878 0.59902 1.0676 0.91756 1.6818 0.87625m1.1698-3.0875c0.27831-0.57185 0.86429-0.92843 1.597-1.0284 0.43269 0.61642 0.56641 1.3068 0.30984 1.8808-0.26092 0.56749-0.86646 0.93278-1.597 1.0295-0.41856-0.61859-0.56858-1.2915-0.30984-1.8819m-7.5742 1.2252c0.61533-0.19134 1.0252-0.73818 1.2002-1.4796-0.56967-0.47943-1.2383-0.68056-1.8242-0.5077-0.6262 0.21091-1.0274 0.7621-1.2144 1.497 0.58598 0.47509 1.2481 0.68491 1.8384 0.49031m1.6927 0.37398c-0.47182-0.43486-0.62511-1.1122-0.49248-1.8536 0.72731-0.20438 1.4198-0.12284 1.883 0.29571 0.45878 0.4316 0.62185 1.1122 0.47726 1.8406-0.711 0.21852-1.3992 0.12068-1.8677-0.28266m-1.1698-3.6224c0.13589-0.62511 0.63816-1.0937 1.3568-1.347 0.52618 0.51966 0.78275 1.1643 0.6599 1.7742-0.13154 0.61206-0.63272 1.0872-1.3394 1.3415-0.53379-0.51096-0.82406-1.1513-0.6773-1.7688m-7.1285 2.7288c0.5501-0.30549 0.84037-0.95017 0.86429-1.6894-0.66099-0.36093-1.3568-0.42181-1.8916-0.10002-0.5501 0.31854-0.83928 0.94039-0.87081 1.6992 0.66643 0.3381 1.3546 0.41855 1.8982 0.0902m1.7286 0c-0.53923-0.30549-0.83493-0.95017-0.86429-1.6894 0.6599-0.36093 1.3415-0.42181 1.9047-0.10002 0.54575 0.31854 0.83385 0.94039 0.86429 1.6992-0.66751 0.3381-1.3633 0.41855-1.9047 0.0902m-1.9025-3.2789c0-0.63924 0.40333-1.197 1.0382-1.5959 0.6349 0.39899 1.0469 0.9567 1.0469 1.5959 0 0.62512-0.41203 1.1785-1.0469 1.5894-0.6349-0.41094-1.0382-0.9643-1.0382-1.5894\",\n    fill: \"currentColor\",\n    strokeWidth: 1.0872\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBcn);\nexport default __webpack_public_path__ + \"static/media/bcn.9a9d191e.svg\";\nexport { ForwardRef as ReactComponent };","import Widget from './Widget'\n\nexport default Widget\n","import React from 'react'\n\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\nimport { ReactComponent as BcnIcon } from './bcn.svg'\n\nconst Icon = (props) => (\n  <svg {...props}>\n    <BcnIcon />\n  </svg>\n)\nconst BcnLogo = (props) => <SvgIcon component={Icon} {...props} />\n\nexport default BcnLogo\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport FormHelperText from '@material-ui/core/FormHelperText'\nimport FormControl from '@material-ui/core/FormControl'\nimport InputLabel from '@material-ui/core/InputLabel'\n\nimport { makeStyles } from '@material-ui/core/styles'\n\n// UI-Material Styles\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    minWidth: 120\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2)\n  },\n  labelFixed: {\n    position: 'initial',\n    transform: 'unset',\n    marginBottom: theme.spacing(2)\n  }\n}))\n\nconst FormDecorators = (props) => {\n  const classes = useStyles()\n  const { label, help, id, children, fixTree } = props\n  return (\n    <div\n      style={{\n        margin: '0 auto',\n        display: 'block'\n      }}\n    >\n      <FormControl required className={classes.formControl}>\n        <InputLabel\n          className={fixTree ? classes.labelFixed : null}\n          htmlFor={id}\n        >\n          {label}\n        </InputLabel>\n        {children}\n        {help ? (\n          <FormHelperText id={`helper-text-${id}`}>{help}</FormHelperText>\n        ) : null}\n      </FormControl>\n    </div>\n  )\n}\n\nFormDecorators.propTypes = {\n  label: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired,\n  help: PropTypes.string,\n  fixTree: PropTypes.bool\n}\n\nexport default FormDecorators\n","import React from \"react\";\n\nimport { withStyles } from \"@material-ui/core/styles\";\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\n\nimport { withHandler } from \"../../../Backend/Bcn/context\";\n\n// From: https://material-ui.com/components/tree-view/#rich-object\n\nconst styles = {\n  root: {\n    flexGrow: 1,\n    maxWidth: 400,\n  },\n};\n\nconst Tree = ({ node }) => (\n  <TreeItem\n    key={node.code}\n    nodeId={`${!(\"values\" in node) ? \"DISABLED-\" : \"\"}${node.code}`}\n    label={node.title}\n  >\n    {Array.isArray(node.sections)\n      ? node.sections.map((node, key) => <Tree {...{ node, key }} />)\n      : null}\n  </TreeItem>\n);\n\nclass RecursiveTreeView extends React.Component {\n  state = {\n    breadcrumb: [],\n    value: \"\",\n  };\n\n  onNodeSelect = (event, value, ...rest) => {\n    // Don't save values for disabled nodes\n    if (!/^DISABLED-/.test(value)) {\n      this.props.onChange(value);\n    }\n  };\n\n  constructor(props) {\n    super(props);\n\n    const { value, bcnDataHandler } = props;\n\n    this.state = {\n      value,\n      breadcrumb: bcnDataHandler\n        .findBreadcrumb(null, value)\n        .map((node) => `${!(\"values\" in node) ? \"DISABLED-\" : \"\"}${node.code}`),\n    };\n  }\n\n  render = () => {\n    const { classes, bcnDataHandler, ...restProps } = this.props;\n    const { breadcrumb, value } = this.state;\n\n    return (\n      <TreeView\n        className={classes.root}\n        defaultCollapseIcon={<ExpandMoreIcon />}\n        defaultExpandIcon={<ChevronRightIcon />}\n        defaultExpanded={breadcrumb}\n        defaultSelected={value}\n        onNodeSelect={this.onNodeSelect}\n        {...restProps}\n      >\n        {bcnDataHandler\n          .filter((section) => [\"graph\", \"chart\"].includes(section.type))\n          .map((section) => (\n            <Tree key={section.code} node={section} />\n          ))}\n      </TreeView>\n    );\n  };\n}\n\nexport default withHandler(withStyles(styles)(RecursiveTreeView));\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { translate } from 'react-translate'\n\nimport { FormDecorators } from '../Common'\nimport DatasetSelector from './EditDataset'\n\n/*\n   Renders the edit form for the BCN widget\n*/\nconst Edit = ({ dataset, t, onChangeDataset }) => (\n  <div style={{ textAlign: 'left' }}>\n    <FormDecorators id='sections-tree' label={t('Select the dataset')} fixTree>\n      <DatasetSelector value={dataset} onChange={onChangeDataset} />\n    </FormDecorators>\n  </div>\n)\n\nEdit.propTypes = {\n  dataset: PropTypes.string.isRequired,\n  onChangeDataset: PropTypes.func.isRequired\n}\n\nexport default translate('Widget/Bcn/Edit')(Edit)\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport BcnLogo from \"./BcnLogo\";\nimport { faEdit } from \"@fortawesome/free-solid-svg-icons\";\n\nimport { withHandler, withData } from \"../../../Backend/Bcn/context\";\n\nimport Chart from \"../Common/Chart\";\nimport Edit from \"./Edit\";\nimport withWidget from \"../../Widget\";\n\nconst ChartWrapper = withWidget({\n  // The normal view\n  view: {\n    icon: BcnLogo,\n    label: ({ t }) => t(\"View\"),\n    title: (props) => props.title,\n    render: withData((props) => {\n      const {\n        // Translated\n        days: dies,\n        bcnData: data,\n        // Discarded\n        setBcnData,\n        onRemove,\n        t,\n        dataset,\n        onChangeDataset,\n        bcnDataHandler,\n        // Passed through\n        ...restProps\n      } = props;\n\n      // Once downloaded, set parent's data, so it can properly\n      // set title and other widget components\n      React.useEffect(() => setBcnData(data), [data, setBcnData]);\n\n      return <Chart {...{ dies, data }} {...restProps} />;\n    }),\n  },\n\n  // Edit data\n  edit: {\n    icon: <FontAwesomeIcon icon={faEdit} />,\n    label: ({ t }) => t(\"Edit\"),\n    title: ({ t }) => t(\"Edit BCN parameters\"),\n    render: Edit,\n  },\n});\n\n/*\n   Combine BcnData backend with Chart\n*/\nclass DataHandler extends React.Component {\n  state = {\n    bcnData: null,\n  };\n\n  constructor(props) {\n    super(props);\n\n    // Set initial state for meta info\n    this.state = {\n      ...this.state,\n      ...this.getMeta(this.props.dataset, this.state.bcnData),\n    };\n  }\n\n  defaultMeta = {\n    title: \"...\",\n    name: \"...\",\n    theme: null,\n    yAxis: null,\n    source: null,\n  };\n\n  setBcnData = (bcnData) => this.setState({ bcnData });\n\n  // Get metadata from given params\n  getMeta = (dataset, bcnData) => {\n    if (!bcnData) {\n      return this.defaultMeta;\n    }\n    const found = this.props.bcnDataHandler.findChild(null, dataset);\n    if (!found) {\n      return this.defaultMeta;\n    }\n    const { title, description, theme, yAxis, source } = found;\n    return {\n      title,\n      name: title,\n      description,\n      theme,\n      yAxis,\n      source,\n    };\n  };\n\n  // Update metadata\n  updateData = () => {\n    const {\n      state: { bcnData },\n      props: { dataset },\n    } = this;\n    this.setState({\n      ...this.getMeta(dataset, bcnData),\n    });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      state: { bcnData },\n      props: { dataset },\n    } = this;\n\n    if (dataset !== prevProps.dataset || bcnData !== prevState.bcnData) {\n      this.updateData();\n    }\n  }\n\n  // Update params in parents\n  onChange = (dataset) => {\n    this.props.onChangeData(this.props.id, {\n      dataset,\n    });\n  };\n\n  // Datasets are on same data object\n  onChangeDataset = (dataset) => {\n    this.onChange(dataset);\n  };\n\n  render() {\n    const {\n      state: {\n        // Meta\n        title,\n        name,\n        description,\n        theme,\n        yAxis,\n        source,\n      },\n      props: { days, indexValues, id, dataset, onRemove },\n      onChangeDataset,\n      setBcnData,\n    } = this;\n\n    return (\n      <div\n        style={{\n          minWidth: \"200px\",\n          height: \"100%\",\n          paddingTop: \".3em\",\n          flex: \"1 1 0px\",\n        }}\n      >\n        <ChartWrapper\n          {...{\n            // Used in Edit\n            id,\n            dataset,\n            // Used in View\n            indexValues,\n            days,\n            title,\n            name,\n            description,\n            theme,\n            yAxis,\n            source,\n          }}\n          // Used in Edit\n          onChangeDataset={onChangeDataset}\n          onRemove={onRemove}\n          // Used in View\n          setBcnData={setBcnData}\n        />\n      </div>\n    );\n  }\n}\n\nDataHandler.defaultProps = {\n  dataset: \"IND_DEF_OBS_CAT\",\n  onChangeData: () => {},\n  onRemove: () => {},\n};\n\nDataHandler.propTypes = {\n  days: PropTypes.arrayOf(PropTypes.string).isRequired,\n  indexValues: PropTypes.number.isRequired,\n  id: PropTypes.string.isRequired,\n  onChangeData: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  dataset: PropTypes.string.isRequired,\n};\n\nexport default withHandler(DataHandler);\n","import Widget from './Widget'\n\nexport default Widget\n","import React from 'react'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faGlobeEurope as faMap,\n  faChartArea as faChart\n} from '@fortawesome/free-solid-svg-icons'\n\nimport MapWidget from './Map'\nimport ChartWidget from './Chart'\nimport BcnWidget from './Bcn'\n\nimport BcnLogo from './Bcn/BcnLogo'\n\nconst WidgetsTypes = [\n  {\n    key: 'map',\n    Component: MapWidget,\n    icon: <FontAwesomeIcon icon={faMap} />,\n    name: 'Map'\n  },\n  {\n    key: 'chart',\n    Component: ChartWidget,\n    icon: <FontAwesomeIcon icon={faChart} />,\n    name: 'Chart'\n  },\n  {\n    key: 'bcn',\n    Component: BcnWidget,\n    icon: <BcnLogo />,\n    name: 'Barcelona Chart'\n  }\n]\n\nexport default WidgetsTypes\n","import React from 'react'\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc'\nimport { Grid, makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles({\n  // Fixing some spotty behavior with the cursor style changing when dragging an item\n  // See this issue for more info: https://github.com/clauderic/react-sortable-hoc/issues/212\n  pointerEventsFix: {\n    pointerEvents: 'auto !important'\n  },\n  widgetsContainer: {\n    zIndex: 10,\n    width: '100%',\n    margin: 0\n  }\n})\n\nconst DraggableWidgetContainer = SortableElement(\n  ({ Component, payload, ...props }) => {\n    // Merge props from general props and from payload\n    // Add first the payload values, so them cannot overwrite the ones from props\n    return (\n      <Grid item xs={12} sm={6} md={4} lg={3}>\n        <Component {...payload} {...props} />\n      </Grid>\n    )\n  }\n)\n\nconst DraggableWidgetsList = SortableContainer(\n  ({ items: widgets, ...props }) => {\n    const classes = useStyles()\n\n    return (\n      <Grid container spacing={3} className={classes.widgetsContainer}>\n        {widgets.map(({ id, Component, payload }, index) => {\n          // Use `id` for the key to optimize renders on reorder\n          // The SortableElements will use the map method's index for sorting\n          // Passthrough `id`, `Component` and `payload`\n          return (\n            <DraggableWidgetContainer\n              key={id}\n              index={index}\n              {...props}\n              {...{ id, Component, payload }}\n            />\n          )\n        })}\n      </Grid>\n    )\n  }\n)\n\nconst SortableWidgetContainer = ({ widgets, onReorder, ...props }) => {\n  const classes = useStyles()\n\n  // Handle reordering of widgets after dragging and dropping\n  const onSortEnd = ({ oldIndex, newIndex }) => {\n    onReorder(oldIndex, newIndex)\n  }\n\n  return (\n    <DraggableWidgetsList\n      axis='xy'\n      items={widgets}\n      helperClass={classes.pointerEventsFix}\n      onSortEnd={onSortEnd}\n      useDragHandle\n      {...props}\n    />\n  )\n}\n\nexport default SortableWidgetContainer\n","// KISS Throtle\n// Ensures a function is not called more than once every timeout\n// - Run is banned while timer is on\n// - Run is ensured the first time (no timer is on) and when forced (you know it's the last time). In this case, timer is also cleared\n// - A last run IS NOT ensured if you don't recall after timer is out or manually forced\n// You can manually clear the timer if you want to ensure next run\nclass Throtle {\n  timer = false;\n\n  // Starts Throtle timer (bans running, except if forced)\n  start(timeout) {\n    this.timer = setTimeout(this.clear, timeout);\n  }\n\n  // Clear Throtle timer (allows running)\n  clear = () => {\n    if (this.timer !== false) {\n      clearTimeout(this.timer);\n      this.timer = false;\n    }\n  };\n\n  // Run function, if not throtled or if force == true\n  run(force, timeout, func) {\n    if (force) {\n      this.clear();\n    }\n\n    if (this.timer === false) {\n      this.start(timeout);\n      func();\n    }\n  }\n}\n\nexport default Throtle;\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { translate } from 'react-translate'\nimport Tooltip from '@material-ui/core/Tooltip'\n\n// Magic for Play/Pause button\nimport './PlayPause.scss'\n\n// Render the Play/Pause button next to the Slider\nconst PlayPauseButtonUntranslated = ({\n  isPlaying,\n  onPlay,\n  onPause,\n  className,\n  t\n}) => {\n  const id = `playpause_${Math.random()}`.replace('0.', '')\n  const onChange = React.useCallback(() => {\n    if (isPlaying) {\n      onPause()\n    } else {\n      onPlay()\n    }\n  }, [isPlaying, onPause, onPlay])\n\n  // All the styling magic is done into the SCSS file Slider.sccs ;)\n  return (\n    <Tooltip\n      title={t('Toggle play status')}\n      aria-label={!isPlaying ? t('play') : t('pause')}\n    >\n      <div className={`playpause ${className || ''}`}>\n        <input\n          id={id}\n          type='checkbox'\n          name='check'\n          checked={!isPlaying}\n          onChange={onChange}\n          aria-label={t('Toggle play status')}\n        />\n        <label htmlFor={id} style={{ borderLeftColor: '' }} />\n      </div>\n    </Tooltip>\n  )\n}\n\n// Translate Play/Pause component\nconst PlayPauseButton = translate('PlayPause')(PlayPauseButtonUntranslated)\n\nconst PlayPauseHandler = ({ isPlaying, onNext }) => {\n  // Use a timer holder to prevent an update when\n  // setting or cancelling the timer\n  // This is a controlled side effect.\n  const [timerHolder] = React.useState({ timer: false })\n\n  // Use useCallback to prevent the useEffect below beeing\n  // recalled on each render\n  const startTimer = React.useCallback(() => {\n    timerHolder.timer = setTimeout(() => {\n      timerHolder.timer = false\n      onNext()\n      startTimer()\n    }, 40)\n  }, [timerHolder, onNext])\n\n  const stopTimer = React.useCallback(() => {\n    if (timerHolder.timer) {\n      clearTimeout(timerHolder.timer)\n      timerHolder.timer = false\n    }\n  }, [timerHolder])\n\n  React.useEffect(() => {\n    if (isPlaying) {\n      startTimer()\n      // Ensure timer is stoped on unmount\n      return stopTimer\n    }\n  }, [isPlaying, startTimer, stopTimer])\n\n  return null\n}\n\nconst PlayPause = ({ className, value, max, onChange }) => {\n  // Handle playing status\n  // Use useCallback to reduce children rerenders\n  const [isPlaying, setIsPlaying] = React.useState(false)\n  const onPause = React.useCallback(() => {\n    setIsPlaying(false)\n  }, [setIsPlaying])\n\n  const onPlay = React.useCallback(() => {\n    setIsPlaying(true)\n  }, [setIsPlaying])\n\n  // Use useRef and useCallback to avoid recreating the\n  // callback on each render and hence force unneded updates\n  const valueRef = React.useRef(value)\n  valueRef.current = value\n  const onNext = React.useCallback(() => {\n    const next = valueRef.current < max - 1 ? valueRef.current + 1 : 0\n    onChange(\n      {\n        /* event */\n      },\n      next\n    )\n  }, [valueRef, max, onChange])\n\n  return (\n    <>\n      <PlayPauseButton\n        className={className}\n        onPlay={onPlay}\n        onPause={onPause}\n        isPlaying={isPlaying}\n      />\n      <PlayPauseHandler isPlaying={isPlaying} onNext={onNext} />\n    </>\n  )\n}\n\nPlayPause.propTypes = {\n  className: PropTypes.string,\n  value: PropTypes.number,\n  max: PropTypes.number,\n  onChange: PropTypes.func\n}\n\nexport default PlayPause\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { makeStyles } from '@material-ui/core/styles'\nimport SliderLib from '@material-ui/core/Slider'\nimport Tooltip from '@material-ui/core/Tooltip'\n\nimport PlayPause from './PlayPause'\n\n// Use special non-intrusive zIndex for the Slider tooltip\nconst useStyles = makeStyles((theme) => ({\n  popper: {\n    zIndex: 1200\n  },\n  tooltip: {\n    fontSize: '1rem'\n  }\n}))\n\n// Component to render the label's value\nconst ValueLabelComponent = (props) => {\n  const { children, open, value } = props\n  const classes = useStyles()\n\n  return (\n    <Tooltip\n      open={open}\n      enterTouchDelay={0}\n      placement='bottom'\n      title={value}\n      classes={{\n        popper: classes.popper,\n        tooltip: classes.tooltip\n      }}\n      arrow\n    >\n      {children}\n    </Tooltip>\n  )\n}\n\nValueLabelComponent.propTypes = {\n  children: PropTypes.node.isRequired,\n  open: PropTypes.bool.isRequired,\n  value: PropTypes.node.isRequired\n}\n\n/*\n   Renders a Slider with a play/pause button next to it, inside a\n   sticky container at the top of the page\n*/\nconst Slider = (props) => {\n  // TODO: Allow changing the timeout/speed\n\n  // Manage props and classes\n  const { classes = {} } = props\n  const restProps = React.useMemo(() => {\n    const { classes, ...rest } = props\n    return rest\n  }, [props])\n  const { playPause } = classes\n  const restClasses = React.useMemo(() => {\n    const { playPause, ...rest } = classes\n    return rest\n  }, [classes])\n\n  // Compose components\n  const { value, max, onChange } = props\n  return (\n    <>\n      <SliderLib\n        ValueLabelComponent={ValueLabelComponent}\n        step={1}\n        min={0}\n        classes={restClasses}\n        {...restProps}\n      />\n      <PlayPause\n        className={playPause}\n        value={value}\n        max={max}\n        onChange={onChange}\n      />\n    </>\n  )\n}\n\nexport default Slider\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\n\nimport Slider from './Slider'\n\n// UI Material styles/classes\nconst useStyles = makeStyles((theme) => ({\n  // Add some lateral space for the slider on larger displays\n  sliderRoot: {\n    [theme.breakpoints.up('md')]: {\n      marginLeft: theme.spacing(4),\n      marginRight: theme.spacing(4)\n    },\n    [theme.breakpoints.down('md')]: {\n      marginLeft: theme.spacing(3),\n      marginRight: theme.spacing(3)\n    }\n  },\n\n  // Play/pause button uses special CSS, so it does the font sizing\n  playPause: {\n    fontSize: theme.spacing(4 / 2),\n    [theme.breakpoints.up('md')]: {\n      fontSize: theme.spacing(6 / 2)\n    }\n  }\n}))\n\nconst DateSlider = ({ days, current, onSetDate }) => {\n  const sliderTipFormatter = React.useMemo(\n    () => (value) => days[value],\n    [days]\n  )\n  const { marks, marksSmall } = React.useMemo(() => {\n    // Marks on the slider\n    const marks = days\n\n      // Remember index\n      .map((day, index) => ({ day, index }))\n\n      // Get first day of each month\n      .filter(({ day }) => /^0?1\\//.test(day))\n\n      // Map to Slider marks schema and remove initial `0`\n      .map(({ day, index }) => ({\n        value: index,\n        label: day.replace(/^0/, '')\n      }))\n\n    return {\n      marks,\n      // Small devices: no labels\n      marksSmall: marks.map(({ value }) => ({ value }))\n    }\n  }, [days])\n\n  // Material-UI classes, cached\n  const classes = useStyles()\n  const sliderClasses = React.useMemo(\n    () => ({\n      root: classes.sliderRoot,\n      playPause: classes.playPause\n    }),\n    [classes]\n  )\n\n  // Get showMarkLabels prop using MediaQuery\n  // Used to prevent showing mark labels on small screens\n  const theme = useTheme()\n  const showMarkLabels = useMediaQuery(theme.breakpoints.up('md'))\n\n  return (\n    <Slider\n      classes={sliderClasses}\n      max={days.length - 1}\n      value={current}\n      onChange={onSetDate}\n      valueLabelFormat={sliderTipFormatter}\n      getAriaValueText={sliderTipFormatter}\n      // Marks without labels for small screens\n      marks={showMarkLabels ? marks : marksSmall}\n      // Always visible on small screens\n      valueLabelDisplay={showMarkLabels ? null : 'on'}\n    />\n  )\n}\n\nDateSlider.propTypes = {\n  days: PropTypes.array.isRequired,\n  current: PropTypes.number.isRequired,\n  onSetDate: PropTypes.func.isRequired\n}\n\nexport default DateSlider\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport ListHeader from \"./ListHeader\";\nimport MenuAddWidget from \"./MenuAddWidget\";\nimport WidgetsTypes from \"./Widgets\";\nimport SortableWidgetContainer from \"./SortableWidgetContainer\";\n\nimport Throtle from \"../Throtle\";\nimport DateSlider from \"./DateSlider\";\nimport Loading from \"../Loading\";\n\nimport { withIndex as withMapsIndex } from \"../Backend/Maps/context\";\nimport { WidgetStorageContextProvider, withStorageHandler } from \"./Storage\";\n\n// GUID generator: used to create unique temporal IDs for widgets\nconst S4 = () =>\n  (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\nconst guidGenerator = () =>\n  \"a-\" +\n  S4() +\n  S4() +\n  \"-\" +\n  S4() +\n  \"-\" +\n  S4() +\n  \"-\" +\n  S4() +\n  \"-\" +\n  S4() +\n  S4() +\n  S4();\n\n// Renders widgets list\n// - Manages days list (using backend) and currently selected Date with a Slider\n// - Receives managed plugins params from props (with storage context providers and consumer)\n// - Receives Widgets param modification events and calls parents param event\n//   handlers callbacks with processed data:\n//   - Add (from MenuAddWidget)\n//   - Edit (from widgets)\n//   - Remove (from widgets)\n//   - Reorder (from SortableWidgetContainer)\n// - Blindly (with `payload`) handles different types of widgets depending on passed/saved\n//   params from URL and localStorage\nclass WidgetsList extends React.PureComponent {\n  // Managed data: days & currently selected day\n  state = {\n    currentDate: null,\n    widgets: [],\n  };\n\n  // Widgets list temporal IDs\n  // Used to maintain widget uniqueness during a session\n  widgetsIds = [];\n\n  // Used in the slider to prevent blocking the UI\n  // with excessive calls on mouse move\n  throtle = new Throtle();\n\n  updateWidgets = () => {\n    // Ensure a unique and constant ID for each widget\n    const length = this.widgetsIds.length;\n    if (length < this.props.widgets.length) {\n      this.widgetsIds = this.props.widgets.map((w, index) =>\n        index < length ? this.widgetsIds[index] : guidGenerator()\n      );\n    }\n\n    // Generate a cached (in state) madurated list of widgets\n    const widgets = this.props.widgets.map(({ type, payload }, index) => ({\n      id: this.widgetsIds[index],\n      Component: WidgetsTypes.find((w) => w.key === type).Component,\n      ...{ payload },\n    }));\n\n    this.setState({ widgets });\n  };\n\n  componentDidMount() {\n    const { days } = this.props;\n    this.updateWidgets();\n    this.setState({ currentDate: days.length - 1 });\n  }\n\n  // Cleanup side effects\n  componentWillUnmount() {\n    // Cancel possible throtle timer\n    this.throtle.clear();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { days: daysOld } = prevProps;\n    const { days } = this.props;\n\n    if (daysOld !== days) {\n      const { currentDate } = this.state;\n      const isLast =\n        !currentDate || !daysOld || currentDate === daysOld.length - 1;\n\n      // If we were on last `days` item, go to the new last\n      if (isLast) {\n        this.setState({\n          currentDate: days.length - 1,\n        });\n      }\n    }\n\n    if (prevProps.widgets !== this.props.widgets) {\n      this.updateWidgets();\n    }\n  }\n\n  // Slider helpers\n  onSetDate = (event, currentDate) =>\n    this.throtle.run(false, 10, () => this.setState({ currentDate }));\n\n  // Adds a new default widget to the list\n  onAdd = (widgetType) => {\n    const widgets = [...this.props.widgets];\n    widgets.push({ type: widgetType ?? \"map\" });\n    return this.props.onChangeData({ widgets });\n  };\n\n  // Handle onRemove event from widget\n  // Uses `this.widgetsIDs` for widget identification\n  // Calls parent' onChangeData to save the data\n  onRemove = (id) => {\n    const widgets = this.props.widgets.filter(\n      (w, index) => this.widgetsIds[index] !== id\n    );\n    this.widgetsIds = this.widgetsIds.filter((idElement) => idElement !== id);\n    return this.props.onChangeData({ widgets });\n  };\n\n  // Handle onChangeData event from widget\n  // Calls parent' onChangeData to save the data\n  onChangeData = (id, data) => {\n    const { widgets } = this.props;\n    const widgetsNew = widgets.map((w, i) => ({\n      ...w,\n      ...(id === this.widgetsIds[i] ? { payload: data } : {}),\n    }));\n    return this.props.onChangeData({ widgets: widgetsNew });\n  };\n\n  // Handle widgets reordering\n  // Takes care of both `this.widgetsIds` and `this.props.widgets`\n  onReorder = (oldIndex, newIndex) => {\n    // Reorder ID\n    const id = this.widgetsIds[oldIndex];\n    this.widgetsIds.splice(oldIndex, 1);\n    this.widgetsIds.splice(newIndex, 0, id);\n\n    // Reorder data (keep props immutable)\n    // Use `widgets.filter` to clone original array\n    const { widgets } = this.props;\n    const widget = widgets[oldIndex];\n    const widgetsNew = widgets.filter((w, index) => index !== oldIndex);\n    widgetsNew.splice(newIndex, 0, widget);\n\n    // Save data\n    return this.props.onChangeData({ widgets: widgetsNew });\n  };\n\n  render() {\n    const { days } = this.props;\n    const { widgets, currentDate } = this.state;\n\n    if (currentDate === null) {\n      return <Loading />;\n    }\n\n    return (\n      <>\n        <ListHeader>\n          {/* Add an item */}\n          <MenuAddWidget onAdd={this.onAdd} options={WidgetsTypes} />\n\n          {/* Days display & Current manager */}\n          <DateSlider\n            days={days}\n            current={currentDate || 0}\n            onSetDate={this.onSetDate}\n          />\n        </ListHeader>\n\n        {/* Container that displays the widgets */}\n        <SortableWidgetContainer\n          days={days}\n          indexValues={currentDate}\n          onChangeData={this.onChangeData}\n          onRemove={this.onRemove}\n          onReorder={this.onReorder}\n          widgets={widgets}\n        />\n      </>\n    );\n  }\n}\n\nWidgetsList.propTypes = {\n  widgets: PropTypes.array.isRequired,\n  days: PropTypes.array.isRequired,\n  onChangeData: PropTypes.func.isRequired,\n};\n\n// withStorageHandler: Handle params from storage providers (route + localStorage) into props\n// withMapsIndex: Add `days` prop to use maps backend index (days)\nconst WidgetsListWithHOCs = withStorageHandler(withMapsIndex(WidgetsList));\n\n// Manage some context providers details:\n// - pathFilter: How to split `location` (<Router> `path` prop)\n// - paramsFilter: Parse `location` parts defined ^\n// - paramsToString: Parse back a JS object into a `location` path\nconst WidgetsListWithStorageContextProviders = (props) => (\n  <WidgetStorageContextProvider\n    pathFilter={\"/:widgets*\"}\n    paramsFilter={(params) => {\n      const { widgets } = params;\n      let widgetsParsed;\n\n      try {\n        widgetsParsed = widgets\n          .split(\"/\")\n          .map((w) => JSON.parse(decodeURIComponent(w)));\n      } catch (err) {\n        widgetsParsed = [];\n      }\n\n      return Object.assign({}, props, {\n        widgets: widgetsParsed,\n      });\n    }}\n    paramsToString={(params) => {\n      const widgets = params.widgets\n        .map((w) =>\n          encodeURIComponent(\n            JSON.stringify({\n              type: w.type,\n              payload: w.payload,\n            })\n          )\n        )\n        .join(\"/\");\n      return `/${widgets}`;\n    }}\n  >\n    <WidgetsListWithHOCs {...props} />\n  </WidgetStorageContextProvider>\n);\n\nexport default WidgetsListWithStorageContextProviders;\n","import React from 'react'\n\nimport { translate } from 'react-translate'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faInfoCircle as faAbout } from '@fortawesome/free-solid-svg-icons'\n\nfunction About ({ t }) {\n  return (\n    <>\n      <h1 id='modal_heading'>\n        <FontAwesomeIcon icon={faAbout} style={{ marginRight: '.5em' }} />\n        {t('About...')}\n      </h1>\n      <div id='modal_description' style={{ textAlign: 'left' }}>\n        <p>\n          {t(\n            'This applications displays public information extracted from the official web'\n          )}{' '}\n          <a\n            target='_blank'\n            rel='noopener noreferrer'\n            href='https://dadescovid.cat'\n          >\n            https://dadescovid.cat\n          </a>\n          .\n        </p>\n        <p>\n          {t(\n            'The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.'\n          )}\n        </p>\n\n        <h3>{t('Want more information?')}</h3>\n        <p>\n          <a\n            target='_blank'\n            rel='noopener noreferrer'\n            href='https://github.com/emibcn/covid'\n          >\n            {t('The source code is publicly available.')}\n          </a>{' '}\n          {t(\n            'There, you can find more information about how it has been done, licence and credits.'\n          )}\n        </p>\n\n        <h3>{t('Found a bug? Have a petition? Want to help somehow?')}</h3>\n        <p>\n          <a\n            target='_blank'\n            rel='noopener noreferrer'\n            href='https://github.com/emibcn/covid/issues'\n          >\n            {t('Create an issue at GitHub.')}\n          </a>\n        </p>\n\n        <h3>{t('Licenses')}</h3>\n        <p>\n          {t('The application, scripts and documentation in')}{' '}\n          <a\n            target='_blank'\n            rel='noopener noreferrer'\n            href='https://github.com/emibcn/covid'\n          >\n            {t('this project')}\n          </a>{' '}\n          {t('are released under the')}{' '}\n          <a\n            target='_blank'\n            rel='noopener noreferrer'\n            href='https://github.com/emibcn/covid/blob/master/LICENSE'\n          >\n            GNU General Public License v3.0\n          </a>\n          .\n        </p>\n        <p>\n          {t('The scripts and documentation published in')}{' '}\n          <a\n            target='_blank'\n            rel='noopener noreferrer'\n            href='https://github.com/emibcn/covid-data/'\n          >\n            covid-data\n          </a>{' '}\n          {t('are also released under the')}{' '}\n          <a\n            target='_blank'\n            rel='noopener noreferrer'\n            href='https://github.com/emibcn/covid/blob/master/LICENSE'\n          >\n            GNU General Public License v3.0\n          </a>\n          .\n        </p>\n        <p>\n          {t('The data scrapped and published in')}{' '}\n          <a\n            target='_blank'\n            rel='noopener noreferrer'\n            href='https://github.com/emibcn/covid-data/'\n          >\n            covid-data\n          </a>{' '}\n          {t('is licensed by their owner, the')}{' '}\n          <em>Generalitat de Catalunya</em>\n          {t(', under their own conditions (')}\n          <a\n            target='_blank'\n            rel='noopener noreferrer'\n            href='http://opendatacommons.org/licenses/by/1.0/'\n          >\n            Open Data Commons Attribution License\n          </a>\n          {t(', until now).')} {t('See more at the')}{' '}\n          <a\n            target='_blank'\n            rel='noopener noreferrer'\n            href='https://analisi.transparenciacatalunya.cat/Salut/Dades-setmanals-de-COVID-19-per-comarca/jvut-jxu8'\n          >\n            {t('dataset API documentation')}\n          </a>\n          .\n        </p>\n      </div>\n    </>\n  )\n}\n\nexport default translate('About')(About)\n","import React from 'react'\n\nimport { translate } from 'react-translate'\nimport Radio from '@material-ui/core/Radio'\nimport RadioGroup from '@material-ui/core/RadioGroup'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport FormControl from '@material-ui/core/FormControl'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faLanguage } from '@fortawesome/free-solid-svg-icons'\nimport available from './i18n/available'\n\nconst Language = (props) => {\n  const { t, language, onLanguageChange } = props\n  const handleLanguageChange = (e) => onLanguageChange(e.target.value)\n\n  const filteredLanguages = available.reduce((languages, current) => {\n    return !languages.find((item) => item.label === current.label)\n      ? languages.concat([current])\n      : languages\n  }, [])\n\n  return (\n    <>\n      <h1 id='modal_heading'>\n        <FontAwesomeIcon icon={faLanguage} style={{ marginRight: '.5em' }} />\n        {t('Language')}\n      </h1>\n      <>\n        <FormControl component='fieldset'>\n          <RadioGroup\n            aria-label='language'\n            name='language'\n            value={language}\n            onChange={handleLanguageChange}\n          >\n            {filteredLanguages.map((ele, index) => (\n              <FormControlLabel\n                key={index}\n                value={ele.key}\n                control={<Radio />}\n                label={ele.label}\n              />\n            ))}\n          </RadioGroup>\n        </FormControl>\n      </>\n    </>\n  )\n}\n\nexport default translate('Language')(Language)\n","import React from 'react'\n\nimport { translate } from 'react-translate'\nimport Radio from '@material-ui/core/Radio'\nimport RadioGroup from '@material-ui/core/RadioGroup'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport FormControl from '@material-ui/core/FormControl'\n\nimport ThemeIcon from '@material-ui/icons/Brightness4'\nimport DarkThemeIcon from '@material-ui/icons/Brightness2'\nimport LightThemeIcon from '@material-ui/icons/BrightnessHigh'\n\nconst iconStyles = {\n  fontSize: '1.5rem',\n  verticalAlign: 'middle',\n  marginRight: '.5em'\n}\nconst themes = [\n  {\n    name: 'Light',\n    icon: <LightThemeIcon style={iconStyles} />,\n    value: 'light'\n  },\n  {\n    name: 'Dark',\n    icon: <DarkThemeIcon style={iconStyles} />,\n    value: 'dark'\n  }\n]\n\nconst Theme = (props) => {\n  const { t, theme, onThemeChange } = props\n  const handleThemeChange = (e) => onThemeChange(e.target.value)\n\n  return (\n    <>\n      <h1 id='modal_heading'>\n        <ThemeIcon style={iconStyles} />\n        {t('Theme')}\n      </h1>\n      <>\n        <FormControl component='fieldset'>\n          <RadioGroup\n            aria-label='theme'\n            name='theme'\n            value={theme}\n            onChange={handleThemeChange}\n          >\n            {themes.map(({ name, icon, value }) => (\n              <FormControlLabel\n                key={value}\n                value={value}\n                control={<Radio />}\n                label={\n                  <>\n                    {icon}\n                    {t(name)}\n                  </>\n                }\n              />\n            ))}\n          </RadioGroup>\n        </FormControl>\n      </>\n    </>\n  )\n}\n\nexport default translate('Theme')(Theme)\n","import React from 'react'\nimport { Route } from 'react-router-dom'\n\nimport ModalRouter from './ModalRouter'\nimport { withErrorCatcher } from './ErrorCatcher'\nimport About from './About'\nimport Language from './Language'\nimport Theme from './Theme'\n\nconst ModalRouterWithRoutes = (props) => {\n  const { language, onLanguageChange, theme, onThemeChange } = props.routeProps\n  return (\n    <ModalRouter force={false}>\n      <Route\n        exact\n        path='about'\n        render={() => withErrorCatcher('About', <About />)}\n      />\n      <Route\n        exact\n        path='language'\n        render={() =>\n          withErrorCatcher(\n            'Language',\n            <Language language={language} onLanguageChange={onLanguageChange} />\n          )}\n      />\n      <Route\n        exact\n        path='theme'\n        render={() =>\n          withErrorCatcher(\n            'Theme',\n            <Theme theme={theme} onThemeChange={onThemeChange} />\n          )}\n      />\n    </ModalRouter>\n  )\n}\n\nexport default ModalRouterWithRoutes\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\nimport { createTheme, ThemeProvider } from '@material-ui/core/styles'\nimport CssBaseline from '@material-ui/core/CssBaseline'\n\nconst AppThemeProvider = (props) => {\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)')\n  const { type, children } = props\n\n  const theme = React.useMemo(\n    () =>\n      createTheme({\n        palette: {\n          type: type || (prefersDarkMode ? 'dark' : 'light')\n        }\n      }),\n    [prefersDarkMode, type]\n  )\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      {children}\n    </ThemeProvider>\n  )\n}\n\nAppThemeProvider.propTypes = {\n  type: PropTypes.oneOf(['light', 'dark', false])\n}\n\nexport default AppThemeProvider\n","import React from 'react'\n\nimport clsx from 'clsx'\nimport { translate } from 'react-translate'\n\nimport { makeStyles, createTheme } from '@material-ui/core/styles'\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\n\nimport Box from '@material-ui/core/Box'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Typography from '@material-ui/core/Typography'\nimport IconButton from '@material-ui/core/IconButton'\nimport Container from '@material-ui/core/Container'\nimport Link from '@material-ui/core/Link'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport Badge from '@material-ui/core/Badge'\n/*\nimport NotificationsIcon from '@material-ui/icons/Notifications';\n*/\n\nimport Menu from './Menu'\nimport ModalRouterWithRoutes from './ModalRouterWithRoutes'\nimport AppThemeProvider from './AppThemeProvider'\nimport { withServiceWorkerUpdater } from '@3m1/service-worker-updater'\n\nconst Copyright = translate('Copyright')((props) => {\n  const { t } = props\n  return (\n    <Typography variant='body2' color='textSecondary' align='center'>\n      {'Copyright © '}\n      <Link color='inherit' href='https://github.com/emibcn/covid'>\n        {t('Source code of:')}{' '}\n        <em>\n          {t('Covid Data')} <code>{t('Refactored')}</code>\n        </em>\n      </Link>{' '}\n      {new Date().getFullYear()}.\n    </Typography>\n  )\n})\n\nconst drawerWidth = 240\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex'\n  },\n  toolbar: {\n    paddingRight: 24 // keep right padding when drawer closed\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    })\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  menuButton: {\n    marginRight: 36\n  },\n  menuButtonHidden: {\n    display: 'none'\n  },\n  title: {\n    flexGrow: 1\n  },\n  content: {\n    flexGrow: 1,\n    height: '100vh',\n    overflow: 'auto'\n  },\n  container: {\n    paddingTop: theme.spacing(4),\n    paddingBottom: theme.spacing(4)\n  }\n}))\n\nconst Dashboard = (props) => {\n  const classes = useStyles()\n  const { children, theme, t, ...restProps } = props\n  const [open, setOpen] = React.useState(false)\n\n  const handleDrawerOpen = () => {\n    setOpen(true)\n  }\n  const handleDrawerClose = () => {\n    setOpen(false)\n  }\n  const shouldShowUpdateBadge =\n    useMediaQuery(createTheme().breakpoints.down('md')) &&\n    props.newServiceWorkerDetected\n\n  return (\n    <AppThemeProvider type={theme}>\n      <ModalRouterWithRoutes routeProps={props} />\n      <div id='root' className={classes.root}>\n        <AppBar\n          position='absolute'\n          className={clsx(classes.appBar, open && classes.appBarShift)}\n        >\n          <Toolbar className={classes.toolbar}>\n            <IconButton\n              edge='start'\n              color='inherit'\n              aria-label='open menu'\n              data-testid='open-menu'\n              onClick={handleDrawerOpen}\n              className={clsx(\n                classes.menuButton,\n                open && classes.menuButtonHidden\n              )}\n            >\n              <Badge\n                badgeContent={1}\n                color='secondary'\n                invisible={!shouldShowUpdateBadge}\n              >\n                <MenuIcon />\n              </Badge>\n            </IconButton>\n            <Typography\n              component='h1'\n              variant='h6'\n              color='inherit'\n              noWrap\n              className={classes.title}\n            >\n              {t('Covid Data')} <code>{t('Refactored')}</code>\n            </Typography>\n            {/*\n            <IconButton color=\"inherit\">\n              <Badge badgeContent={4} color=\"secondary\">\n                <NotificationsIcon />\n              </Badge>\n            </IconButton>\n            */}\n          </Toolbar>\n        </AppBar>\n        <Menu\n          {...{ handleDrawerOpen, handleDrawerClose, open }}\n          {...restProps}\n        />\n        <main className={classes.content}>\n          {children}\n          <Container maxWidth='lg' className={classes.container}>\n            <Box pt={4}>\n              <Copyright />\n            </Box>\n          </Container>\n        </main>\n      </div>\n    </AppThemeProvider>\n  )\n}\n\nexport default translate('Widget')(withServiceWorkerUpdater(Dashboard))\nexport { Copyright }\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker === null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType !== null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister()\n      })\n      .catch((error) => {\n        console.error(error.message)\n      })\n  }\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration'\nimport reportWebVitals from './reportWebVitals'\nimport { onServiceWorkerUpdate } from '@3m1/service-worker-updater'\n\n// Render the App\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register({\n  onUpdate: onServiceWorkerUpdate\n})\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(\n  // Log to console with a bit of style\n  ({ name, ...props }) => console.log(`%c${name}`, 'font-weight: bold', props)\n)\n","import handler from './handler'\nimport * as context from './context'\n\nexport default handler\nexport { context }\n","import Common, { log } from \"./Common\";\n\n// Transform a string into a smaller/hash one of it\nconst hashStr = (str) => {\n  if (str.length === 0) {\n    return 0;\n  }\n\n  return [...str]\n    .map((char) => char.charCodeAt(0))\n    .reduce((hash, int) => {\n      const hashTmp = (hash << 5) - hash + int;\n      return hashTmp & hashTmp; // Convert to 32bit integer\n    }, 0);\n};\n\n// Handles an element inside the cache\nclass FetchCacheElement extends Common {\n  name = \"Cache Element\";\n  fetching = false;\n  result = null;\n  lastModified = 0;\n  invalidated = false;\n  listeners = [];\n  url = \"\";\n\n  constructor(url) {\n    super();\n    this.url = url;\n  }\n\n  // Handle a fetch error by calling all the listeners' onError in the queue\n  onError = (error) => {\n    this.listeners.forEach((listener) => listener.onError(error));\n    this.cleanFetch();\n  };\n\n  // Add `this.url` to error messages\n  catchFetchErrorsMessage = (err) =>\n    `${this.url}: ${this.name} backend: ${err.message}`;\n\n  // Removes all unneeded data related to a fetch\n  cleanFetch = () => (this.fetching = false);\n\n  // Registers a listener\n  addListener = (onSuccess, onError) => {\n    this.listeners.push({\n      onSuccess,\n      onError,\n    });\n\n    // If this is the first listener, launch the fetch\n    if (!this.fetching && this.result === null) {\n      this.fetch();\n    }\n\n    // If we already have the data and it has not been invalidated, create\n    // a self-resolving promise which executes the listener after resolution\n    if (!this.invalidated && this.result !== null) {\n      new Promise((resolve, reject) => resolve(this.result)).then(onSuccess);\n    }\n\n    this.log(`Added listener to ${this.url}: ${this.listeners.length - 1}`);\n\n    return () => this.removeListener(onSuccess);\n  };\n\n  // Disables/unregisters a listener\n  removeListener = (onSuccess) => {\n    // Finds the listener by comparing the onSuccess function pointer\n    const found = this.listeners\n      .map((listener, index) => ({ listener, index }))\n      .find((l) => l.listener.onSuccess === onSuccess);\n\n    if (found) {\n      this.log(`Remove listener from ${this.url}: ${found.index}`);\n\n      // Remove element from array\n      this.listeners.splice(found.index, 1);\n    } else {\n      console.warn(`Remove listener from ${this.url}: Listener not found`);\n    }\n\n    // If there is an ongoing fetch and there are no more listeners left, abort the fetch\n    if (this.fetching && this.listeners.length === 0) {\n      this.abort();\n      this.cleanFetch();\n    }\n  };\n\n  // Caches the data and calls all the listeners' onSuccess\n  processSuccessFetch = ({ result, lastModified }) => {\n    this.result = result;\n    this.lastModified = lastModified;\n    this.listeners.forEach((listener) => listener.onSuccess(this.result));\n\n    this.cleanFetch();\n\n    // Allow re-chaining promises\n    return this.result;\n  };\n\n  // Gets a Date object from a fetch response `last-modified` HTTP header\n  getLastModifiedFromResponse = (response) =>\n    new Date(response.headers.get(\"last-modified\"));\n\n  // Fetches a URL:\n  // - Transforms from JSON to JS object\n  // - Gets last modified date\n  // - Processes all listeners\n  // - Calls the callback\n  // - If there is an error, processes all error listeners\n  fetch = (callback = () => {}) => {\n    this.fetching = true;\n    return fetch(this.url, { signal: this.controller.signal })\n      .then(this.handleFetchErrors)\n      .then((response) =>\n        response.json().then((result) => ({\n          result,\n          lastModified: this.getLastModifiedFromResponse(response),\n        }))\n      )\n      .then(this.processSuccessFetch)\n      .then(callback)\n      .catch(this.catchFetchErrors)\n      .finally(this.cleanFetch);\n  };\n\n  // Sends a HEAD request to download URL header's `last-modified` value and\n  // returns the comparison against saved value: `true` if new one is higher\n  checkIfNeedUpdate = (onSuccess, onError) => {\n    return fetch(this.url, { method: \"HEAD\", signal: this.controller.signal })\n      .then(this.handleFetchErrors)\n      .then(this.getLastModifiedFromResponse)\n      .then((date) => date > this.lastModified /* || true */) // TEST TODO BUG DEBUG\n      .then(onSuccess)\n      .catch(onError);\n  };\n\n  // Invalidates the cache and recalls it's download if we have any listener\n  invalidate = () => {\n    return new Promise((resolve, reject) => {\n      if (this.invalidated) {\n        // Resolve without doing nothing\n        // It has already just been invalidated\n        this.log(`${this.url}: It has already been invalidated`);\n        resolve();\n      } else if (this.result !== null) {\n        this.invalidated = true;\n\n        // Are there listeners?\n        if (this.listeners.length > 0) {\n          this.log(`${this.url}: Fetch it!`);\n          this.fetch(() => {\n            this.invalidated = false;\n          });\n          resolve();\n        } else {\n          // Resolve without doing nothing\n          // Someone downloaded it, but unregistered from it: changed data source\n          this.log(\n            `${this.url}: Someone downloaded it, but unregistered from it: changed data source`\n          );\n          this.invalidated = false;\n          resolve();\n        }\n      } else {\n        // Resolve without doing nothing\n        // It was never downloaded\n        this.log(`${this.url}: It was never downloaded`, {\n          result: this.result,\n          invalidated: this.invalidated,\n          t: this,\n        });\n        this.invalidated = false;\n        resolve();\n      }\n    });\n  };\n}\n\n// Handles the whole cache\n// This is intended for a singleton aproach\nclass FetchCache {\n  /*\n     Cached data and fetch handlers:\n\n     data = {\n       [ hashStr(url) ]: new FetchCacheElement(url),\n       ...\n     }\n  */\n  data = {};\n\n  name = \"Cache manager\";\n  log = log;\n\n  // Handles fetch requests:\n  // - Creates a new fetch if it's the first time for this URL\n  // - Adds fetch listener if there is an ongoing fetch for that URL\n  // - Returns the result if a fetch for that URL has already been cached\n  fetch = (url, onSuccess, onError = () => {}) => {\n    const id = hashStr(url);\n\n    // If we have not an ongoing request for this URL, create one\n    if (!(id in this.data)) {\n      this.data[id] = new FetchCacheElement(url);\n    }\n\n    return this.data[id].addListener(onSuccess, onError);\n  };\n\n  // Sends a HEAD request to download URL header's `last-modified` value and\n  // returns the comparison against saved value: `true` if new one is higher\n  checkIfNeedUpdate = (url, onSuccess, onError) => {\n    const id = hashStr(url);\n    return this.data[id].checkIfNeedUpdate(onSuccess, onError);\n  };\n\n  // Invalidates a cache entry and recalls it's download if it has any listener\n  invalidate = (url) => {\n    const id = hashStr(url);\n    if (!(id in this.data)) {\n      return new Promise((resolve, reject) => {\n        // Resolve without doing nothing\n        // It was never downloaded\n        this.log(`${url}: It was never downloaded`, {\n          id,\n          url,\n          data: this.data,\n        });\n        resolve(true);\n      });\n    }\n    return this.data[id].invalidate();\n  };\n}\n\n// This is a singleton:\n// All clients re-use the same cache\nconst cache = new FetchCache();\nObject.freeze(cache);\n\nexport default cache;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSyncAlt as faRefresh } from \"@fortawesome/free-solid-svg-icons\";\nimport { translate } from \"react-translate\";\n\nconst ShowErrorDefault = (props) => {\n  const { onRetry, reloadOnRetry, errorMessage, errorStack, count, t } = props;\n  return (\n    <>\n      <h1>{t(\"Something went wrong :(\")}</h1>\n      <button onClick={onRetry} style={{ padding: \"1em\" }}>\n        <FontAwesomeIcon icon={faRefresh} style={{ margin: \"0 .8em 0 .2em\" }} />\n        {reloadOnRetry\n          ? t(\"Try reloading the app to recover from it\")\n          : t(\"Try recreating this component to recover from the error\")}\n      </button>\n      <div style={{ textAlign: \"left\" }}>\n        <h2>{errorMessage}</h2>\n        {reloadOnRetry ? null : (\n          <p>\n            {t(\"Counter\")}: {count}\n          </p>\n        )}\n        <details style={{ whiteSpace: \"pre-wrap\" }}>{errorStack}</details>\n      </div>\n    </>\n  );\n};\n\nShowErrorDefault.defaultProps = {\n  t: (text) => text,\n};\n\nShowErrorDefault.propTypes = {\n  onRetry: PropTypes.func.isRequired,\n  reloadOnRetry: PropTypes.bool.isRequired,\n  errorMessage: PropTypes.string.isRequired,\n  errorStack: PropTypes.string.isRequired,\n  count: PropTypes.number.isRequired,\n  t: PropTypes.func.isRequired,\n};\n\n// Catches unhandled errors:\n// - Show it to user\n// - Send them to GA to help improve app\nclass ErrorCatcher extends React.PureComponent {\n  initialState = {\n    hasError: false,\n    errorMessage: \"\",\n    errorStack: \"\",\n    info: \"\",\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...this.initialState,\n      count: 0,\n    };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return {\n      hasError: true,\n      errorMessage: error.message,\n      errorStack: error.stack,\n    };\n  }\n\n  // Catch unhandled errors and send them to help improving the app\n  componentDidCatch(error, info) {\n    this.setState(\n      ({ count }) => ({\n        info: info.componentStack,\n        count: count + 1,\n      }),\n      () => this.sendEvent(\"Unhandled Error\")\n    );\n  }\n\n  reloadApp = () => {\n    this.sendEvent(\"Reload page from Error\");\n\n    // Reload app\n    window.location.reload();\n  };\n\n  retry = () => {\n    if (this.props.reloadOnRetry) {\n      this.reloadApp();\n    } else {\n      this.sendEvent(\"Reload component from Error\");\n      this.props.onRetry(this.state.count);\n      this.setState({\n        ...this.initialState,\n      });\n    }\n  };\n\n  // Send event to GA\n  sendEvent = (event) => {\n    const {\n      props: { sendEvent, origin },\n      state: { errorMessage, count },\n    } = this;\n    sendEvent(event, origin, `${errorMessage} (${count})`);\n  };\n\n  render() {\n    if (this.state.hasError) {\n      const { reloadOnRetry, ShowError } = this.props;\n      const { errorMessage, errorStack, count } = this.state;\n\n      // Show error to user\n      return (\n        <ShowError\n          onRetry={this.retry}\n          reloadOnRetry={reloadOnRetry}\n          errorMessage={errorMessage}\n          errorStack={errorStack}\n          count={count}\n        />\n      );\n    }\n\n    // Execute contained components\n    return this.props.children;\n  }\n}\n\nErrorCatcher.defaultProps = {\n  origin: \"No name\",\n  sendEvent: () => {},\n  onRetry: () => {},\n  reloadOnRetry: true,\n  ShowError: translate(\"ErrorCatcher\")(ShowErrorDefault),\n};\n\nErrorCatcher.propTypes = {\n  origin: PropTypes.string.isRequired,\n  sendEvent: PropTypes.func.isRequired,\n  onRetry: PropTypes.func.isRequired,\n  reloadOnRetry: PropTypes.bool.isRequired,\n  ShowError: PropTypes.elementType.isRequired,\n};\n\nconst withErrorCatcher = (origin, component) => (\n  <ErrorCatcher {...{ origin, key: origin }}>{component}</ErrorCatcher>\n);\n\nexport default ErrorCatcher;\nexport { withErrorCatcher, ShowErrorDefault };\n","export default __webpack_public_path__ + \"static/media/loading.cd422b5c.svg\";","import React from 'react'\nimport loading from './loading.svg'\n\nconst Loading = (props) => {\n  const { style = {}, restProps } = props\n\n  return (\n    <img\n      alt='Loading...'\n      src={loading}\n      style={{\n        width: '80%',\n        margin: 'auto',\n        display: 'block',\n        ...style\n      }}\n      {...restProps}\n    />\n  )\n}\n\nexport default Loading\n","import withHandlerGenerator from '../Base/withHandlerGenerator'\nimport { withHandler } from './context'\n\n// Index HOC\nconst withIndex = (WrappedComponent, name = 'index') =>\n  withHandlerGenerator(\n    withHandler,\n    () => ({}),\n    (props, Handler, setIndex) => Handler.index(setIndex),\n    name,\n    WrappedComponent\n  )\n\n// Data HOC\nconst withData = (WrappedComponent, name = 'chartData') => {\n  const WrapperComponent = withHandlerGenerator(\n    withHandler,\n    ({ chartDivision, chartPopulation, chartRegion }) => ({\n      chartDivision,\n      chartPopulation,\n      chartRegion\n    }),\n    ({ chartDivision, chartPopulation, chartRegion }, Handler, setData) =>\n      Handler.data(chartDivision, chartPopulation, chartRegion, setData),\n    name,\n    WrappedComponent\n  )\n\n  WrapperComponent.defaultProps = WrappedComponent.defaultProps\n\n  return WrapperComponent\n}\n\nexport { withIndex, withData }\n","import ContextCreator from '../Base/ContextCreator'\nimport Handler from './handler'\nimport { withIndex, withData } from './withHandlers'\n\nconst { Provider, withHandler, Consumer, useHandler, Context } = ContextCreator(\n  Handler,\n  'chartsDataHandler'\n)\n\nexport default Provider\nexport { withHandler, Consumer, useHandler, Context, withIndex, withData }\n","import withHandlerGenerator from '../Base/withHandlerGenerator'\nimport { withHandler } from './context'\n\n// Index HOC\nconst withIndex = (WrappedComponent, name = 'index') =>\n  withHandlerGenerator(\n    withHandler,\n    () => ({}),\n    (props, Handler, setIndex) => Handler.index(setIndex),\n    name,\n    WrappedComponent\n  )\n\n// Data HOC\nconst withData = (WrappedComponent, name = 'bcnData') => {\n  const WrapperComponent = withHandlerGenerator(\n    withHandler,\n    ({ dataset }) => ({ dataset }),\n    ({ dataset }, Handler, setData) => Handler.data(dataset, setData),\n    name,\n    WrappedComponent\n  )\n\n  WrapperComponent.defaultProps = WrappedComponent.defaultProps\n\n  return WrapperComponent\n}\n\nexport { withIndex, withData }\n","import ContextCreator from '../Base/ContextCreator'\nimport Handler from './handler'\nimport { withIndex, withData } from './withHandlers'\n\nconst { Provider, withHandler, Consumer, useHandler, Context } = ContextCreator(\n  Handler,\n  'bcnDataHandler'\n)\n\nexport default Provider\nexport { withHandler, Consumer, useHandler, Context, withIndex, withData }\n","import withHandlerGenerator from '../Base/withHandlerGenerator'\nimport { withHandler } from './context'\n\n// Index HOC\nconst withIndex = (WrappedComponent, name = 'days') =>\n  withHandlerGenerator(\n    withHandler,\n    () => ({}),\n    (props, Handler, setIndex) => Handler.index(setIndex),\n    name,\n    WrappedComponent\n  )\n\n// Data HOC\nconst withData = (WrappedComponent, name = 'mapData') => {\n  const WrapperComponent = withHandlerGenerator(\n    withHandler,\n    ({ mapKind, mapValue }) => ({ mapKind, mapValue }),\n    ({ mapKind, mapValue }, Handler, setData) => {\n      return Handler.data(mapKind, mapValue, (data) => {\n        // Optimization: Transform received data to use Map()\n        // instead of Object() in days values\n        const newData = {\n          ...data,\n          valors: data.valors.map(\n            (dayValues) => new Map(Object.entries(dayValues))\n          )\n        }\n        return setData(newData)\n      })\n    },\n    name,\n    WrappedComponent\n  )\n\n  return WrapperComponent\n}\n\nexport { withIndex, withData }\n","import ContextCreator from '../Base/ContextCreator'\nimport Handler from './handler'\nimport { withIndex, withData } from './withHandlers'\n\nconst { Provider, withHandler, Consumer, useHandler, Context } = ContextCreator(\n  Handler,\n  'mapsDataHandler'\n)\n\nexport default Provider\nexport { withHandler, Consumer, useHandler, Context, withIndex, withData }\n","import React from 'react'\n\nimport Loading from '../../Loading'\n\n// HOC generator\nconst withHandlerGenerator = (\n  withBackendHandlerHOC,\n  relevantParams,\n  getValue,\n  name,\n  WrappedComponent\n) => {\n  // Functional wrapper component\n  const WithValue = ({ BackendHandler, ...props }) => {\n    const [value, setValue] = React.useState(false)\n    const [params, setParams] = React.useState(relevantParams(props))\n\n    // Find if any relevant prop (param=relevant prop) has changed\n    const newParams = relevantParams(props)\n    if (\n      Object.keys(newParams).some((param) => newParams[param] !== params[param])\n    ) {\n      setParams(newParams)\n    }\n\n    // Subscribe to index updates\n    // Return unsubscribing function to let React execute it on cleanup\n    React.useEffect(\n      () => {\n        setValue(false)\n        return getValue(params, BackendHandler, setValue)\n      },\n      // Only execute on mount and on relevant props (param) change\n      [BackendHandler, params]\n    )\n\n    return value === false ? (\n      <Loading />\n    ) : (\n      <WrappedComponent {...props} {...{ [name]: value }} />\n    )\n  }\n\n  // Return wrapper component wrapped with a\n  // HOC providing the backend handler as a prop\n  return withBackendHandlerHOC(WithValue, 'BackendHandler')\n}\n\nexport default withHandlerGenerator\n","import Common from \"./Common\";\nimport cache from \"./Cache\";\n\n// Handle data backend and cache for backends at GH Pages\n// This is not a singleton: unique error handlers\nclass GHPages extends Common {\n  // Visible backend name\n  name = \"GitHub Pages\";\n\n  // Used to update the data at official schedule\n  // Official schedule's at 10am. It often is some minutes later.\n  // GH Pages cache backend Workflow schedule is at 10:30 and lasts few minutes (less than 5).\n  // We schedule at 10:35\n  timerDataUpdate = false;\n  officialUpdateTime = \"10:35\".split(\":\");\n\n  indexUrl = \"\"; // Needs to be declared in extended classes\n\n  /*\n     Handle data update and cache invalidation\n  */\n\n  // Checks if `index` URL has updates\n  // If HEAD request succeeds, calls callback with bool (`true` if update is needed)\n  checkUpdate = (callback, onError = () => {}) => {\n    return cache.checkIfNeedUpdate(\n      this.indexUrl,\n      async (updateNeeded) => {\n        this.log(`${this.name}: update needed: ${updateNeeded}`);\n        await callback(updateNeeded);\n      },\n      (error) => {\n        console.error(`${this.name}: updating data from backend:`, error);\n        onError(error);\n      }\n    );\n  };\n\n  // Invalidate all URLs, except index\n  invalidateAll = async () => {\n    console.warn(\n      `${this.name}: Need to define abstract function 'invalidateAll'`\n    );\n    //await cache.invalidate( this.indexUrl );\n  };\n\n  // Updates all sources, sequentially\n  updateAll = (callback) => {\n    return (async (callback) => {\n      // Invalidate each active JSON first\n      await this.invalidateAll();\n\n      // Finally, invalidate the `index` JSON\n      this.log(`${this.name}: Invalidate index`);\n\n      await cache.invalidate(this.indexUrl);\n\n      callback(true);\n    })(callback);\n  };\n\n  // Updates all sources if needed\n  // Always calls callback with a boolean argument indicating if an update was made\n  updateIfNeeded = (callback) => {\n    return this.checkUpdate(async (updateNeeded) => {\n      if (updateNeeded) {\n        await this.updateAll(() => callback(true));\n      } else {\n        callback(false);\n      }\n    });\n  };\n\n  // Cancels an ongoing timer for update\n  cancelUpdateSchedule = () => {\n    if (this.timerDataUpdate) {\n      clearTimeout(this.timerDataUpdate);\n      this.timerDataUpdate = false;\n    }\n  };\n\n  // Try to update data on next official scheduled data update\n  scheduleNextUpdate = ({ millis = false, ...options } = {}) => {\n    // If millis is not defined, call on next calculated default\n    const nextMillis = millis === false ? this.millisToNextUpdate() : millis;\n\n    const nextUpdateDate = new Date(new Date().getTime() + nextMillis);\n    this.log(`${this.name}: Next update on ${nextUpdateDate}`);\n\n    // Just in case\n    this.cancelUpdateSchedule();\n\n    // If data has been updated and `recursive` is true, re-schedule data update for the next day\n    // Else (recursive || not recursive but data NOT updated), schedule data update in 5 minutes\n    // This way, we retry an update few minutes later, in case the schedule has lasted more than usual\n    this.timerDataUpdate = setTimeout(() => {\n      const {\n        recursive = false,\n        onBeforeUpdate = () => {},\n        onAfterUpdate = () => {},\n        notUpdatedMillis = 300_000,\n      } = options;\n\n      onBeforeUpdate();\n      this.updateIfNeeded((updated) => {\n        onAfterUpdate(updated);\n        if (recursive || !updated) {\n          this.scheduleNextUpdate({\n            ...options,\n            ...(updated ? {} : { millis: notUpdatedMillis }),\n          });\n        }\n      });\n    }, nextMillis);\n\n    return nextUpdateDate;\n  };\n\n  abort = () => {\n    this.cancelUpdateSchedule();\n    super.abort();\n  };\n\n  // Calculates haw many milliseconds until next schedulled update (today's or tomorrow)\n  // TODO: Take care of timezones: Official date is in CEST/GMT+0200 (with daylight saving modifications), Date uses user's timezone and returns UTC\n  //       Now, it only works if user timezone is CEST\n  //       Probably, the best would be to translate both dates into UTC and, only then, compare them\n  millisToNextUpdate = () => {\n    const now = new Date();\n    const todayDataSchedule = new Date(\n      now.getFullYear(),\n      now.getMonth(),\n      now.getDate(),\n      ...this.officialUpdateTime,\n      0,\n      0\n    );\n    const millisTillSchedulle = todayDataSchedule - now;\n\n    return millisTillSchedulle <= 0\n      ? millisTillSchedulle + 86_400_000 // it's on or after today's schedule, try next schedule tomorrow.\n      : millisTillSchedulle;\n  };\n}\n\nexport default GHPages;\n","import React, { createContext, useContext } from 'react'\n\nconst ContextCreator = (Handler, defaultName) => {\n  const Context = createContext()\n\n  const Provider = ({ children, value = Handler }) => (\n    <Context.Provider value={value}>{children}</Context.Provider>\n  )\n\n  const useHandler = () => {\n    const context = useContext(Context)\n\n    if (context === undefined) {\n      throw new Error(`Handler must be used within a ${defaultName} Provider`)\n    }\n\n    return context\n  }\n\n  const Consumer = ({ children }) => children(useHandler())\n\n  const withHandler =\n    (WrappedComponent, name = defaultName) =>\n      (props) =>\n        (\n          <Consumer>\n            {(context) => (\n              <WrappedComponent {...props} {...{ [name]: context }} />\n            )}\n          </Consumer>\n        )\n\n  return {\n    Provider,\n    withHandler,\n    Consumer,\n    useHandler,\n    Context\n  }\n}\n\nexport default ContextCreator\n","const noop = () => {};\n\nconst log = (...args) => {\n  if ([\"development\", \"test\"].includes(process.env.NODE_ENV)) {\n    console.log(...args);\n  }\n};\n\nclass Common {\n  // Visible backend name\n  // Change when subclassing\n  name = \"Common\";\n\n  // Abort controller\n  // Used to stop pending fetches when user changes the date\n  controller = new AbortController();\n\n  // Overload to do something useful with errors\n  onError = noop;\n\n  // Can overload onError also on instantiation time\n  constructor({ onError } = {}) {\n    this.onError = onError || this.onError;\n  }\n\n  // Abort the abort controller and clean it up creating a new one for next fetches\n  // Add here all side-effects cancelling (fetches, timers, etc)\n  // Remember to call super() when subclassing\n  abort = () => {\n    this.controller.abort();\n    this.controller = new AbortController();\n  };\n\n  // Raises exception on response error\n  handleFetchErrors = (response) => {\n    // Raise succeeded non-ok responses\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    return response;\n  };\n\n  // Catches fetch errors, original or 'self-raised', and throws to `onError` prop\n  // Filters out non-error \"Connection aborted\"\n  catchFetchErrorsMessage = (err) => `${this.name} backend: ${err.message}`;\n  catchFetchErrorsAbortMessage = (err) => \"Connection aborted\";\n  catchFetchErrors = (err) => {\n    if (err.name === \"AbortError\") {\n      console.log(this.catchFetchErrorsAbortMessage());\n    } else {\n      err.message = this.catchFetchErrorsMessage(err);\n      this.onError(err);\n    }\n  };\n\n  log = log;\n}\n\nexport default Common;\nexport { log };\n","const common = {\n  'Covid Data - Refactored': 'Dades Covid - Refactoritzada',\n  'Covid Data': 'Dades Covid',\n  Refactored: 'Refactoritzada',\n  Close: 'Tanca',\n  'About...': 'Quant a...',\n  Language: 'Idioma',\n  Theme: 'Aparença',\n  Help: 'Ajuda',\n  Yes: 'Si',\n  No: 'No',\n  or: 'o'\n}\n\nconst chartEdit = {\n  Dataset: 'Conjunt de dades',\n  'Select the dataset': 'Selecciona el conjunt de dades a usar'\n}\n\nconst translations = {\n  locale: 'fr', // :(\n  name: 'Català',\n\n  App: {\n    ...common\n  },\n\n  Copyright: {\n    ...common,\n    'Source code of:': 'Codi font de'\n  },\n\n  ErrorCatcher: {\n    ...common,\n    'Something went wrong :(': 'Alguna cosa ha anat malament :(',\n    'Try reloading the app to recover from it':\n      \"Intenta recarregar l'aplicació per a continuar\",\n    'Try recreating this component to recover from the error':\n      'Intenta recarregar aquest component per a continuar',\n    Counter: 'Recompte'\n  },\n\n  Menu: {\n    ...common,\n    Menu: 'Menú',\n    'Update!': 'Actualitza!',\n    'New update available!': 'Nova versió disponible!'\n  },\n\n  ModalRouter: {\n    ...common\n  },\n\n  About: {\n    ...common,\n    'This applications displays public information extracted from the official web':\n      'Aquesta aplicació mostra informació pública extreta de la página web oficial',\n    'The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.':\n      \"La finalitat d'aquesta aplicació és mostrar les dades de formes diferents a l'original, millorant-ne el rendiment i afegint-ne més valor.\",\n    'Want more information?': 'Vols més informació?',\n    'The source code is publicly available.':\n      'El codi font és públicament accessible.',\n    'There, you can find more information about how it has been done, licence and credits.':\n      \"Allà trobaràs més informació sobre com s'ha fet, llicències i crèdits.\",\n    'Found a bug? Have a petition? Want to help somehow?':\n      \"Has trobat un error? Tens una petició? Vols ajudar d'alguna forma?\",\n    'Create an issue at GitHub.': 'Crea una incidència a GitHub',\n    Licenses: 'Llicències',\n    'The application, scripts and documentation in':\n      \"L'aplicació, scripts i documentació a\",\n    'this project': 'aquest projecte',\n    'are released under the': 'han sigut alliberats sota la',\n    'The scripts and documentation published in':\n      'Els scripts i documentació publicats a',\n    'are also released under the': 'també estan alliberades sota la',\n    'The data scrapped and published in':\n      'Les dades aconseguides de la web oficial i publicades a',\n    'is licensed by their owner, the':\n      'ha estat llicenciada pel seu propietari, la',\n    ', under their own conditions (': ', sota les seves pròpies condicions (',\n    ', until now).': ', fins ara).',\n    'See more at the': 'Pots trobar més informació a la',\n    'dataset API documentation': \"documentació de l'API del dataset\"\n  },\n\n  Language: {\n    ...common\n  },\n\n  Theme: {\n    ...common,\n    Light: 'Clara',\n    Dark: 'Obscura'\n  },\n\n  Help: {\n    ...common\n  },\n\n  WidgetsList: {\n    ...common\n  },\n\n  MenuAddWidget: {\n    ...common,\n    Map: 'Mapa',\n    Chart: 'Gràfic',\n    'Add a graph': 'Afegeix un gràfic',\n    add: 'afegeix',\n    'Barcelona Chart': 'Gràfic de Barcelona'\n  },\n\n  PlayPause: {\n    ...common,\n    'Toggle play status': \"Commuta l'estat de reproducció\",\n    play: 'Reprodueix',\n    pause: 'Pausa'\n  },\n\n  Widget: {\n    ...common,\n    remove: 'elimina',\n    Remove: 'Elimina',\n    'Remove?': 'Eliminar?',\n    'Confirm removal': \"Confirma l'eliminació\",\n    View: 'Veure',\n    Edit: 'Edita',\n    Legend: 'Llegenda',\n    'Edit map parameters': 'Edita les opcions del mapa',\n    'Edit chart parameters': 'Edita les opcions del gràfic',\n    'Edit BCN parameters': \"Edita les opcions de l'element de BCN\"\n  },\n\n  'Widget/Map/Edit': {\n    Type: 'Tipus',\n    'Select the regions type to show':\n      'Selecciona el tipus de regions a mostrar',\n    Values: 'Valors',\n    'Select the data origin': \"Selecciona l'origen de les dades\"\n  },\n\n  'Widget/Chart/Edit': {\n    ...chartEdit,\n    Division: 'Divisió territorial',\n    'Select the division type to show':\n      'Selecciona la divisió territorial a usar',\n    Population: 'Població',\n    'Select the population': 'Selecciona la població',\n    Extensió: 'Extensió',\n    'Risc iEPG': 'Risc iEPG',\n    Region: 'Regió',\n    'Select the region': 'Selecciona la regió',\n    Tracking: 'Seguiment',\n    Situation: 'Situació'\n  },\n\n  'Widget/Bcn/Edit': {\n    ...chartEdit\n  }\n}\n\nexport default translations\n","const common = {\n  'Covid Data - Refactored': 'Datos Covid - Refactorizada',\n  'Covid Data': 'Datos Covid',\n  Refactored: 'Refactorizada',\n  Close: 'Cerrar',\n  'About...': 'Sobre...',\n  Language: 'Idioma',\n  Theme: 'Apariencia',\n  Help: 'Ayuda',\n  Yes: 'Sí',\n  No: 'No',\n  or: 'o'\n}\n\nconst chartEdit = {\n  Dataset: 'Conjunto de datos',\n  'Select the dataset': 'Seleccionar el conjunto de datos a usar'\n}\n\nconst translations = {\n  locale: 'es',\n  name: 'Castellano',\n\n  App: {\n    ...common\n  },\n\n  Copyright: {\n    ...common,\n    'Source code of:': 'Código fuente de'\n  },\n\n  ErrorCatcher: {\n    ...common,\n    'Something went wrong :(': 'Algo ha ido mal :(',\n    'Try reloading the app to recover from it':\n      'Intenta recargar la aplicación para continuar',\n    'Try recreating this component to recover from the error':\n      'Intenta recargar este component para continuar',\n    Counter: 'Recuento'\n  },\n\n  Menu: {\n    ...common,\n    Menu: 'Menú',\n    'Update!': '¡Actualizar!',\n    'New update available!': '¡Nueva actualización disponible!'\n  },\n\n  ModalRouter: {\n    ...common\n  },\n\n  About: {\n    ...common,\n    'This applications displays public information extracted from the official web':\n      'Esta aplicación muestra información pública extraída de la página web oficial',\n    'The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.':\n      'El propósito de esta aplicación es mostrar los datos de una manera distinta al original, mejorando su rendimiento y añadiéndole más valor.',\n    'Want more information?': '¿Quieres saber más?',\n    'The source code is publicly available.':\n      'El código fuente está disponible al público.',\n    'There, you can find more information about how it has been done, licence and credits.':\n      'Ahí puedes encontrar más información sobre cómo se ha hecho, la licencia y los créditos.',\n    'Found a bug? Have a petition? Want to help somehow?':\n      '¿Has encontrado un bug? ¿Tienes alguna petición? ¿Quieres ayudar de alguna forma?',\n    'Create an issue at GitHub.': 'Abre un nuevo issue en GitHub.',\n    Licenses: 'Licencias',\n    'The application, scripts and documentation in':\n      'La aplicación, scripts y documentación de',\n    'this project': 'este projecto',\n    'are released under the': 'están publicados bajo la',\n    'The scripts and documentation published in':\n      'Los scripts y la documentación publicada en',\n    'are also released under the': 'también están publicados bajo la',\n    'The data scrapped and published in':\n      'Los datos recolectados y publicados en',\n    'is licensed by their owner, the':\n      'está bajo la licencia de su propietario, ',\n    ', under their own conditions (': ', bajo sus propias condiciones (',\n    ', until now).': ', hasta ahora).',\n    'See more at the': 'Ver más en la',\n    'dataset API documentation': 'documentación de la API del dataset'\n  },\n\n  Language: {\n    ...common\n  },\n\n  Theme: {\n    ...common,\n    Light: 'Clara',\n    Dark: 'Oscura'\n  },\n\n  Help: {\n    ...common\n  },\n\n  WidgetsList: {\n    ...common\n  },\n\n  MenuAddWidget: {\n    ...common,\n    Map: 'Mapa',\n    Chart: 'Gráfico',\n    'Barcelona Chart': 'Gráfico de Barcelona',\n    'Add a graph': 'Añadir un gráfico',\n    add: 'añadir'\n  },\n\n  PlayPause: {\n    ...common,\n    'Toggle play status': 'Conmutat el estado de reproducción',\n    play: 'reproducir',\n    pause: 'detener'\n  },\n\n  Widget: {\n    ...common,\n    remove: 'eliminar',\n    Remove: 'Eliminar',\n    'Remove?': 'Eliminar?',\n    'Confirm removal': 'Confirmar la eliminación',\n    View: 'Ver',\n    Edit: 'Editar',\n    Legend: 'Leyenda',\n    'Edit map parameters': 'Editar las opciones del mapa',\n    'Edit chart parameters': 'Editar las opciones del gráfico',\n    'Edit BCN parameters': 'Editar las opciones del elemento de BCN'\n  },\n\n  'Widget/Map/Edit': {\n    Type: 'Tipo',\n    'Select the regions type to show':\n      'Seleccionar el tipo de regiones a mostrar',\n    Values: 'Valores',\n    'Select the data origin': 'Selecciona el origen de los datos'\n  },\n\n  'Widget/Chart/Edit': {\n    ...chartEdit,\n    Division: 'División territorial',\n    'Select the division type to show':\n      'Seleccionar la división territorial a usar',\n    Population: 'Población',\n    'Select the population': 'Seleccionar la población',\n    Extensió: 'Extensión',\n    'Risc iEPG': 'Riesgo iEPG',\n    Region: 'Región',\n    'Select the region': 'Seleccionar la región',\n    Tracking: 'Seguimiento',\n    Situation: 'Situación'\n  },\n\n  'Widget/Bcn/Edit': {\n    ...chartEdit\n  }\n}\n\nexport default translations\n","const common = {\n  'Covid Data - Refactored': 'Covid Data - Refactored',\n  'Covid Data': 'Covid Data',\n  Refactored: 'Refactored',\n  Close: 'Close',\n  'About...': 'About...',\n  Language: 'Language',\n  Theme: 'Theme',\n  Help: 'Help',\n  Yes: 'Yes',\n  No: 'No',\n  or: 'or'\n}\n\nconst chartEdit = {\n  Dataset: 'Dataset',\n  'Select the dataset': 'Select the dataset'\n}\n\nconst translations = {\n  locale: 'en',\n  name: 'English',\n\n  App: {\n    ...common\n  },\n\n  Copyright: {\n    ...common,\n    'Source code of:': 'Source code of:'\n  },\n\n  ErrorCatcher: {\n    ...common,\n    'Something went wrong :(': 'Something went wrong :(',\n    'Try reloading the app to recover from it':\n      'Try reloading the app to recover from it',\n    'Try recreating this component to recover from the error':\n      'Try recreating this component to recover from the error',\n    Counter: 'Counter'\n  },\n\n  Menu: {\n    ...common,\n    Menu: 'Menu',\n    'Update!': 'Update!',\n    'New update available!': 'New update available!'\n  },\n\n  ModalRouter: {\n    ...common\n  },\n\n  About: {\n    ...common,\n    'This applications displays public information extracted from the official web':\n      'This applications displays public information extracted from the official web',\n    'The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.':\n      'The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.',\n    'Want more information?': 'Want more information?',\n    'The source code is publicly available.':\n      'The source code is publicly available.',\n    'There, you can find more information about how it has been done, licence and credits.':\n      'There, you can find more information about how it has been done, licence and credits.',\n    'Found a bug? Have a petition? Want to help somehow?':\n      'Found a bug? Have a petition? Want to help somehow?',\n    'Create an issue at GitHub.': 'Create an issue at GitHub.',\n    Licenses: 'Licenses',\n    'The application, scripts and documentation in':\n      'The application, scripts and documentation in',\n    'this project': 'this project',\n    'are released under the': 'are released under the',\n    'The scripts and documentation published in':\n      'The scripts and documentation published in',\n    'are also released under the': 'are also released under the',\n    'The data scrapped and published in': 'The data scrapped and published in',\n    'is licensed by their owner, the': 'is licensed by their owner, the',\n    ', under their own conditions (': ', under their own conditions (',\n    ', until now).': ', until now).',\n    'See more at the': 'See more at the',\n    'dataset API documentation': 'dataset API documentation'\n  },\n\n  Language: {\n    ...common\n  },\n\n  Theme: {\n    ...common,\n    Light: 'Light',\n    Dark: 'Dark'\n  },\n\n  Help: {\n    ...common\n  },\n\n  WidgetsList: {\n    ...common\n  },\n\n  MenuAddWidget: {\n    ...common,\n    Map: 'Map',\n    Chart: 'Chart',\n    'Barcelona Chart': 'Barcelona Chart',\n    'Add a graph': 'Add a graph',\n    add: 'add'\n  },\n\n  PlayPause: {\n    ...common,\n    'Toggle play status': 'Toggle play status',\n    play: 'play',\n    pause: 'pause'\n  },\n\n  Widget: {\n    ...common,\n    remove: 'remove',\n    Remove: 'Remove',\n    'Remove?': 'Remove?',\n    'Confirm removal': 'Confirm removal',\n    View: 'View',\n    Edit: 'Edit',\n    Legend: 'Legend',\n    'Edit map parameters': 'Edit map parameters',\n    'Edit chart parameters': 'Edit chart parameters',\n    'Edit BCN parameters': 'Edit BCN parameters'\n  },\n\n  'Widget/Map/Edit': {\n    Type: 'Type',\n    'Select the regions type to show': 'Select the regions type to show',\n    Values: 'Values',\n    'Select the data origin': 'Select the data origin'\n  },\n\n  'Widget/Chart/Edit': {\n    ...chartEdit,\n    Division: 'Division',\n    'Select the division type to show': 'Select the division type to show',\n    Population: 'Population',\n    'Select the population': 'Select the population',\n    Extensió: 'Extensió',\n    'Risc iEPG': 'Risc iEPG',\n    Region: 'Region',\n    'Select the region': 'Select the region',\n    Tracking: 'Tracking',\n    Situation: 'Situation'\n  },\n\n  'Widget/Bcn/Edit': {\n    ...chartEdit\n  }\n}\n\nexport default translations\n","const common = {\n  'Covid Data - Refactored': 'Covid Data - Refactored',\n  'Covid Data': 'Covid Data',\n  Refactored: 'Refactored',\n  Close: 'Zamknij',\n  'About...': 'O Covid Data...',\n  Language: 'Język',\n  Theme: 'Theme',\n  Help: 'Pomoc',\n  Yes: 'Tak',\n  No: 'Nie',\n  or: 'albo'\n}\n\nconst chartEdit = {\n  Dataset: 'Dane',\n  'Select the dataset': 'Wybierz zbiór danych'\n}\n\nconst translations = {\n  locale: 'pl',\n  name: 'Polish',\n\n  App: {\n    ...common\n  },\n\n  Copyright: {\n    ...common,\n    'Source code of:': 'Kod źródłowy:'\n  },\n\n  ErrorCatcher: {\n    ...common,\n    'Something went wrong :(': 'Coś poszło nie tak :(',\n    'Try reloading the app to recover from it':\n      'Spróbuj odświeżyć stronę by się z tego wydostać',\n    // TODO:\n    'Try recreating this component to recover from the error':\n      'Try recreating this component to recover from the error',\n    Counter: 'Counter'\n  },\n\n  Menu: {\n    ...common,\n    Menu: 'Menu',\n    'Update!': 'Aktualizacja!',\n    'New update available!': 'Nowa aktualizacja dostępna!'\n  },\n\n  ModalRouter: {\n    ...common\n  },\n\n  About: {\n    ...common,\n    'This applications displays public information extracted from the official web':\n      'Aplikacja pokazuje publicznie dostępne informacje z oficjalnych źródeł',\n    'The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.':\n      'Celem aplikacji jest pokazanie danych w inny sposób niż dotychczas dostępne, poprawienie wydajności oraz wartościowe ich ukazanie',\n    'Want more information?': 'Potrzebujesz więcej informacji?',\n    'The source code is publicly available.':\n      'Kod źródłowy jest dostępny publicznie.',\n    'There, you can find more information about how it has been done, licence and credits.':\n      'Tutaj możesz znaleźć informacje o powstawaniu aplikacji, licencjach oraz autorach.',\n    'Found a bug? Have a petition? Want to help somehow?':\n      'Błąd? Pomysł? Chcesz pomóc?',\n    'Create an issue at GitHub.': 'Stwórz ticket na GitHubie.',\n    Licenses: 'Licencje',\n    'The application, scripts and documentation in':\n      'Aplikacja, skrypty i dokumentacja w',\n    'this project': 'ten projekt',\n    'are released under the': 'jest wydawany w ramach',\n    'The scripts and documentation published in':\n      'Skrypty i dokumentacja udostępniona w ',\n    'are also released under the': 'także udostępniane jako',\n    'The data scrapped and published in': 'Dane pochodzące i udostępnione w',\n    'is licensed by their owner, the': 'licencjonowane przez właściciela: ',\n    ', under their own conditions (': ', na ich własnych zasadach (',\n    ', until now).': ', dotychczas).',\n    'See more at the': 'Sprawdź więcej na',\n    'dataset API documentation': 'dokumentacja źródła API'\n  },\n\n  Language: {\n    ...common\n  },\n\n  Theme: {\n    ...common,\n    Light: 'Light',\n    Dark: 'Dark'\n  },\n\n  Help: {\n    ...common\n  },\n\n  WidgetsList: {\n    ...common\n  },\n\n  MenuAddWidget: {\n    ...common,\n    Map: 'Mapa',\n    Chart: 'Wykres',\n    'Barcelona Chart': 'Barcelona Wykres',\n    'Add a graph': 'Dodaj wykres',\n    add: 'dodaj'\n  },\n\n  PlayPause: {\n    ...common,\n    'Toggle play status': 'Przełącz status',\n    play: 'play',\n    pause: 'pause'\n  },\n\n  Widget: {\n    ...common,\n    remove: 'usuń',\n    Remove: 'Usuń',\n    'Remove?': 'Usunąć?',\n    'Confirm removal': 'Potwierdź usunięcie',\n    View: 'Widok',\n    Edit: 'Edycja',\n    Legend: 'Legenda',\n    'Edit map parameters': 'Edytuj parametry mapy',\n    'Edit chart parameters': 'Edytuj parametry wykresu',\n    'Edit BCN parameters': 'Edytuj parametry BCN'\n  },\n\n  'Widget/Map/Edit': {\n    Type: 'Typ',\n    'Select the regions type to show': 'Wybierz regiony do pokazania',\n    Values: 'Wartość',\n    'Select the data origin': 'Wybierz źródło'\n  },\n\n  'Widget/Chart/Edit': {\n    ...chartEdit,\n    Division: 'Podział administracyjny',\n    'Select the division type to show': 'Wybierz podział administracyjny',\n    Population: 'Populacja',\n    'Select the population': 'Wybierz populację',\n    Extensió: 'Extensió',\n    'Risc iEPG': 'Risc iEPG',\n    Region: 'Region',\n    'Select the region': 'Wybierz region',\n    Tracking: 'Tracking',\n    Situation: 'Situation'\n  },\n\n  'Widget/Bcn/Edit': {\n    ...chartEdit\n  }\n}\n\nexport default translations\n","const common = {\n  'Covid Data - Refactored': 'Covid informasjon - Refaktorert',\n  'Covid Data': 'Covid Informasjon',\n  Refactored: 'Refaktorert',\n  Close: 'lukk',\n  'About...': 'Om...',\n  Language: 'Språk',\n  Theme: 'Theme',\n  Help: 'Hjelp',\n  Yes: 'Ja',\n  No: 'Nei',\n  or: 'eller'\n}\n\nconst chartEdit = {\n  Dataset: 'Datasett',\n  'Select the dataset': 'Velg datasett'\n}\n\nconst translations = {\n  locale: 'no',\n  name: 'Norsk',\n\n  App: {\n    ...common\n  },\n\n  Copyright: {\n    ...common,\n    'Source code of:': 'Kildekoden til:'\n  },\n\n  ErrorCatcher: {\n    ...common,\n    'Something went wrong :(': 'Noe gikk galt :(',\n    'Try reloading the app to recover from it':\n      'Prøv å starte appen på nytt for å gjenopprette fra det',\n    // TODO:\n    'Try recreating this component to recover from the error':\n      'Try recreating this component to recover from the error',\n    Counter: 'Counter'\n  },\n\n  Menu: {\n    ...common,\n    Menu: 'Meny',\n    'Update!': 'Oppdater!',\n    'New update available!': 'Ny oppdatering tilgjengelig!'\n  },\n\n  ModalRouter: {\n    ...common\n  },\n\n  About: {\n    ...common,\n    'This applications displays public information extracted from the official web':\n      'Denne applikasjonen viser offentlig informasjon hentet ut fra det offesielle nett',\n    'The aim of this application is to display the data in different ways than the original, improving performance and adding more value to it.':\n      'Målet med denne applikasjonen er å vise infromasjon på ulike måter enn den originale, forbedre ytelse og legger merverdi til den.',\n    'Want more information?': 'Vil du ha mer informasjon?',\n    'The source code is publicly available.':\n      'Kildekoden er offentlig tilgjengelig.',\n    'There, you can find more information about how it has been done, licence and credits.':\n      'Der kan du finne mer infromasjon om hvordan det har blitt gjordt, lisens og There, you can find more information og kreditter.',\n    'Found a bug? Have a petition? Want to help somehow?':\n      'Fant en feil? Har en begjøring? Lyst til å hjelpe?',\n    'Create an issue at GitHub.': 'Opprett en sak på GitHub.',\n    Licenses: 'Lisenser',\n    'The application, scripts and documentation in':\n      'Applikasjonen, skripts og dokumentasjon i',\n    'this project': 'dette prosjektet',\n    'are released under the': 'er utgitt under',\n    'The scripts and documentation published in':\n      'Skriptene og dokumentasjonen publisert i',\n    'are also released under the': 'er også utgitt under',\n    'The data scrapped and published in':\n      'Informasjonen som er skrapet og publisert i',\n    'is licensed by their owner, the': 'er lisensert av eieren',\n    ', under their own conditions (': ', under deres egne forhold (',\n    ', until now).': ', inntil videre).',\n    'See more at the': 'Se more på',\n    'dataset API documentation': 'dataset API dokumentasjonen'\n  },\n\n  Language: {\n    ...common\n  },\n\n  Theme: {\n    ...common,\n    Light: 'Light',\n    Dark: 'Dark'\n  },\n\n  Help: {\n    ...common\n  },\n\n  WidgetsList: {\n    ...common\n  },\n\n  MenuAddWidget: {\n    ...common,\n    Map: 'Kart',\n    Chart: 'Diagram',\n    'Barcelona Chart': 'Barcelona Diagram',\n    'Add a graph': 'Legg til en graf',\n    add: 'legg til'\n  },\n\n  PlayPause: {\n    ...common,\n    'Toggle play status': 'Endre spill status',\n    play: 'spill',\n    pause: 'pause'\n  },\n\n  Widget: {\n    ...common,\n    remove: 'fjern',\n    Remove: 'Fjern',\n    'Remove?': 'Fjern?',\n    'Confirm removal': 'Bekreft fjerning',\n    View: 'Vis',\n    Edit: 'Rediger',\n    Legend: 'Legende',\n    'Edit map parameters': 'Rediger kart parametere',\n    'Edit chart parameters': 'Rediger graf parametere',\n    'Edit BCN parameters': 'Rediger BCN parametere'\n  },\n\n  'Widget/Map/Edit': {\n    Type: 'Type',\n    'Select the regions type to show': 'Velg regionene bdu ønsker å vise',\n    Values: 'Verdier',\n    'Select the data origin': 'Velg datakilde'\n  },\n\n  'Widget/Chart/Edit': {\n    ...chartEdit,\n    Division: 'Divisjon',\n    'Select the division type to show': 'Velg divisjonstype å vise',\n    Population: 'Populasjon',\n    'Select the population': 'Velg populasjon',\n    Extensió: 'Extensió',\n    'Risc iEPG': 'Risc iEPG',\n    Region: 'Region',\n    'Select the region': 'Velg region',\n    Tracking: 'Tracking',\n    Situation: 'Situation'\n  },\n\n  'Widget/Bcn/Edit': {\n    ...chartEdit\n  }\n}\n\nexport default translations\n","import ca_es from './ca-es.lang.js'\nimport es_es from './es-es.lang.js'\nimport en_en from './en-en.lang.js'\nimport pl_pl from './pl-pl.lang.js'\nimport nb_no from './nb-no.lang.js'\n\n// Exports each language with more locale codes\nconst available = [\n  { key: 'en', label: en_en.name, value: en_en },\n  { key: 'en-en', label: en_en.name, value: en_en },\n  { key: 'en-us', label: en_en.name, value: en_en },\n  { key: 'en-au', label: en_en.name, value: en_en },\n  { key: 'ca', label: ca_es.name, value: ca_es },\n  { key: 'ca-es', label: ca_es.name, value: ca_es },\n  { key: 'es', label: es_es.name, value: es_es },\n  { key: 'es-es', label: es_es.name, value: es_es },\n  { key: 'pl', label: pl_pl.name, value: pl_pl },\n  { key: 'pl-pl', label: pl_pl.name, value: pl_pl },\n  { key: 'nb-no', label: nb_no.name, value: nb_no }\n]\n\nexport default available\n"],"sourceRoot":""}